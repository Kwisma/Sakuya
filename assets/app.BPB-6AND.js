const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/view-transition.IkvUpX_n.css","assets/404.DT8GHgK1.js","assets/chunks/@vueuse/motion.DnqFY5ed.js","assets/framework.CLRWxYV4.js","assets/back.BwElfDnc.js","assets/chunks/vue-router.5l-2F36_.js","assets/chunks/dayjs.DPscOGnl.js","assets/chunks/vue-i18n.k_rJvvoW.js","assets/chunks/pinia.BDIuemwT.js","assets/chunks/nprogress.DgNGesC2.js","assets/404.BVla_BTh.css","assets/empty.Cx7ZiHZE.js","assets/post.Fi2lpGM_.js","assets/404.wfzOfVoE.js","assets/404.bv7ttf42.css","assets/albums.ZhA9Sk6l.js","assets/index.CKUhG1ag.js","assets/animation.5i5Ck-Uc.js","assets/YunPageHeader.vue_vue_type_script_setup_true_lang.BtVE1kcb.js","assets/albums.B673jvUl.css","assets/archives.CtM31GGf.js","assets/YunPostCollapse.vue_vue_type_style_index_0_lang.x2Ydpxfi.js","assets/YunPostCollapse.CLDXGmA8.css","assets/categories.DXE3lkzl.js","assets/animation.DTeV3E5H.js","assets/index.BRXJGymZ.js","assets/collection.BFlp9W3r.js","assets/collections.C9DnTNGZ.js","assets/gallery.RWNAxWmZ.js","assets/home.cf6Kv5iK.js","assets/home.ChJzY-cN.css","assets/post.CdhpDE_u.js","assets/YunSponsor.vue_vue_type_style_index_0_lang.DI7-kGRH.js","assets/YunSponsor.BJOC5yvc.css","assets/YunPostMeta.vue_vue_type_script_setup_true_lang.BhXSaLFx.js","assets/YunPostMeta.DCrVMfuT.css","assets/post.DDxwAI70.css","assets/posts.BJCqi7wD.js","assets/YunPostList.vue_vue_type_script_setup_true_lang.hkvODlJg.js","assets/post.DLaUd_n-.js","assets/YunPostList.BfWGcc9d.css","assets/projects.DY5K7gKJ.js","assets/YunComment.vue_vue_type_style_index_0_lang.w7l-Bf3F.js","assets/index.C5okkQwF.js","assets/YunComment.BonxlUd6.css","assets/projects.Dti-qd8N.css","assets/tags.CpUs5ivz.js","assets/index.D4glYwG5.js","assets/Live2DApp.SegSPKx_.js","assets/YunAlgoliaSearch.BfN_XM8p.js"])))=>i.map(i=>d[i]);
var J0=Object.defineProperty;var Q0=(r,e,t)=>e in r?J0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ve=(r,e,t)=>Q0(r,typeof e!="symbol"?e+"":e,t);import{S as ri,O as tm,$ as e_,F as I,H as V,a0 as rm,y as xe,a1 as t_,a2 as r_,a3 as i_,z as dn,a4 as s_,C as In,A as U,D as Yt,Q as im,w as n_,x as o_,a5 as a_,a6 as Bc,a7 as l_,v as Fc,G as fn,_ as Ne,a8 as u_,a9 as li,aa as it,ab as ae,ac as R,I as ee,ad as N,ae as rt,af as k,ag as de,ah as c_,ai as J,aj as nr,L as Be,ak as we,b as h_,al as Zr,am as _e,W as X,an as Ui,ao as Ta,ap as sm,aq as Hi,ar as pn,as as nm,at as d_,au as f_,av as p_,aw as m_,ax as g_,ay as y_,T as om,az as v_,aA as __,aB as b_,aC as x_,aD as w_,aE as T_,K as A_}from"./framework.CLRWxYV4.js";import{u as Nc,a as Nr,c as S_,b as E_,d as C_,r as $c,D as P_}from"./chunks/vue-router.5l-2F36_.js";import{d as R_,c as am,M as I_}from"./chunks/@vueuse/motion.DnqFY5ed.js";import{d as pr,r as M_,t as k_,u as D_,g as lm,c as Zs,a as O_}from"./chunks/dayjs.DPscOGnl.js";import{u as st,c as L_}from"./chunks/vue-i18n.k_rJvvoW.js";import{c as B_,d as Aa,i as F_}from"./chunks/pinia.BDIuemwT.js";import{i as N_}from"./chunks/nprogress.DgNGesC2.js";function um(r,e){const t=[],i=e.resolveKeyData||(n=>n.key),s=e.resolveValueData||(n=>n.value);for(const[n,o]of Object.entries(r))t.push(...(Array.isArray(o)?o:[o]).map(a=>{const l={key:n,value:a},u=s(l);return typeof u=="object"?um(u,e):Array.isArray(u)?u:{[typeof e.key=="function"?e.key(l):e.key]:i(l),[typeof e.value=="function"?e.value(l):e.value]:u}}).flat());return t}function cm(r,e){return Object.entries(r).map(([t,i])=>{if(typeof i=="object"&&(i=cm(i,e)),e.resolve){const s=e.resolve({key:t,value:i});if(typeof s<"u")return s}return typeof i=="number"&&(i=i.toString()),typeof i=="string"&&e.wrapValue&&(i=i.replace(new RegExp(e.wrapValue,"g"),`\\${e.wrapValue}`),i=`${e.wrapValue}${i}${e.wrapValue}`),`${t}${e.keyValueSeparator||""}${i}`}).join(e.entrySeparator||"")}const $_=new Set(["title","titleTemplate","script","style","noscript"]),Ro=new Set(["base","meta","link","style","script","noscript"]),U_=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),H_=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),hm=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),G_=typeof window<"u";function mn(r){let e=9;for(let t=0;t<r.length;)e=Math.imul(e^r.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function mu(r){if(r._h)return r._h;if(r._d)return mn(r._d);let e=`${r.tag}:${r.textContent||r.innerHTML||""}:`;for(const t in r.props)e+=`${t}:${String(r.props[t])},`;return mn(e)}const at=r=>({keyValue:r,metaKey:"property"}),sl=r=>({keyValue:r}),Uc={appleItunesApp:{unpack:{entrySeparator:", ",resolve({key:r,value:e}){return`${Ar(r)}=${e}`}}},articleExpirationTime:at("article:expiration_time"),articleModifiedTime:at("article:modified_time"),articlePublishedTime:at("article:published_time"),bookReleaseDate:at("book:release_date"),charset:{metaKey:"charset"},contentSecurityPolicy:{unpack:{entrySeparator:"; ",resolve({key:r,value:e}){return`${Ar(r)} ${e}`}},metaKey:"http-equiv"},contentType:{metaKey:"http-equiv"},defaultStyle:{metaKey:"http-equiv"},fbAppId:at("fb:app_id"),msapplicationConfig:sl("msapplication-Config"),msapplicationTileColor:sl("msapplication-TileColor"),msapplicationTileImage:sl("msapplication-TileImage"),ogAudioSecureUrl:at("og:audio:secure_url"),ogAudioUrl:at("og:audio"),ogImageSecureUrl:at("og:image:secure_url"),ogImageUrl:at("og:image"),ogSiteName:at("og:site_name"),ogVideoSecureUrl:at("og:video:secure_url"),ogVideoUrl:at("og:video"),profileFirstName:at("profile:first_name"),profileLastName:at("profile:last_name"),profileUsername:at("profile:username"),refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve({key:r,value:e}){if(r==="seconds")return`${e}`}}},robots:{unpack:{entrySeparator:", ",resolve({key:r,value:e}){return typeof e=="boolean"?`${Ar(r)}`:`${Ar(r)}:${e}`}}},xUaCompatible:{metaKey:"http-equiv"}},dm=new Set(["og","book","article","profile"]);function fm(r){var i;const e=Ar(r),t=e.indexOf(":");return dm.has(e.substring(0,t))?"property":((i=Uc[r])==null?void 0:i.metaKey)||"name"}function z_(r){var e;return((e=Uc[r])==null?void 0:e.keyValue)||Ar(r)}function Ar(r){const e=r.replace(/([A-Z])/g,"-$1").toLowerCase(),t=e.indexOf("-"),i=e.substring(0,t);return i==="twitter"||dm.has(i)?r.replace(/([A-Z])/g,":$1").toLowerCase():e}function gu(r){if(Array.isArray(r))return r.map(t=>gu(t));if(typeof r!="object"||Array.isArray(r))return r;const e={};for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[Ar(t)]=gu(r[t]));return e}function j_(r,e){const t=Uc[e];return e==="refresh"?`${r.seconds};url=${r.url}`:cm(gu(r),{keyValueSeparator:"=",entrySeparator:", ",resolve({value:i,key:s}){if(i===null)return"";if(typeof i=="boolean")return`${s}`},...t==null?void 0:t.unpack})}const pm=new Set(["og:image","og:video","og:audio","twitter:image"]);function mm(r){const e={};for(const t in r){if(!Object.prototype.hasOwnProperty.call(r,t))continue;const i=r[t];String(i)!=="false"&&t&&(e[t]=i)}return e}function Yh(r,e){const t=mm(e),i=Ar(r),s=fm(i);if(pm.has(i)){const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[`${r}${o==="url"?"":`${o[0].toUpperCase()}${o.slice(1)}`}`]=t[o]);return Hc(n).sort((o,a)=>{var l,u;return(((l=o[s])==null?void 0:l.length)||0)-(((u=a[s])==null?void 0:u.length)||0)})}return[{[s]:i,...t}]}function Hc(r){const e=[],t={};for(const s in r){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const n=r[s];if(!Array.isArray(n)){if(typeof n=="object"&&n){if(pm.has(Ar(s))){e.push(...Yh(s,n));continue}t[s]=mm(n)}else t[s]=n;continue}for(const o of n)e.push(...typeof o=="string"?Hc({[s]:o}):Yh(s,o))}const i=um(t,{key({key:s}){return fm(s)},value({key:s}){return s==="charset"?"charset":"content"},resolveKeyData({key:s}){return z_(s)},resolveValueData({value:s,key:n}){return s===null?"_null":typeof s=="object"?j_(s,n):typeof s=="number"?s.toString():s}});return[...e,...i].map(s=>(s.content==="_null"&&(s.content=null),s))}function V_(r,e){return r instanceof Promise?r.then(e):e(r)}function yu(r,e,t,i){const s=i||ym(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[r==="script"||r==="noscript"||r==="style"?"innerHTML":"textContent"]:e},r==="templateParams"||r==="titleTemplate");if(s instanceof Promise)return s.then(o=>yu(r,e,t,o));const n={tag:r,props:s};for(const o of hm){const a=n.props[o]!==void 0?n.props[o]:t[o];a!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||$_.has(n.tag))&&(n[o==="children"?"innerHTML":o]=a),delete n.props[o])}return n.props.body&&(n.tagPosition="bodyClose",delete n.props.body),n.tag==="script"&&typeof n.innerHTML=="object"&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(o=>({...n,props:{...n.props,content:o}})):n}function W_(r,e){var i;const t=r==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,s])=>s).map(([s,n])=>r==="style"?`${s}:${n}`:s)),(i=String(Array.isArray(e)?e.join(t):e))==null?void 0:i.split(t).filter(s=>!!s.trim()).join(t)}function gm(r,e,t,i){for(let s=i;s<t.length;s+=1){const n=t[s];if(n==="class"||n==="style"){r[n]=W_(n,r[n]);continue}if(r[n]instanceof Promise)return r[n].then(o=>(r[n]=o,gm(r,e,t,s)));if(!e&&!hm.has(n)){const o=String(r[n]),a=n.startsWith("data-");o==="true"||o===""?r[n]=a?"true":!0:r[n]||(a&&o==="false"?r[n]="false":delete r[n])}}}function ym(r,e=!1){const t=gm(r,e,Object.keys(r),0);return t instanceof Promise?t.then(()=>r):r}const X_=10;function vm(r,e,t){for(let i=t;i<e.length;i+=1){const s=e[i];if(s instanceof Promise)return s.then(n=>(e[i]=n,vm(r,e,i)));Array.isArray(s)?r.push(...s):r.push(s)}}function Y_(r){const e=[],t=r.resolvedInput;for(const s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;const n=t[s];if(!(n===void 0||!U_.has(s))){if(Array.isArray(n)){for(const o of n)e.push(yu(s,o,r));continue}e.push(yu(s,n,r))}}if(e.length===0)return[];const i=[];return V_(vm(i,e,0),()=>i.map((s,n)=>(s._e=r._i,r.mode&&(s._m=r.mode),s._p=(r._i<<X_)+n,s)))}const qh=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Kh={base:-10,title:10},Zh={critical:-80,high:-10,low:20};function Vo(r){const e=r.tagPriority;if(typeof e=="number")return e;let t=100;return r.tag==="meta"?r.props["http-equiv"]==="content-security-policy"?t=-30:r.props.charset?t=-20:r.props.name==="viewport"&&(t=-15):r.tag==="link"&&r.props.rel==="preconnect"?t=20:r.tag in Kh&&(t=Kh[r.tag]),e&&e in Zh?t+Zh[e]:t}const q_=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],K_=["name","property","http-equiv"];function _m(r){const{props:e,tag:t}=r;if(H_.has(t))return t;if(t==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${t}:id:${e.id}`;for(const i of K_)if(e[i]!==void 0)return`${t}:${i}:${e[i]}`;return!1}const jr="%separator";function Z_(r,e,t=!1){var s;let i;if(e==="s"||e==="pageTitle")i=r.pageTitle;else if(e.includes(".")){const n=e.indexOf(".");i=(s=r[e.substring(0,n)])==null?void 0:s[e.substring(n+1)]}else i=r[e];if(i!==void 0)return t?(i||"").replace(/"/g,'\\"'):i||""}const J_=new RegExp(`${jr}(?:\\s*${jr})*`,"g");function Gs(r,e,t,i=!1){if(typeof r!="string"||!r.includes("%"))return r;let s=r;try{s=decodeURI(r)}catch{}const n=s.match(/%\w+(?:\.\w+)?/g);if(!n)return r;const o=r.includes(jr);return r=r.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===jr||!n.includes(a))return a;const l=Z_(e,a.slice(1),i);return l!==void 0?l:a}).trim(),o&&(r.endsWith(jr)&&(r=r.slice(0,-jr.length)),r.startsWith(jr)&&(r=r.slice(jr.length)),r=r.replace(J_,t).trim()),r}function Jh(r,e){return r==null?e||null:typeof r=="function"?r(e):r}const Q_=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,eb=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,tb=/^([/\\]\s*){2,}[^/\\]/,rb=/^\.?\//;function Gc(r,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Q_.test(r):eb.test(r)||(e.acceptRelative?tb.test(r):!1)}function vu(r="",e){return r.endsWith("/")}function zc(r="",e){return(vu(r)?r.slice(0,-1):r)||"/"}function bm(r="",e){return r.endsWith("/")?r:r+"/"}function Ut(r,e){if(ib(e)||Gc(r))return r;const t=zc(e);return r.startsWith(t)?r:xm(t,r)}function ib(r){return!r||r==="/"}function sb(r){return r&&r!=="/"}function xm(r,...e){let t=r||"";for(const i of e.filter(s=>sb(s)))if(t){const s=i.replace(rb,"");t=bm(t)+s}else t=i;return t}const Qh=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function nb(r,e){e?e={...Qh,...e}:e=Qh;const t=wm(e);return t.dispatch(r),t.toString()}const ob=Object.freeze(["prototype","__proto__","constructor"]);function wm(r){let e="",t=new Map;const i=s=>{e+=s};return{toString(){return e},getContext(){return t},dispatch(s){return r.replacer&&(s=r.replacer(s)),this[s===null?"null":typeof s](s)},object(s){if(s&&typeof s.toJSON=="function")return this.object(s.toJSON());const n=Object.prototype.toString.call(s);let o="";const a=n.length;a<10?o="unknown:["+n+"]":o=n.slice(8,a-1),o=o.toLowerCase();let l=null;if((l=t.get(s))===void 0)t.set(s,t.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(s))return i("buffer:"),i(s.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")this[o]?this[o](s):r.ignoreUnknown||this.unkown(s,o);else{let u=Object.keys(s);r.unorderedObjects&&(u=u.sort());let c=[];r.respectType!==!1&&!ed(s)&&(c=ob),r.excludeKeys&&(u=u.filter(h=>!r.excludeKeys(h)),c=c.filter(h=>!r.excludeKeys(h))),i("object:"+(u.length+c.length)+":");const d=h=>{this.dispatch(h),i(":"),r.excludeValues||this.dispatch(s[h]),i(",")};for(const h of u)d(h);for(const h of c)d(h)}},array(s,n){if(n=n===void 0?r.unorderedArrays!==!1:n,i("array:"+s.length+":"),!n||s.length<=1){for(const l of s)this.dispatch(l);return}const o=new Map,a=s.map(l=>{const u=wm(r);u.dispatch(l);for(const[c,d]of u.getContext())o.set(c,d);return u.toString()});return t=o,a.sort(),this.array(a,!1)},date(s){return i("date:"+s.toJSON())},symbol(s){return i("symbol:"+s.toString())},unkown(s,n){if(i(n),!!s&&(i(":"),s&&typeof s.entries=="function"))return this.array(Array.from(s.entries()),!0)},error(s){return i("error:"+s.toString())},boolean(s){return i("bool:"+s)},string(s){i("string:"+s.length+":"),i(s)},function(s){i("fn:"),ed(s)?this.dispatch("[native]"):this.dispatch(s.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(s.name)),r.respectFunctionProperties&&this.object(s)},number(s){return i("number:"+s)},xml(s){return i("xml:"+s.toString())},null(){return i("Null")},undefined(){return i("Undefined")},regexp(s){return i("regex:"+s.toString())},uint8array(s){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},uint8clampedarray(s){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},int8array(s){return i("int8array:"),this.dispatch(Array.prototype.slice.call(s))},uint16array(s){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},int16array(s){return i("int16array:"),this.dispatch(Array.prototype.slice.call(s))},uint32array(s){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},int32array(s){return i("int32array:"),this.dispatch(Array.prototype.slice.call(s))},float32array(s){return i("float32array:"),this.dispatch(Array.prototype.slice.call(s))},float64array(s){return i("float64array:"),this.dispatch(Array.prototype.slice.call(s))},arraybuffer(s){return i("arraybuffer:"),this.dispatch(new Uint8Array(s))},url(s){return i("url:"+s.toString())},map(s){i("map:");const n=[...s];return this.array(n,r.unorderedSets!==!1)},set(s){i("set:");const n=[...s];return this.array(n,r.unorderedSets!==!1)},file(s){return i("file:"),this.dispatch([s.name,s.size,s.type,s.lastModfied])},blob(){if(r.ignoreUnknown)return i("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return i("domwindow")},bigint(s){return i("bigint:"+s.toString())},process(){return i("process")},timer(){return i("timer")},pipe(){return i("pipe")},tcp(){return i("tcp")},udp(){return i("udp")},tty(){return i("tty")},statwatcher(){return i("statwatcher")},securecontext(){return i("securecontext")},connection(){return i("connection")},zlib(){return i("zlib")},context(){return i("context")},nodescript(){return i("nodescript")},httpparser(){return i("httpparser")},dataview(){return i("dataview")},signal(){return i("signal")},fsevent(){return i("fsevent")},tlswrap(){return i("tlswrap")}}}const Tm="[native code] }",ab=Tm.length;function ed(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-ab)===Tm}class Jr{constructor(e,t){Ve(this,"words");Ve(this,"sigBytes");e=this.words=e||[],this.sigBytes=t===void 0?e.length*4:t}toString(e){return(e||lb).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const i=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=i<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Jr([...this.words])}}const lb={stringify(r){const e=[];for(let t=0;t<r.sigBytes;t++){const i=r.words[t>>>2]>>>24-t%4*8&255;e.push((i>>>4).toString(16),(i&15).toString(16))}return e.join("")}},ub={stringify(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let i=0;i<r.sigBytes;i+=3){const s=r.words[i>>>2]>>>24-i%4*8&255,n=r.words[i+1>>>2]>>>24-(i+1)%4*8&255,o=r.words[i+2>>>2]>>>24-(i+2)%4*8&255,a=s<<16|n<<8|o;for(let l=0;l<4&&i*8+l*6<r.sigBytes*8;l++)t.push(e.charAt(a>>>6*(3-l)&63))}return t.join("")}},cb={parse(r){const e=r.length,t=[];for(let i=0;i<e;i++)t[i>>>2]|=(r.charCodeAt(i)&255)<<24-i%4*8;return new Jr(t,e)}},hb={parse(r){return cb.parse(unescape(encodeURIComponent(r)))}};class db{constructor(){Ve(this,"_data",new Jr);Ve(this,"_nDataBytes",0);Ve(this,"_minBufferSize",0);Ve(this,"blockSize",512/32)}reset(){this._data=new Jr,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=hb.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t,i=this._data.sigBytes/(this.blockSize*4);e?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const s=i*this.blockSize,n=Math.min(s*4,this._data.sigBytes);if(s){for(let o=0;o<s;o+=this.blockSize)this._doProcessBlock(this._data.words,o);t=this._data.words.splice(0,s),this._data.sigBytes-=n}return new Jr(t,n)}}class fb extends db{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const td=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],pb=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],mi=[];class mb extends fb{constructor(){super(...arguments);Ve(this,"_hash",new Jr([...td]))}reset(){super.reset(),this._hash=new Jr([...td])}_doProcessBlock(t,i){const s=this._hash.words;let n=s[0],o=s[1],a=s[2],l=s[3],u=s[4],c=s[5],d=s[6],h=s[7];for(let f=0;f<64;f++){if(f<16)mi[f]=t[i+f]|0;else{const b=mi[f-15],w=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,S=mi[f-2],x=(S<<15|S>>>17)^(S<<13|S>>>19)^S>>>10;mi[f]=w+mi[f-7]+x+mi[f-16]}const p=u&c^~u&d,m=n&o^n&a^o&a,g=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),_=h+v+p+pb[f]+mi[f],y=g+m;h=d,d=c,c=u,u=l+_|0,l=a,a=o,o=n,n=_+y|0}s[0]=s[0]+n|0,s[1]=s[1]+o|0,s[2]=s[2]+a|0,s[3]=s[3]+l|0,s[4]=s[4]+u|0,s[5]=s[5]+c|0,s[6]=s[6]+d|0,s[7]=s[7]+h|0}finalize(t){super.finalize(t);const i=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(i/4294967296),this._data.words[(s+64>>>9<<4)+15]=i,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function gb(r){return new mb().finalize(r).toString(ub)}function Sa(r,e={}){const t=typeof r=="string"?r:nb(r,e);return gb(t).slice(0,10)}function yb(r){return r}function be(r){return{"@id":typeof r!="string"?r["@id"]:r}}function jc(r){try{const e=r instanceof Date?r:new Date(Date.parse(r));return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`}catch{}return typeof r=="string"?r:r.toString()}const vb=[/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,/^\d{4}-[01]\d-[0-3]\d$/,/^\d{4}-[01]\d$/,/^\d{4}$/];function _b(r){return vb.some(e=>e.test(r))}function Mr(r){if(!r)return r;try{return r instanceof Date?r.toISOString():_b(r)?r:new Date(Date.parse(r)).toISOString()}catch{}return typeof r=="string"?r:r.toString()}const ct="#identity";function ie(r,e,t){!(r!=null&&r[e])&&t&&(r[e]=t)}function Wt(r){return Array.isArray(r)?r:[r]}function bb(r,e,t){const i=new Set(Wt(r[e]));i.add(t),r[e]=[...i].filter(Boolean)}function Js(r,e){return Gc(e)?e:(e.includes("#")||(e=`#${e}`),Ut(e,r))}function xb(r,e){if(!r)return r;if(r.length>e){const t=r.substring(0,e);return t.substring(0,Math.min(t.length,t.lastIndexOf(" ")))}return r}function Ps(r,e){const t=r["@type"];if(t===e)return;const i=new Set([...Wt(e),...Wt(t)]);r["@type"]=i.size===1?t:[...i.values()]}function kr(r,e){return!e||Gc(e)||e[0]!=="/"&&e[0]!=="#"?e:Ut(e,r)}function Rs(r){return r&&r.substring(r.lastIndexOf("#"))}function Am(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){if(r[e]&&typeof r[e]=="object"){if(r[e].__v_isReadonly||r[e].__v_isRef)return;Am(r[e]);return}(r[e]===""||r[e]===null||r[e]===void 0)&&delete r[e]}return r}const _u={cast(r){return typeof r=="number"?{value:r}:r},defaults:{"@type":"QuantitativeValue"}},Vc={defaults:{"@type":"MonetaryAmount"},resolve(r,e){return typeof r.value!="number"&&(r.value=Y(r.value,e,_u)),r}},wb={defaults:{"@type":"MerchantReturnPolicy"},resolve(r,e){return r.returnPolicyCategory&&(r.returnPolicyCategory=Ut(r.returnPolicyCategory,"https://schema.org/")),r.returnFees&&(r.returnFees=Ut(r.returnFees,"https://schema.org/")),r.returnMethod&&(r.returnMethod=Ut(r.returnMethod,"https://schema.org/")),r.returnShippingFeesAmount=Y(r.returnShippingFeesAmount,e,Vc),r}},Tb={defaults:{"@type":"DefinedRegion"}},Ab={defaults:{"@type":"ShippingDeliveryTime"},resolve(r,e){return r.handlingTime=Y(r.handlingTime,e,_u),r.transitTime=Y(r.transitTime,e,_u),r}},Sb={defaults:{"@type":"OfferShippingDetails"},resolve(r,e){return r.deliveryTime=Y(r.deliveryTime,e,Ab),r.shippingDestination=Y(r.shippingDestination,e,Tb),r.shippingRate=Y(r.shippingRate,e,Vc),r}},Is={cast(r){return typeof r=="number"||typeof r=="string"?{price:r}:r},defaults:{"@type":"Offer",availability:"InStock"},resolve(r,e){return ie(r,"priceCurrency",e.meta.currency),ie(r,"priceValidUntil",new Date(Date.UTC(new Date().getFullYear()+1,12,-1,0,0,0))),r.url&&kr(e.meta.host,r.url),r.availability&&(r.availability=Ut(r.availability,"https://schema.org/")),r.itemCondition&&(r.itemCondition=Ut(r.itemCondition,"https://schema.org/")),r.priceValidUntil&&(r.priceValidUntil=Mr(r.priceValidUntil)),r.hasMerchantReturnPolicy=Y(r.hasMerchantReturnPolicy,e,wb),r.shippingDetails=Y(r.shippingDetails,e,Sb),r}},Wc={defaults:{"@type":"AggregateOffer"},inheritMeta:[{meta:"currency",key:"priceCurrency"}],resolve(r,e){return r.offers=Y(r.offers,e,Is),r.offers&&ie(r,"offerCount",Wt(r.offers).length),r}},Mn={defaults:{"@type":"AggregateRating"}},Ea={cast(r){return typeof r=="string"&&(r={name:r}),r},defaults:{"@type":"ListItem"},resolve(r,e){return typeof r.item=="string"?r.item=kr(e.meta.host,r.item):typeof r.item=="object"&&(r.item=Y(r.item,e)),r}},Xc="#breadcrumb",Yc={defaults:{"@type":"BreadcrumbList"},idPrefix:["url",Xc],resolve(r,e){if(r.itemListElement){let t=1;r.itemListElement=Y(r.itemListElement,e,Ea,{array:!0,afterResolve(i){ie(i,"position",t++)}})}return r},resolveRootNode(r,{find:e}){const t=e(Rt);t&&ie(t,"breadcrumb",be(r))}},ii={alias:"image",cast(r){return typeof r=="string"&&(r={url:r}),r},defaults:{"@type":"ImageObject"},inheritMeta:["inLanguage"],idPrefix:"host",resolve(r,{meta:e}){return r.url=kr(e.host,r.url),ie(r,"contentUrl",r.url),r.height&&!r.width&&delete r.height,r.width&&!r.height&&delete r.width,r}},kn={defaults:{"@type":"PostalAddress"}},qc={defaults:{"@type":"SearchAction",target:{"@type":"EntryPoint"},"query-input":{"@type":"PropertyValueSpecification",valueRequired:!0,valueName:"search_term_string"}},resolve(r,e){return typeof r.target=="string"&&(r.target={"@type":"EntryPoint",urlTemplate:kr(e.meta.host,r.target)}),r}},ws="#website",Sm={defaults:{"@type":"WebSite"},inheritMeta:["inLanguage",{meta:"host",key:"url"}],idPrefix:["host",ws],resolve(r,e){return r.potentialAction=Y(r.potentialAction,e,qc,{array:!0}),r.publisher=Y(r.publisher,e),r},resolveRootNode(r,{find:e}){if(Rs(r["@id"])===ws){const t=e(ct);t&&ie(r,"publisher",be(t));const i=e(Rt);i&&ie(i,"isPartOf",be(r))}return r}},si={defaults:{"@type":"Organization"},idPrefix:["host",ct],inheritMeta:[{meta:"host",key:"url"}],resolve(r,e){return Ps(r,"Organization"),r.address=Y(r.address,e,kn),r},resolveRootNode(r,e){const t=Rs(r["@id"])===ct,i=e.find(Rt);if(r.logo&&t){if(!e.find("#organization")){const n=Y(r.logo,e,ii,{root:!0,afterResolve(o){o["@id"]=Js(e.meta.host,"#logo"),ie(o,"caption",r.name)}});i&&n&&ie(i,"primaryImageOfPage",be(n)),e.nodes.push({"@type":"Organization",name:r.name,url:r.url,sameAs:r.sameAs,address:r.address,logo:Y(r.logo,e,ii,{root:!1}).url,_priority:-1,"@id":Js(e.meta.host,"#organization")})}delete r.logo}t&&i&&ie(i,"about",be(r));const s=e.find(ws);s&&ie(s,"publisher",be(r))}},Kc={defaults:{"@type":"ReadAction"},resolve(r,e){return r.target.includes(e.meta.url)||r.target.unshift(e.meta.url),r}},Rt="#webpage",Em={defaults({meta:r}){const e=zc(r.url.substring(r.url.lastIndexOf("/")+1));let t="WebPage";switch(e){case"about":case"about-us":t="AboutPage";break;case"search":t="SearchResultsPage";break;case"checkout":t="CheckoutPage";break;case"contact":case"get-in-touch":case"contact-us":t="ContactPage";break;case"faq":t="FAQPage";break}return{"@type":t}},idPrefix:["url",Rt],inheritMeta:[{meta:"title",key:"name"},"description","datePublished","dateModified","url"],resolve(r,e){return r.dateModified=Mr(r.dateModified),r.datePublished=Mr(r.datePublished),Ps(r,"WebPage"),r.about=Y(r.about,e,si),r.breadcrumb=Y(r.breadcrumb,e,Yc),r.author=Y(r.author,e,Dr),r.primaryImageOfPage=Y(r.primaryImageOfPage,e,ii),r.potentialAction=Y(r.potentialAction,e,Kc),r["@type"]==="WebPage"&&e.meta.url&&ie(r,"potentialAction",[{"@type":"ReadAction",target:[e.meta.url]}]),r},resolveRootNode(r,{find:e,meta:t}){const i=e(ct),s=e(ws),n=e("#logo");i&&t.url===t.host&&ie(r,"about",be(i)),n&&ie(r,"primaryImageOfPage",be(n)),s&&ie(r,"isPartOf",be(s));const o=e(Xc);return o&&ie(r,"breadcrumb",be(o)),r}},Dr={cast(r){return typeof r=="string"?{name:r}:r},defaults:{"@type":"Person"},idPrefix:["host",ct],resolve(r,e){return r.url&&(r.url=kr(e.meta.host,r.url)),r},resolveRootNode(r,{find:e,meta:t}){if(Rs(r["@id"])===ct){ie(r,"url",t.host);const s=e(Rt);s&&ie(s,"about",be(r));const n=e(ws);n&&ie(n,"publisher",be(r))}const i=e(Dn);i&&ie(i,"author",be(r))}},Dn="#article",Cm={defaults:{"@type":"Article"},inheritMeta:["inLanguage","description","image","dateModified","datePublished",{meta:"title",key:"headline"}],idPrefix:["url",Dn],resolve(r,e){return r.author=Y(r.author,e,Dr,{root:!0}),r.publisher=Y(r.publisher,e),r.dateModified=Mr(r.dateModified),r.datePublished=Mr(r.datePublished),Ps(r,"Article"),r.headline=xb(r.headline,110),r},resolveRootNode(r,{find:e,meta:t}){var n;const i=e(Rt),s=e(ct);if(r.image&&!r.thumbnailUrl){const o=Wt(r.image)[0];typeof o=="string"?ie(r,"thumbnailUrl",kr(t.host,o)):o!=null&&o["@id"]&&ie(r,"thumbnailUrl",(n=e(o["@id"]))==null?void 0:n.url)}return s&&(ie(r,"publisher",be(s)),ie(r,"author",be(s))),i&&(ie(r,"isPartOf",be(i)),ie(r,"mainEntityOfPage",be(i)),ie(i,"potentialAction",[{"@type":"ReadAction",target:[t.url]}]),ie(i,"dateModified",r.dateModified),ie(i,"datePublished",r.datePublished)),r}},Zc={defaults:{"@type":"Book"},inheritMeta:["inLanguage"],resolve(r,e){return r.bookFormat&&(r.bookFormat=Ut(r.bookFormat,"https://schema.org/")),r.datePublished&&(r.datePublished=jc(r.datePublished)),r.author=Y(r.author,e),r},resolveRootNode(r,{find:e}){const t=e(ct);return t&&ie(r,"provider",be(t)),r}},Pm="#book",Rm={defaults:{"@type":"Book"},inheritMeta:["description","url",{meta:"title",key:"name"}],idPrefix:["url",Pm],resolve(r,e){return r.workExample=Y(r.workExample,e,Zc),r.author=Y(r.author,e),r.url&&Ut(r.url,e.meta.host),r},resolveRootNode(r,{find:e}){const t=e(ct);return t&&ie(r,"author",be(t)),r}},Im={defaults:{"@type":"Comment"},idPrefix:"url",resolve(r,e){return r.author=Y(r.author,e,Dr,{root:!0}),r},resolveRootNode(r,{find:e}){const t=e(Dn);t&&ie(r,"about",be(t))}},Mm={defaults:{"@type":"Course"},resolve(r,e){return r.provider=Y(r.provider,e,si,{root:!0}),r},resolveRootNode(r,{find:e}){const t=e(ct);return t&&ie(r,"provider",be(t)),r}},Ca={defaults:{"@type":"Place"},resolve(r,e){return typeof r.address!="string"&&(r.address=Y(r.address,e,kn)),r}},Jc={cast(r){return typeof r=="string"?{url:r}:r},defaults:{"@type":"VirtualLocation"}},km="#event",Dm={defaults:{"@type":"Event"},inheritMeta:["inLanguage","description","image",{meta:"title",key:"name"}],idPrefix:["url",km],resolve(r,e){var s;if(r.location){const n=r.location==="string"||((s=r.location)==null?void 0:s.url)!=="undefined";r.location=Y(r.location,e,n?Jc:Ca)}r.performer=Y(r.performer,e,Dr,{root:!0}),r.organizer=Y(r.organizer,e,si,{root:!0}),r.offers=Y(r.offers,e,Is),r.eventAttendanceMode&&(r.eventAttendanceMode=Ut(r.eventAttendanceMode,"https://schema.org/")),r.eventStatus&&(r.eventStatus=Ut(r.eventStatus,"https://schema.org/"));const t=r.eventStatus==="https://schema.org/EventMovedOnline";return["startDate","previousStartDate","endDate"].forEach(n=>{t?r[n]=Mr(r[n]):r[n]instanceof Date&&r[n].getHours()===0&&r[n].getMinutes()===0&&(r[n]=jc(r[n]))}),ie(r,"endDate",r.startDate),r},resolveRootNode(r,{find:e}){const t=e(ct);t&&ie(r,"organizer",be(t))}},Qc={defaults:{"@type":"OpeningHoursSpecification",opens:"00:00",closes:"23:59"}},Wo={defaults:{"@type":["Organization","LocalBusiness"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",ct],resolve(r,e){return Ps(r,["Organization","LocalBusiness"]),r.address=Y(r.address,e,kn),r.openingHoursSpecification=Y(r.openingHoursSpecification,e,Qc),r=Ln({...r},e,si),r},resolveRootNode(r,e){return si.resolveRootNode(r,e),r}},eh={cast(r){return r==="number"?{ratingValue:r}:r},defaults:{"@type":"Rating",bestRating:5,worstRating:1}},Om={defaults:{"@type":["Organization","LocalBusiness","FoodEstablishment"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",ct],resolve(r,e){return Ps(r,["Organization","LocalBusiness","FoodEstablishment"]),r.starRating=Y(r.starRating,e,eh),r=Ln(r,e,Wo),r},resolveRootNode(r,e){return Wo.resolveRootNode(r,e),r}},Lm={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToDirection"}},Pa={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToStep"},resolve(r,e){return r.url&&(r.url=kr(e.meta.url,r.url)),r.image&&(r.image=Y(r.image,e,ii,{root:!0})),r.itemListElement&&(r.itemListElement=Y(r.itemListElement,e,Lm)),r}},Bm="#howto",Fm={defaults:{"@type":"HowTo"},inheritMeta:["description","image","inLanguage",{meta:"title",key:"name"}],idPrefix:["url",Bm],resolve(r,e){return r.step=Y(r.step,e,Pa),r},resolveRootNode(r,{find:e}){const t=e(Rt);t&&ie(r,"mainEntityOfPage",be(t))}},Nm={defaults:{"@type":"ItemList"},resolve(r,e){if(r.itemListElement){let t=1;r.itemListElement=Y(r.itemListElement,e,Ea,{array:!0,afterResolve(i){ie(i,"position",t++)}})}return r}},$m={defaults:{"@type":"JobPosting"},idPrefix:["url","#job-posting"],resolve(r,e){return r.datePosted=Mr(r.datePosted),r.hiringOrganization=Y(r.hiringOrganization,e,si),r.jobLocation=Y(r.jobLocation,e,Ca),r.baseSalary=Y(r.baseSalary,e,Vc),r.validThrough=Mr(r.validThrough),r},resolveRootNode(r,{find:e}){const t=e(Rt),i=e(ct);return i&&ie(r,"hiringOrganization",be(i)),t&&ie(r,"mainEntityOfPage",be(t)),r}},On={defaults:{"@type":"Review"},inheritMeta:["inLanguage"],resolve(r,e){return r.reviewRating=Y(r.reviewRating,e,eh),r.author=Y(r.author,e,Dr),r}},th={cast(r){return typeof r=="string"&&(r={url:r}),r},alias:"video",defaults:{"@type":"VideoObject"},inheritMeta:[{meta:"title",key:"name"},"description","image","inLanguage",{meta:"datePublished",key:"uploadDate"}],idPrefix:"host",resolve(r,e){if(r.uploadDate&&(r.uploadDate=Mr(r.uploadDate)),r.url=kr(e.meta.host,r.url),r.caption&&!r.description&&(r.description=r.caption),r.description||(r.description="No description"),r.thumbnailUrl&&(typeof r.thumbnailUrl=="string"||Array.isArray(r.thumbnailUrl))){const t=Wt(r.thumbnailUrl).map(i=>kr(e.meta.host,i));r.thumbnailUrl=t.length>1?t:t[0]}return r.thumbnail&&(r.thumbnail=Y(r.thumbnailUrl,e,ii)),r},resolveRootNode(r,{find:e}){var t;if(r.image&&!r.thumbnail){const i=Wt(r.image)[0];ie(r,"thumbnail",(t=e(i["@id"]))==null?void 0:t.url)}}},Um={defaults:{"@type":"Movie"},resolve(r,e){return r.aggregateRating=Y(r.aggregateRating,e,Mn),r.review=Y(r.review,e,On),r.director=Y(r.director,e,Dr),r.actor=Y(r.actor,e,Dr),r.trailer=Y(r.trailer,e,th),r.dateCreated&&(r.dateCreated=jc(r.dateCreated)),r}},Hm="#product",Gm={defaults:{"@type":"Product"},inheritMeta:["description","image",{meta:"title",key:"name"}],idPrefix:["url",Hm],resolve(r,e){return ie(r,"sku",Sa(r.name)),r.aggregateOffer=Y(r.aggregateOffer,e,Wc),r.aggregateRating=Y(r.aggregateRating,e,Mn),r.offers=Y(r.offers,e,Is),r.review=Y(r.review,e,On),r},resolveRootNode(r,{find:e}){const t=e(Rt),i=e(ct);return i&&ie(r,"brand",be(i)),t&&ie(r,"mainEntityOfPage",be(t)),r}},Eb={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"Answer"}},zm={defaults:{"@type":"Question"},inheritMeta:["inLanguage"],idPrefix:"url",resolve(r,e){return r.question&&(r.name=r.question,delete r.question),r.answer&&(r.acceptedAnswer=r.answer,delete r.answer),r.acceptedAnswer=Y(r.acceptedAnswer,e,Eb),r},resolveRootNode(r,{find:e}){const t=e(Rt);t&&Wt(t["@type"]).includes("FAQPage")&&bb(t,"mainEntity",be(r))}},jm="#recipe",Vm={defaults:{"@type":"Recipe"},inheritMeta:[{meta:"title",key:"name"},"description","image","datePublished"],idPrefix:["url",jm],resolve(r,e){return r.recipeInstructions=Y(r.recipeInstructions,e,Pa),r},resolveRootNode(r,{find:e}){const t=e(Dn),i=e(Rt);return t?ie(r,"mainEntityOfPage",be(t)):i&&ie(r,"mainEntityOfPage",be(i)),t!=null&&t.author&&ie(r,"author",t.author),r}},Wm={defaults:{"@type":"SoftwareApplication"},resolve(r,e){return Ps(r,"SoftwareApplication"),r.offers=Y(r.offers,e,Is),r.aggregateRating=Y(r.aggregateRating,e,Mn),r.review=Y(r.review,e,On),r}};function Xm(r){switch(r){case"address":return kn;case"aggregateOffer":return Wc;case"aggregateRating":return Mn;case"article":return Cm;case"breadcrumb":return Yc;case"comment":return Im;case"event":return Dm;case"foodEstablishment":return Om;case"virtualLocation":return Jc;case"place":return Ca;case"howTo":return Fm;case"howToStep":return Pa;case"image":return ii;case"localBusiness":return Wo;case"offer":return Is;case"openingHours":return Qc;case"organization":return si;case"person":return Dr;case"product":return Gm;case"question":return zm;case"recipe":return Vm;case"review":return On;case"video":return th;case"webPage":return Em;case"webSite":return Sm;case"book":return Rm;case"course":return Mm;case"itemList":return Nm;case"jobPosting":return $m;case"listItem":return Ea;case"movie":return Um;case"searchAction":return qc;case"readAction":return Kc;case"softwareApp":return Wm;case"bookEdition":return Zc}return null}const Cb={__proto__:null,loadResolver:Xm};function rh(r){return!r.host&&r.canonicalHost&&(r.host=r.canonicalHost),!r.tagPosition&&r.position&&(r.tagPosition=r.position),!r.currency&&r.defaultCurrency&&(r.currency=r.defaultCurrency),!r.inLanguage&&r.defaultLanguage&&(r.inLanguage=r.defaultLanguage),r.path||(r.path="/"),!r.host&&typeof document<"u"&&(r.host=document.location.host),!r.url&&r.canonicalUrl&&(r.url=r.canonicalUrl),r.path!=="/"&&(r.trailingSlash&&!vu(r.path)?r.path=bm(r.path):!r.trailingSlash&&vu(r.path)&&(r.path=zc(r.path))),r.url=xm(r.host||"",r.path),{...r,host:r.host,url:r.url,currency:r.currency,image:r.image,inLanguage:r.inLanguage,title:r.title,description:r.description,datePublished:r.datePublished,dateModified:r.dateModified}}function Ln(r,e,t){var i;if(t!=null&&t.cast&&(r=t.cast(r,e)),t!=null&&t.defaults){let s=t.defaults||{};typeof s=="function"&&(s=s(e)),r={...s,...r}}(i=t==null?void 0:t.inheritMeta)==null||i.forEach(s=>{typeof s=="string"?ie(r,s,e.meta[s]):ie(r,s.key,e.meta[s.meta])}),t!=null&&t.resolve&&(r=t.resolve(r,e));for(const s in r){const n=r[s];Array.isArray(n)&&n.forEach((o,a)=>{typeof o=="object"&&(o!=null&&o._resolver)&&(r[s][a]=Y(o,e,o._resolver))}),typeof n=="object"&&(n!=null&&n._resolver)&&(r[s]=Y(n,e,n._resolver))}return Am(r),r}function Xo(r,e,t,i=!1){var l,u,c,d;if(r["@id"]&&r["@id"].startsWith("http"))return r;const s=t&&(Array.isArray(t.idPrefix)?t.idPrefix[0]:t.idPrefix)||"url",n=r["@id"]||(t?Array.isArray(t.idPrefix)?(l=t.idPrefix)==null?void 0:l[1]:void 0:"");if(!r["@id"]&&i&&n)return r["@id"]=Js(e.meta[s],n),r;if((u=r["@id"])!=null&&u.startsWith("#/schema/")||(c=r["@id"])!=null&&c.startsWith("/"))return r["@id"]=Js(e.meta[s],r["@id"]),r;let o=t==null?void 0:t.alias;o||(o=(((d=Wt(r["@type"]))==null?void 0:d[0])||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase());const a={};for(const h in r)h[0]!=="_"&&Object.prototype.hasOwnProperty.call(r,h)&&(a[h]=r[h]);return r["@id"]=Js(e.meta[s],`#/schema/${o}/${r["@id"]||mn(JSON.stringify(a))}`),r}function Y(r,e,t,i={}){if(!r)return r;const s=Wt(r).map(n=>{var u;const o=Object.keys(n).length;if(o===1&&n["@id"]||o===2&&n["@id"]&&n["@type"])return Xo({"@id":((u=e.find(n["@id"]))==null?void 0:u["@id"])||n["@id"]},e);let a=t;if(n._resolver&&(a=n._resolver,typeof a=="string"&&(a=Xm(a)),delete n._resolver),!a)return n;let l=Ln(n,e,a);return i.afterResolve&&i.afterResolve(l),(i.generateId||i.root)&&(l=Xo(l,e,a,!1)),i.root?(a.resolveRootNode&&a.resolveRootNode(l,e),e.push(l),be(l["@id"])):l});return!i.array&&s.length===1?s[0]:s}function Ym(r,e){return r.reduce((t,i,s,n)=>{const o=e(i,s,n);return t[o]||(t[o]=[]),t[o].push(i),t},{})}function Pb(r,e){return Object.values(Ym(r,e)).map(t=>t[t.length-1])}const ih=am((r,e,t)=>{if(Array.isArray(r[e])){if(Array.isArray(t)){const i={};for(const s of[...r[e],...t])i[Sa(s)]=s;return r[e]=Object.values(i),e==="itemListElement"&&(r[e]=[...Pb(r[e],s=>s.position)]),!0}return r[e]=ih(r[e],Array.isArray(t)?t:[t]),!0}});function qm(r){const e={};for(const t of r.keys()){const i=r[t],s=Rs(i["@id"]||Sa(i));e[s]&&i._dedupeStrategy!=="replace"?e[s]=ih(r[t],e[s]):e[s]=r[t]}return Object.values(e)}function Km(r){const e=r.keys(),t={};for(const i of e){const s=r[i],n=Rs(s["@id"]||Sa(s)),o=Ym(Object.keys(s),u=>{const c=s[u];return u[0]==="_"?"ignored":Array.isArray(c)||typeof c=="object"?"relations":"primitives"}),a=[...(o.primitives||[]).sort(),...(o.relations||[]).sort()];let l={};for(const u of a)l[u]=s[u];t[n]&&(l=ih(l,t[n])),t[n]=l}return Object.values(t)}const Rb=["translationOfWork","workTranslation"];function Zm(){const r={find(e){let t=s=>s;e[0]==="#"?t=Rs:e[0]==="/"&&(t=s=>s.replace(/(https?:)?\/\//,"").split("/")[0]);const i=t(e);return r.nodes.filter(s=>!!s["@id"]).find(s=>t(s["@id"])===i)},push(e){Wt(e).forEach(t=>{const i=t;r.nodes.push(i)})},resolveGraph(e){return r.meta=rh({...e}),r.nodes.forEach((t,i)=>{const s=t._resolver;t=Ln(t,r,s),t=Xo(t,r,s,!0),r.nodes[i]=t}),r.nodes=qm(r.nodes),r.nodes.forEach(t=>{var i;t.image&&typeof t.image=="string"&&(t.image=Y(t.image,r,ii,{root:!0})),Rb.forEach(s=>{t[s]=Y(t[s],r)}),(i=t._resolver)!=null&&i.resolveRootNode&&t._resolver.resolveRootNode(t,r),delete t._resolver}),Km(r.nodes)},nodes:[],meta:{}};return r}function Jm(r){return Qm({},()=>({}),r)}function Qm(r,e,t){r=rh({...r});let i,s={};return n=>({key:"schema-org",hooks:{"entries:resolve":()=>{i=Zm()},"tag:normalise":async({tag:o})=>{if(o.tag==="script"&&o.props.type==="application/ld+json"&&o.props.nodes){const{loadResolver:a}=await Promise.resolve().then(function(){return Cb}),l=await o.props.nodes;for(const u of Array.isArray(l)?l:[l]){if(typeof u!="object"||Object.keys(u).length===0)continue;const c={...u,_dedupeStrategy:o.tagDuplicateStrategy,_resolver:a(await u._resolver)};i.push(c)}o.tagPosition=o.tagPosition||r.tagPosition==="head"?"head":"bodyClose"}if(o.tag==="htmlAttrs"&&o.props.lang)s.inLanguage=o.props.lang;else if(o.tag==="title")s.title=o.textContent;else if(o.tag==="meta"&&o.props.name==="description")s.description=o.props.content;else if(o.tag==="link"&&o.props.rel==="canonical"){if(s.url=o.props.href,s.url&&!s.host)try{s.host=new URL(s.url).origin}catch{}}else o.tag==="meta"&&o.props.property==="og:image"?s.image=o.props.content:o.tag==="templateParams"&&o.props.schemaOrg&&(s={...s,...o.props.schemaOrg},delete o.props.schemaOrg)},"tags:resolve":async o=>{for(const a in o.tags){const l=o.tags[a];if(l.tag==="script"&&l.props.type==="application/ld+json"&&l.props.nodes){delete l.props.nodes;const u=i.resolveGraph({...await(e==null?void 0:e())||{},...r,...s});if(!u.length){l.props={};return}const c=(t==null?void 0:t.minify)||!0;l.innerHTML=JSON.stringify({"@context":"https://schema.org","@graph":u},(d,h)=>typeof h!="object"?Gs(h,n._templateParams,n._separator):h,c?0:2);return}}},"tags:afterResolve":o=>{let a;for(const l in o.tags){const u=o.tags[l];if(u.props.type==="application/ld+json"&&u.props.nodes||u.key==="schema-org-graph"){if(delete u.props.nodes,typeof a>"u"){a=l;continue}o.tags[a].props=R_(o.tags[a].props,u.props),delete o.tags[a].props.nodes,o.tags[l]=!1}}o.tags=o.tags.filter(Boolean)}}})}async function Ib(r,e={}){const t=e.document||r.resolvedOptions.document;if(!t||!r.dirty)return;const i={shouldRender:!0,tags:[]};if(await r.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return r._domUpdatePromise||(r._domUpdatePromise=new Promise(async s=>{var d;const n=(await r.resolveTags()).map(h=>({tag:h,id:Ro.has(h.tag)?mu(h):h.tag,shouldRender:!0}));let o=r._dom;if(!o){o={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};const h=new Set;for(const f of["body","head"]){const p=(d=t[f])==null?void 0:d.children;for(const m of p){const g=m.tagName.toLowerCase();if(!Ro.has(g))continue;const v={tag:g,props:await ym(m.getAttributeNames().reduce((w,S)=>({...w,[S]:m.getAttribute(S)}),{})),innerHTML:m.innerHTML},_=_m(v);let y=_,b=1;for(;y&&h.has(y);)y=`${_}:${b++}`;y&&(v._d=y,h.add(y)),o.elMap[m.getAttribute("data-hid")||mu(v)]=m}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function a(h,f,p){const m=`${h}:${f}`;o.sideEffects[m]=p,delete o.pendingSideEffects[m]}function l({id:h,$el:f,tag:p}){const m=p.tag.endsWith("Attrs");if(o.elMap[h]=f,m||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),a(h,"el",()=>{var g;(g=o.elMap[h])==null||g.remove(),delete o.elMap[h]})),p._eventHandlers)for(const g in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,g)&&f.getAttribute(`data-${g}`)!==""&&((p.tag==="bodyAttrs"?t.defaultView:f).addEventListener(g.substring(2),p._eventHandlers[g].bind(f)),f.setAttribute(`data-${g}`,""));for(const g in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,g))continue;const v=p.props[g],_=`attr:${g}`;if(g==="class"){if(!v)continue;for(const y of v.split(" "))m&&a(h,`${_}:${y}`,()=>f.classList.remove(y)),!f.classList.contains(y)&&f.classList.add(y)}else if(g==="style"){if(!v)continue;for(const y of v.split(";")){const b=y.indexOf(":"),w=y.substring(0,b).trim(),S=y.substring(b+1).trim();a(h,`${_}:${w}`,()=>{f.style.removeProperty(w)}),f.style.setProperty(w,S)}}else f.getAttribute(g)!==v&&f.setAttribute(g,v===!0?"":String(v)),m&&a(h,_,()=>f.removeAttribute(g))}}const u=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of n){const{tag:f,shouldRender:p,id:m}=h;if(p){if(f.tag==="title"){t.title=f.textContent;continue}h.$el=h.$el||o.elMap[m],h.$el?l(h):Ro.has(f.tag)&&u.push(h)}}for(const h of u){const f=h.tag.tagPosition||"head";h.$el=t.createElement(h.tag.tag),l(h),c[f]=c[f]||t.createDocumentFragment(),c[f].appendChild(h.$el)}for(const h of n)await r.hooks.callHook("dom:renderTag",h,t,a);c.head&&t.head.appendChild(c.head),c.bodyOpen&&t.body.insertBefore(c.bodyOpen,t.body.firstChild),c.bodyClose&&t.body.appendChild(c.bodyClose);for(const h in o.pendingSideEffects)o.pendingSideEffects[h]();r._dom=o,await r.hooks.callHook("dom:rendered",{renders:n}),s()}).finally(()=>{r._domUpdatePromise=void 0,r.dirty=!1})),r._domUpdatePromise}function Mb(r,e={}){const t=e.delayFn||(i=>setTimeout(i,10));return r._domDebouncedUpdatePromise=r._domDebouncedUpdatePromise||new Promise(i=>t(()=>Ib(r,e).then(()=>{delete r._domDebouncedUpdatePromise,i()})))}function kb(r){return e=>{var i,s;const t=((s=(i=e.resolvedOptions.document)==null?void 0:i.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return t&&e.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":n=>{Mb(n,r)}}}}}const Db=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Ob={hooks:{"tag:normalise":({tag:r})=>{r.props.hid&&(r.key=r.props.hid,delete r.props.hid),r.props.vmid&&(r.key=r.props.vmid,delete r.props.vmid),r.props.key&&(r.key=r.props.key,delete r.props.key);const e=_m(r);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete r.key;const t=e||(r.key?`${r.tag}:${r.key}`:!1);t&&(r._d=t)},"tags:resolve":r=>{const e=Object.create(null);for(const i of r.tags){const s=(i.key?`${i.tag}:${i.key}`:i._d)||mu(i),n=e[s];if(n){let a=i==null?void 0:i.tagDuplicateStrategy;if(!a&&Db.has(i.tag)&&(a="merge"),a==="merge"){const l=n.props;l.style&&i.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),i.props.style=`${l.style} ${i.props.style}`),l.class&&i.props.class?i.props.class=`${l.class} ${i.props.class}`:l.class&&(i.props.class=l.class),e[s].props={...l,...i.props};continue}else if(i._e===n._e){n._duped=n._duped||[],i._d=`${n._d}:${n._duped.length+1}`,n._duped.push(i);continue}else if(Vo(i)>Vo(n))continue}if(!(i.innerHTML||i.textContent||Object.keys(i.props).length!==0)&&Ro.has(i.tag)){delete e[s];continue}e[s]=i}const t=[];for(const i in e){const s=e[i],n=s._duped;t.push(s),n&&(delete s._duped,t.push(...n))}r.tags=t,r.tags=r.tags.filter(i=>!(i.tag==="meta"&&(i.props.name||i.props.property)&&!i.props.content))}}},Lb=new Set(["script","link","bodyAttrs"]),Bb=r=>({hooks:{"tags:resolve":e=>{for(const t of e.tags){if(!Lb.has(t.tag))continue;const i=t.props;for(const s in i){if(s[0]!=="o"||s[1]!=="n"||!Object.prototype.hasOwnProperty.call(i,s))continue;const n=i[s];typeof n=="function"&&(r.ssr&&qh.has(s)?i[s]=`this.dataset.${s}fired = true`:delete i[s],t._eventHandlers=t._eventHandlers||{},t._eventHandlers[s]=n)}r.ssr&&t._eventHandlers&&(t.props.src||t.props.href)&&(t.key=t.key||mn(t.props.src||t.props.href))}},"dom:renderTag":({$el:e,tag:t})=>{var s,n;const i=e==null?void 0:e.dataset;if(i)for(const o in i){if(!o.endsWith("fired"))continue;const a=o.slice(0,-5);qh.has(a)&&((n=(s=t._eventHandlers)==null?void 0:s[a])==null||n.call(e,new Event(a.substring(2))))}}}}),Fb=new Set(["link","style","script","noscript"]),Nb={hooks:{"tag:normalise":({tag:r})=>{r.key&&Fb.has(r.tag)&&(r.props["data-hid"]=r._h=mn(r.key))}}},$b={mode:"server",hooks:{"tags:beforeResolve":r=>{const e={};let t=!1;for(const i of r.tags)i._m!=="server"||i.tag!=="titleTemplate"&&i.tag!=="templateParams"&&i.tag!=="title"||(e[i.tag]=i.tag==="title"||i.tag==="titleTemplate"?i.textContent:i.props,t=!0);t&&r.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},Ub={hooks:{"tags:resolve":r=>{var e;for(const t of r.tags)if(typeof t.tagPriority=="string")for(const{prefix:i,offset:s}of q_){if(!t.tagPriority.startsWith(i))continue;const n=t.tagPriority.substring(i.length),o=(e=r.tags.find(a=>a._d===n))==null?void 0:e._p;if(o!==void 0){t._p=o+s;break}}r.tags.sort((t,i)=>{const s=Vo(t),n=Vo(i);return s<n?-1:s>n?1:t._p-i._p})}}},Hb={meta:"content",link:"href",htmlAttrs:"lang"},Gb=["innerHTML","textContent"],zb=r=>({hooks:{"tags:resolve":e=>{var o;const{tags:t}=e;let i;for(let a=0;a<t.length;a+=1)t[a].tag==="templateParams"&&(i=e.tags.splice(a,1)[0].props,a-=1);const s=i||{},n=s.separator||"|";delete s.separator,s.pageTitle=Gs(s.pageTitle||((o=t.find(a=>a.tag==="title"))==null?void 0:o.textContent)||"",s,n);for(const a of t){if(a.processTemplateParams===!1)continue;const l=Hb[a.tag];if(l&&typeof a.props[l]=="string")a.props[l]=Gs(a.props[l],s,n);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const u of Gb)typeof a[u]=="string"&&(a[u]=Gs(a[u],s,n,a.tag==="script"&&a.props.type.endsWith("json")))}r._templateParams=s,r._separator=n},"tags:afterResolve":({tags:e})=>{let t;for(let i=0;i<e.length;i+=1){const s=e[i];s.tag==="title"&&s.processTemplateParams!==!1&&(t=s)}t!=null&&t.textContent&&(t.textContent=Gs(t.textContent,r._templateParams,r._separator))}}}),jb={hooks:{"tags:resolve":r=>{const{tags:e}=r;let t,i;for(let s=0;s<e.length;s+=1){const n=e[s];n.tag==="title"?t=n:n.tag==="titleTemplate"&&(i=n)}if(i&&t){const s=Jh(i.textContent,t.textContent);s!==null?t.textContent=s||t.textContent:r.tags.splice(r.tags.indexOf(t),1)}else if(i){const s=Jh(i.textContent);s!==null&&(i.textContent=s,i.tag="title",i=void 0)}i&&r.tags.splice(r.tags.indexOf(i),1)}}},Vb={hooks:{"tags:afterResolve":r=>{for(const e of r.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let eg;function Wb(r={}){const e=Xb(r);return e.use(kb()),eg=e}function rd(r,e){return!r||r==="server"&&e||r==="client"&&!e}function Xb(r={}){const e=B_();e.addHooks(r.hooks||{}),r.document=r.document||(G_?document:void 0);const t=!r.document,i=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let s=0,n=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:r,hooks:e,headEntries(){return n},use(l){const u=typeof l=="function"?l(a):l;(!u.key||!o.some(c=>c.key===u.key))&&(o.push(u),rd(u.mode,t)&&e.addHooks(u.hooks||{}))},push(l,u){u==null||delete u.head;const c={_i:s++,input:l,...u};return rd(c.mode,t)&&(n.push(c),i()),{dispose(){n=n.filter(d=>d._i!==c._i),i()},patch(d){for(const h of n)h._i===c._i&&(h.input=c.input=d);i()}}},async resolveTags(){const l={tags:[],entries:[...n]};await e.callHook("entries:resolve",l);for(const u of l.entries){const c=u.resolvedInput||u.input;if(u.resolvedInput=await(u.transform?u.transform(c):c),u.resolvedInput)for(const d of await Y_(u)){const h={tag:d,entry:u,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",h),l.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:t};return[Ob,$b,Bb,Nb,Ub,zb,jb,Vb,...(r==null?void 0:r.plugins)||[]].forEach(l=>a.use(l)),a.hooks.callHook("init",a),a}function sh(){return eg}function Yb(r,e={}){const t=e.head||sh();return t==null?void 0:t.push(r,e)}function Ra(r,e){return r||(r={}),r._resolver=e,r}function qb(r){return Ra(r,"article")}function tg(r){return Ra(r,"person")}function rg(r){return Ra(r,"webPage")}function ig(r){return Ra(r,"webSite")}function sg(r,e){const t=sh();if(t&&!(Array.isArray(r)&&r.length===0||!r))return t.use(Jm()),Yb({script:[{type:"application/ld+json",key:"schema-org-graph",nodes:r}]},e)}const Kb=Object.freeze(Object.defineProperty({__proto__:null,HowToId:Bm,PrimaryArticleId:Dn,PrimaryBookId:Pm,PrimaryBreadcrumbId:Xc,PrimaryEventId:km,PrimaryWebPageId:Rt,PrimaryWebSiteId:ws,ProductId:Hm,RecipeId:jm,SchemaOrgUnheadPlugin:Qm,UnheadSchemaOrg:Jm,addressResolver:kn,aggregateOfferResolver:Wc,aggregateRatingResolver:Mn,articleResolver:Cm,bookEditionResolver:Zc,bookResolver:Rm,breadcrumbResolver:Yc,commentResolver:Im,courseResolver:Mm,createSchemaOrgGraph:Zm,dedupeNodes:qm,defineArticle:qb,definePerson:tg,defineSchemaOrgResolver:yb,defineWebPage:rg,defineWebSite:ig,eventResolver:Dm,foodEstablishmentResolver:Om,howToResolver:Fm,howToStepDirectionResolver:Lm,howToStepResolver:Pa,imageResolver:ii,itemListResolver:Nm,jobPostingResolver:$m,listItemResolver:Ea,localBusinessResolver:Wo,movieResolver:Um,normaliseNodes:Km,offerResolver:Is,openingHoursResolver:Qc,organizationResolver:si,personResolver:Dr,placeResolver:Ca,productResolver:Gm,questionResolver:zm,ratingResolver:eh,readActionResolver:Kc,recipeResolver:Vm,resolveMeta:rh,resolveNode:Ln,resolveNodeId:Xo,resolveRelation:Y,reviewResolver:On,searchActionResolver:qc,softwareAppResolver:Wm,useSchemaOrg:sg,videoResolver:th,virtualLocationResolver:Jc,webPageResolver:Em,webSiteResolver:Sm},Symbol.toStringTag,{value:"Module"})),Zb=e_[0]==="3";function Jb(r){return typeof r=="function"?r():I(r)}function Yo(r){if(r instanceof Promise||r instanceof Date||r instanceof RegExp)return r;const e=Jb(r);if(!r||!e)return e;if(Array.isArray(e))return e.map(t=>Yo(t));if(typeof e=="object"){const t={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(i==="titleTemplate"||i[0]==="o"&&i[1]==="n"){t[i]=I(e[i]);continue}t[i]=Yo(e[i])}return t}return e}const Qb={hooks:{"entries:resolve":r=>{for(const e of r.entries)e.resolvedInput=Yo(e.input)}}},ng="usehead";function ex(r){return{install(t){Zb&&(t.config.globalProperties.$unhead=r,t.config.globalProperties.$head=r,t.provide(ng,r))}}.install}function tx(r={}){r.domDelayFn=r.domDelayFn||(t=>ri(()=>setTimeout(()=>t(),0)));const e=Wb(r);return e.use(Qb),e.install=ex(e),e}const id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sd="__unhead_injection_handler__";function rx(){return sd in id?id[sd]():tm(ng)||sh()}function nh(r,e={}){const t=e.head||rx();if(t)return t.ssr?t.push(r,e):ix(t,r,e)}function ix(r,e,t={}){const i=V(!1),s=V({});rm(()=>{s.value=i.value?{}:Yo(e)});const n=r.push(s.value,t);return xe(s,a=>{n.patch(a)}),dn()&&(t_(()=>{n.dispose()}),r_(()=>{i.value=!0}),i_(()=>{i.value=!1})),n}function sx(r,e){const{title:t,titleTemplate:i,...s}=r;return nh({title:t,titleTemplate:i,_flatMeta:s},{...e,transform(n){const o=Hc({...n._flatMeta});return delete n._flatMeta,{...n,meta:o}}})}pr.extend(M_);pr.extend(k_);pr.extend(D_);function SL(r,e={}){return typeof r=="string"&&(r=new Date(r)),pr.tz(pr.utc(r),e.timezone).format(e.template||"YYYY-MM-DD")}function nd(r,e=!0){return r.sort((t,i)=>{const s=+new Date(t.date||""),n=+new Date(i.date||"");return e?n-s:s-n})}function nx(){const r=nt();s_(()=>{r.value.timezone&&pr.tz.setDefault(r.value.timezone)})}const og='{"siteConfig":{"mode":"auto","url":"https://www.mot.cloudns.biz/","lang":"zh-CN","languages":["zh-CN","en"],"timezone":"Asia/Shanghai","title":"咲夜の个人博客","description":"合抱之木，生于毫末；九层之台，起于累土；千里之行，始于足下","subtitle":"如果生活还没能改变，那你已经失败了","author":{"avatar":"/avatar/avatar.webp","email":"d342jxc@gmail.com","link":"https://www.mot.cloudns.biz","name":"咲夜","status":{"emoji":"🩷","message":"时光匆匆，珍惜当下"},"intro":"热爱二次元，喜欢分享生活点滴与技术心得。"},"favicon":"/avatar/avatar.webp","feed":{"name":"rss","favicon":"i-ri-rss-line"},"social":[{"name":"RSS","link":"/rss.xml","icon":"i-ri-rss-line","color":"orange"},{"name":"GitHub","link":"https://github.com/Kwisma","icon":"i-ri-github-line","color":"black"},{"name":"telegram","link":"https//t.me/KDYgMJqHBwsi755auLZD6nN477C7hQXQ","icon":"i-ri-telegram-line","color":"black"}],"lastUpdated":true,"license":{"enabled":true,"language":"zh-CN","type":"by-nc-sa"},"sponsor":{"enable":false,"description":"如果你也想支持我，想让我有动力写更多的文章，请考虑赞助我！","methods":[{"name":"支付宝","url":"https://cdn.yunyoujun.cn/img/donate/alipay-qrcode.jpg","color":"#00A3EE","icon":"i-ri-alipay-line"},{"name":"QQ 支付","url":"https://cdn.yunyoujun.cn/img/donate/qqpay-qrcode.png","color":"#12B7F5","icon":"i-ri-qq-line"},{"name":"微信支付","url":"https://cdn.yunyoujun.cn/img/donate/wechatpay-qrcode.jpg","color":"#2DC100","icon":"i-ri-wechat-pay-line"}],"title":"我很可爱，请给我钱！"},"search":{"enable":true,"type":"fuse"},"fuse":{"dataPath":"fuse-list.json","options":{"keys":["title","tags","categories","excerpt","content"],"includeScore":true,"includeMatches":true,"minMatchCharLength":1}},"comment":{"enable":true},"frontmatter":{"time_warning":15552000000,"nav":true,"type":"bilibili","excerpt_type":"md","aplayer":true},"cdn":{"prefix":"https://unpkg.com/"},"mediumZoom":{"enable":true,"selector":"img","options":{"margin":50,"background":"#000","scrollOffset":40,"container":"#zoom-container","template":"#zoom-container"}},"vanillaLazyload":{"enable":false,"options":{"elements_selector":"img","threshold":300,"thresholds":"","data_src":"src","data_srcset":"srcset","data_sizes":"sizes","data_bg":"bg","data_bg_hidpi":"bg-hidpi","data_bg_multi":"bg-multi","data_bg_multi_hidpi":"bg-multi-hidpi","data_bg_set":"bg-sets","data_poster":"poster","class_applied":"applied","class_loading":"loading","class_loaded":"loaded","class_error":"error","class_entered":"entered","class_exited":"exited","unobserve_completed":true,"unobserve_entered":false,"cancel_on_exit":false,"use_native":false,"restore_on_error":true}},"floatingVue":{"disabled":false,"distance":5,"skidding":0,"container":"body","instantMove":false,"disposeTimeout":5000,"popperTriggers":[],"strategy":"absolute","preventOverflow":true,"flip":true,"shift":true,"overflowPadding":0,"arrowPadding":0,"arrowOverflow":true,"autoHideOnMousedown":false,"themes":{"tooltip":{"placement":"top","triggers":["hover","focus","touch"],"delay":{"show":200,"hide":0},"handleResize":false,"html":false,"loadingContent":"..."},"dropdown":{"placement":"bottom","triggers":["click"],"delay":0,"handleResize":true,"autoHide":true},"menu":{"$extend":"dropdown","triggers":["hover","focus"],"popperTriggers":["hover","focus"],"delay":{"show":0,"hide":400}}}},"statistics":{"enable":true,"readTime":{"speed":{"cn":300,"en":200}}},"pageSize":10,"encrypt":{"enable":true,"algorithm":"aes-256-cbc","salt":{"0":1,"1":2,"2":3,"3":4,"4":5,"5":6,"6":7,"7":8,"8":9,"9":10,"10":11,"11":12,"12":13,"13":14,"14":15,"15":16},"iv":{"0":1,"1":2,"2":3,"3":4,"4":5,"5":6,"6":7,"7":8,"8":9,"9":10,"10":11,"11":12,"12":13,"13":14,"14":15,"15":16}},"redirects":{"useVueRouter":false,"rules":[]},"codeHeightLimit":0},"theme":"yun","themeConfig":{"pkg":{"name":"valaxy-theme-yun","type":"module","version":"0.22.17","author":{"email":"me@yunyoujun.cn","name":"YunYouJun","url":"https://www.yunyoujun.cn"},"homepage":"https://yun.valaxy.site","repository":{"type":"git","url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-theme-yun"},"exports":{"./client":"./client/index.ts","./theme":"./types/index.d.ts","./*":"./*",".":"./index.ts"},"main":"index.ts","module":"index.ts","dependencies":{"@ctrl/tinycolor":"^4.1.0","@explosions/fireworks":"^0.1.0","@iconify-json/ant-design":"^1.2.5","@iconify-json/simple-icons":"^1.2.29","@vueuse/motion":"^3.0.3","animejs":"^3.2.2","gsap":"^3.12.7","primevue":"^4.3.2"},"devDependencies":{"@types/animejs":"^3.1.13","valaxy":"0.22.17","valaxy-addon-waline":"0.2.0"},"scripts":{"release":"bumpp && pnpm publish"}},"type":"nimbo","valaxyDarkOptions":{"circleTransition":true},"outlineTitle":"个人博客","colors":{"primary":"#0078E7"},"banner":{"enable":true,"title":["咲","夜","Sakuya","の","的","小","站"],"cloud":{"enable":true},"siteNameClass":"text-white"},"bg_image":{"enable":true,"url":"/back/back.webp","dark":"/back/back-y.webp","opacity":0.9},"say":{"enable":true,"api":"https://el-bot-api.elpsy.cn/api/words/young","hitokoto":{"enable":true,"api":"https://v1.hitokoto.cn"}},"fireworks":{"enable":true,"colors":["#ff0000","#00ff00","#0000ff"]},"notice":{"enable":true,"hideInPages":true,"content":"本站内容仅供学习交流，不得用于商业用途，如有侵权请联系我删除。"},"pages":[{"name":"我的小伙伴们","url":"/links/","icon":"i-ri-account-circle-fill","color":"dodgerblue"}],"sidebar":{},"footer":{"cloud":{"enable":true},"since":2025,"icon":{"enable":true,"name":"i-ri-leaf-line","animated":true,"color":"aqua","url":"/","title":"回到首页"},"powered":false,"beian":{"enable":true,"icp":"冀ICP备2222000777号"}},"types":{"link":{"color":"var(--va-c-primary)","icon":"i-ri-external-link-line"},"bilibili":{"color":"#FF8EB3","icon":"i-ri-bilibili-line"},"douban":{"color":"#007722","icon":"i-ri-douban-line"},"github":{"color":"var(--va-c-text)","icon":"i-ri-github-line"},"netease-cloud-music":{"color":"#C10D0C","icon":"i-ri-netease-cloud-music-line"},"notion":{"color":"var(--va-c-text)","icon":"i-simple-icons-notion"},"twitter":{"color":"black","icon":"i-ri-twitter-x-fill"},"wechat":{"color":"#1AAD19","icon":"i-ri-wechat-2-line"},"weibo":{"color":"#E6162D","icon":"i-ri-weibo-line"},"yuque":{"color":"#25b864","icon":"i-ant-design-yuque-outlined"},"zhihu":{"color":"#0084FF","icon":"i-ri-zhihu-line"},"default":{"color":"#ea4c89","icon":"i-ri-external-link-line"}},"menu":{"custom":{"title":"自定义菜单","icon":"i-ri-menu-2-line","url":"/custom/"}},"nav":[{"icon":"i-ri-home-line","link":"/","text":"首页","active":"text-red-500"},{"icon":"i-ri-group-line","link":"/links/","text":"伙伴","active":"text-red-400"}]},"build":{"ssgForPagination":true,"ignoreDeadLinks":true},"deploy":{"type":"gh-pages"},"runtimeConfig":{"addons":{"valaxy-addon-components":{"name":"valaxy-addon-components","enable":true,"options":{},"global":false,"root":"/home/runner/work/Sakuya/Sakuya/node_modules/valaxy-addon-components","props":{},"pkg":{"name":"valaxy-addon-components","version":"0.1.0","description":"Common Components for Valaxy","homepage":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-components","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-components"},"keywords":["valaxy","addon","components"],"main":"index.ts"}},"valaxy-addon-waline":{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://boly-orpin.vercel.app/"},"global":false,"root":"/home/runner/work/Sakuya/Sakuya/node_modules/valaxy-addon-waline","props":{},"pkg":{"name":"valaxy-addon-waline","version":"0.2.0","description":"Waline Composition API for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-waline"},"keywords":["valaxy","addon","waline"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"@waline/client":"^3.3.0"}},"configFile":"/home/runner/work/Sakuya/Sakuya/node_modules/valaxy-addon-waline/valaxy.config.ts"},"valaxy-addon-live2d":{"name":"valaxy-addon-live2d","enable":true,"global":true,"options":{"global":true,"live2DCollection":{"XiaoYun":{"message":"来自云游君的小云 ~","models":["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/小云.model3.json"]},"Tia":{"message":"来自 Potion Maker 的 Tia 酱 ~","models":"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json","textures":"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},"Pio":{"message":"来自 Potion Maker 的 Pio 酱 ~","models":"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json","textures":"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"}},"enableLive2D":"all"},"root":"/home/runner/work/Sakuya/Sakuya/node_modules/valaxy-addon-live2d","props":{},"pkg":{"name":"valaxy-addon-live2d","global":true,"version":"0.3.0","packageManager":"pnpm@9.5.0","description":"","repository":{"url":"git+https://github.com/valaxyjs/valaxy-addon-live2d.git"},"keywords":["valaxy","addon","valaxy-addon","live2d"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"cd dist && npm publish --access public","build":"tsx scripts/build.ts"},"dependencies":{"pixi-live2d-display":"^0.5.0-beta","pixi.js":"^7.4.2","stats.js":"^1.0.0","url":"^0.11.4"},"devDependencies":{"@types/lodash-es":"^4.17.12","@types/stats.js":"^0.17.3","consola":"^3.2.3","tsx":"^4.16.2","vue-tsc":"^2.0.28"}},"configFile":"/home/runner/work/Sakuya/Sakuya/node_modules/valaxy-addon-live2d/valaxy.config.ts"}},"redirects":{"useVueRouter":false,"redirectRoutes":[]}},"modules":{"rss":{"enable":true,"fullText":true}},"features":{"katex":true},"vite":{"build":{"emptyOutDir":true,"rollupOptions":{"external":[],"preserveEntrySignatures":"allow-extension","output":{"assetFileNames":"assets/[name].[hash].[ext]","entryFileNames":"assets/[name].[hash].js"}}},"optimizeDeps":{"include":["@waline/client/component","@pixi/utils","@pixi/graphics","@pixi/settings","@pixi/app","@pixi/core","@pixi/extract","@pixi/ticker"]},"plugins":[{"name":"valaxy-theme-yun","enforce":"pre"}],"ssgOptions":{"script":"async","format":"esm"}},"devtools":true,"unocss":{"safelist":["i-ri-home-line","i-ri-external-link-line","i-ri-leaf-line","i-ri-menu-2-line","i-ri-account-circle-fill"]},"markdown":{"theme":{"light":"github-light","dark":"github-dark"},"blocks":{"tip":{"icon":"i-carbon-thumbs-up","text":"ヒント","langs":{"zh-CN":"提示"}},"warning":{"icon":"i-carbon-warning-alt","text":"注意"},"danger":{"icon":"i-carbon-warning","text":"警告"},"info":{"text":"信息"}},"codeTransformers":[{"name":"default-name"}]},"components":{"resolvers":[{"type":"component"}]},"ignoreDeadLinks":true,"vue":{"isCustomElement":[]},"addons":[{"name":"valaxy-addon-components","enable":true},{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://boly-orpin.vercel.app/"}},{"name":"valaxy-addon-live2d","enable":true,"global":true,"options":{"global":true,"live2DCollection":{"XiaoYun":{"message":"来自云游君的小云 ~","models":["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/小云.model3.json"]},"Tia":{"message":"来自 Potion Maker 的 Tia 酱 ~","models":"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json","textures":"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},"Pio":{"message":"来自 Potion Maker 的 Pio 酱 ~","models":"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json","textures":"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"}},"enableLive2D":"all"}}]}',ag='{"userRoot":"/home/runner/work/Sakuya/Sakuya"}';function Ia(r){return JSON.parse(r)}const lg=Symbol("valaxy:config"),ug=In(Ia(og)),ox=Symbol("ValaxyData"),ax=In(Ia(ag));ug.value=Ia(og);ax.value=Ia(ag);function cg(){return U(()=>ug.value)}function Bn(){const r=tm(lg);if(!r)throw new Error("[Valaxy] site config not properly injected in app");return r}function nt(){const r=Bn();return U(()=>r.value.siteConfig)}function oh(){const r=Bn();return U(()=>r.value.themeConfig)}function lx(){const r=Bn();return U(()=>r.value.runtimeConfig)}function ux(){const r=nt(),e=Gi(),{locale:t}=st(),i=U(()=>e.value[`title_${t.value}`]||e.value.title),s=U(()=>e.value.url||r.value.url),n=U(()=>e.value.excerpt||e.value.description||r.value.description);sx({description:n,ogDescription:n,ogLocale:U(()=>t.value||e.value.lang||r.value.lang||"en"),ogLocaleAlternate:U(()=>r.value.languages.filter(o=>o!==t.value)),ogSiteName:U(()=>r.value.title),ogTitle:U(()=>e.value.title||r.value.title),ogImage:U(()=>e.value.ogImage||e.value.cover||r.value.favicon),ogType:"website",ogUrl:s}),sg([tg({name:r.value.author.name,url:s.value,image:r.value.author.avatar,sameAs:r.value.social.map(o=>o.link)}),ig({name:i.value,datePublished:U(()=>e.value.date),dateModified:U(()=>e.value.updated)}),rg()]),nx(),fx()}const cx="valaxy",hx="0.22.17",dx={url:"https://github.com/YunYouJun/valaxy"},zs={name:cx,version:hx,repository:dx};function fx(){var s;const{locale:r}=st(),e=Gi(),t=nt(),i=U(()=>e.value[`title_${r.value}`]||e.value.title);nh({title:i,titleTemplate:n=>e.value.titleTemplate||(n?`${n} - ${t.value.title}`:t.value.title),link:[{rel:"icon",href:t.value.favicon,type:(s=t.value.favicon)!=null&&s.endsWith("svg")?"image/svg+xml":"image/png"}],meta:[U(()=>({name:"description",content:e.value.description||t.value.description})),{name:"generator",content:`Valaxy ${zs.version}`}],templateParams:{schemaOrg:{host:t.value.url}},script:[{id:"check-mac-os",innerHTML:"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))",async:!0}]})}const Or=Aa("app",()=>{const r=nt(),e=oh(),{isDark:t,toggleDark:i,toggleDarkWithTransition:s,themeColor:n}=uh(e.value.valaxyDarkOptions),o=zx(),a=V(!0),l=U(()=>r.value.languages.length>1);return{isMobile:o,isDark:t,showToggleLocale:l,themeColor:n,toggleDark:i,toggleDarkWithTransition:s,showLoading:a}}),hg=Aa("routerStore",()=>({router:Nc()})),Ma=Aa("site",()=>{const e=hg().router,t=V(1),i=U(()=>{const s=sw().value;return t.value&&s,s});return e&&e.isReady().then(()=>{}),{postList:i}});function EL(r){return r.children}function dg(r,e=[]){return U(()=>{const t=I(r);e.length||(e=Ma().postList);const i={name:"All",total:e.length,children:new Map([["Uncategorized",{name:"Uncategorized",total:0,children:new Map}]])},s=i.children.get("Uncategorized");if(e.forEach(n=>{if(n.categories)if(Array.isArray(n.categories)){const o=n.categories.length;let a=i,l=a;n.categories.forEach((u,c)=>{a.total+=1,a=a.children.get(u),a||(a={name:u,total:0,children:new Map},l.children.set(u,a)),c===o-1&&(a.children.set(n.path,n),a.total+=1),l=a})}else{const o=n.categories,a=i.children.get(o);a?(a.total+=1,a.children.set(n.path,n)):i.children.set(o,{name:o,total:1,children:new Map([[n.path,n]])})}else s.total+=1,s.children.set(n.path,n)}),s.total===0&&i.children.delete("Uncategorized"),t){let n=i;const o=t.split("/");for(const a of o){const l=n.children.get(a);if(l&&l.children)n=l;else return console.warn(`Do not have category: ${r}`),i}return n}else return i})}function Ms(r){return n_()?(o_(r),!0):!1}function he(r){return typeof r=="function"?r():I(r)}const yr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fg=r=>r!=null,px=Object.prototype.toString,mx=r=>px.call(r)==="[object Object]",ut=()=>{},bu=gx();function gx(){var r,e;return yr&&((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function ah(r,e){function t(...i){return new Promise((s,n)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(n)})}return t}const pg=r=>r();function yx(r,e={}){let t,i,s=ut;const n=a=>{clearTimeout(a),s(),s=ut};return a=>{const l=he(r),u=he(e.maxWait);return t&&n(t),l<=0||u!==void 0&&u<=0?(i&&(n(i),i=null),Promise.resolve(a())):new Promise((c,d)=>{s=e.rejectOnCancel?d:c,u&&!i&&(i=setTimeout(()=>{t&&n(t),i=null,c(a())},u)),t=setTimeout(()=>{i&&n(i),i=null,c(a())},l)})}}function vx(...r){let e=0,t,i=!0,s=ut,n,o,a,l,u;!im(r[0])&&typeof r[0]=="object"?{delay:o,trailing:a=!0,leading:l=!0,rejectOnCancel:u=!1}=r[0]:[o,a=!0,l=!0,u=!1]=r;const c=()=>{t&&(clearTimeout(t),t=void 0,s(),s=ut)};return h=>{const f=he(o),p=Date.now()-e,m=()=>n=h();return c(),f<=0?(e=Date.now(),m()):(p>f&&(l||!i)?(e=Date.now(),m()):a&&(n=new Promise((g,v)=>{s=u?v:g,t=setTimeout(()=>{e=Date.now(),i=!0,g(m()),c()},Math.max(0,f-p))})),!l&&!t&&(t=setTimeout(()=>i=!0,f)),i=!1,n)}}function _x(r=pg){const e=V(!0);function t(){e.value=!1}function i(){e.value=!0}const s=(...n)=>{e.value&&r(...n)};return{isActive:Bc(e),pause:t,resume:i,eventFilter:s}}function mg(r){return dn()}function gg(...r){if(r.length!==1)return a_(...r);const e=r[0];return typeof e=="function"?Bc(l_(()=>({get:e,set:ut}))):V(e)}function bx(r,e=200,t={}){return ah(yx(e,t),r)}function xx(r,e=200,t=!1,i=!0,s=!1){return ah(vx(e,t,i,s),r)}function wx(r,e,t={}){const{eventFilter:i=pg,...s}=t;return xe(r,ah(i,e),s)}function Tx(r,e,t={}){const{eventFilter:i,...s}=t,{eventFilter:n,pause:o,resume:a,isActive:l}=_x(i);return{stop:wx(r,e,{...s,eventFilter:n}),pause:o,resume:a,isActive:l}}function Fn(r,e=!0,t){mg()?Yt(r,t):e?r():ri(r)}function Ax(r,e){mg()&&Fc(r,e)}function Io(r=!1,e={}){const{truthyValue:t=!0,falsyValue:i=!1}=e,s=im(r),n=V(r);function o(a){if(arguments.length)return n.value=a,n.value;{const l=he(t);return n.value=n.value===l?he(i):l,n.value}}return s?o:[n,o]}const Pt=yr?window:void 0,Sx=yr?window.document:void 0;function tt(r){var e;const t=he(r);return(e=t==null?void 0:t.$el)!=null?e:t}function Ct(...r){let e,t,i,s;if(typeof r[0]=="string"||Array.isArray(r[0])?([t,i,s]=r,e=Pt):[e,t,i,s]=r,!e)return ut;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const n=[],o=()=>{n.forEach(c=>c()),n.length=0},a=(c,d,h,f)=>(c.addEventListener(d,h,f),()=>c.removeEventListener(d,h,f)),l=xe(()=>[tt(e),he(s)],([c,d])=>{if(o(),!c)return;const h=mx(d)?{...d}:d;n.push(...t.flatMap(f=>i.map(p=>a(c,f,p,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Ms(u),u}let od=!1;function Ex(r,e,t={}){const{window:i=Pt,ignore:s=[],capture:n=!0,detectIframe:o=!1}=t;if(!i)return ut;bu&&!od&&(od=!0,Array.from(i.document.body.children).forEach(m=>m.addEventListener("click",ut)),i.document.documentElement.addEventListener("click",ut));let a=!0;const l=m=>he(s).some(g=>{if(typeof g=="string")return Array.from(i.document.querySelectorAll(g)).some(v=>v===m.target||m.composedPath().includes(v));{const v=tt(g);return v&&(m.target===v||m.composedPath().includes(v))}});function u(m){const g=he(m);return g&&g.$.subTree.shapeFlag===16}function c(m,g){const v=he(m),_=v.$.subTree&&v.$.subTree.children;return _==null||!Array.isArray(_)?!1:_.some(y=>y.el===g.target||g.composedPath().includes(y.el))}const d=m=>{const g=tt(r);if(m.target!=null&&!(!(g instanceof Element)&&u(r)&&c(r,m))&&!(!g||g===m.target||m.composedPath().includes(g))&&(m.detail===0&&(a=!l(m)),!a)){a=!0;return}};let h=!1;const f=[Ct(i,"click",m=>{h||(h=!0,setTimeout(()=>{h=!1},0),d(m))},{passive:!0,capture:n}),Ct(i,"pointerdown",m=>{const g=tt(r);a=!l(m)&&!!(g&&!m.composedPath().includes(g))},{passive:!0}),o&&Ct(i,"blur",m=>{setTimeout(()=>{var g;const v=tt(r);((g=i.document.activeElement)==null?void 0:g.tagName)==="IFRAME"&&(v!=null&&v.contains(i.document.activeElement))},0)})].filter(Boolean);return()=>f.forEach(m=>m())}function Cx(){const r=V(!1),e=dn();return e&&Yt(()=>{r.value=!0},e),r}function ka(r){const e=Cx();return U(()=>(e.value,!!r()))}function yg(r,e,t={}){const{window:i=Pt,...s}=t;let n;const o=ka(()=>i&&"MutationObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=U(()=>{const h=he(r),f=(Array.isArray(h)?h:[h]).map(tt).filter(fg);return new Set(f)}),u=xe(()=>l.value,h=>{a(),o.value&&h.size&&(n=new MutationObserver(e),h.forEach(f=>n.observe(f,s)))},{immediate:!0,flush:"post"}),c=()=>n==null?void 0:n.takeRecords(),d=()=>{u(),a()};return Ms(d),{isSupported:o,stop:d,takeRecords:c}}function Lt(r,e={}){const{window:t=Pt}=e,i=ka(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let s;const n=V(!1),o=u=>{n.value=u.matches},a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},l=rm(()=>{i.value&&(a(),s=t.matchMedia(he(r)),"addEventListener"in s?s.addEventListener("change",o):s.addListener(o),n.value=s.matches)});return Ms(()=>{l(),a(),s=void 0}),n}const Wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xn="__vueuse_ssr_handlers__",Px=Rx();function Rx(){return Xn in Wn||(Wn[Xn]=Wn[Xn]||{}),Wn[Xn]}function vg(r,e){return Px[r]||e}function Ix(r){return Lt("(prefers-color-scheme: dark)",r)}function Mx(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const kx={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},ad="vueuse-storage";function lh(r,e,t,i={}){var s;const{flush:n="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:c,window:d=Pt,eventFilter:h,onError:f=E=>{console.error(E)},initOnMounted:p}=i,m=(c?In:V)(typeof e=="function"?e():e);if(!t)try{t=vg("getDefaultStorage",()=>{var E;return(E=Pt)==null?void 0:E.localStorage})()}catch(E){f(E)}if(!t)return m;const g=he(e),v=Mx(g),_=(s=i.serializer)!=null?s:kx[v],{pause:y,resume:b}=Tx(m,()=>S(m.value),{flush:n,deep:o,eventFilter:h});d&&a&&Fn(()=>{t instanceof Storage?Ct(d,"storage",A):Ct(d,ad,C),p&&A()}),p||A();function w(E,D){if(d){const M={key:r,oldValue:E,newValue:D,storageArea:t};d.dispatchEvent(t instanceof Storage?new StorageEvent("storage",M):new CustomEvent(ad,{detail:M}))}}function S(E){try{const D=t.getItem(r);if(E==null)w(D,null),t.removeItem(r);else{const M=_.write(E);D!==M&&(t.setItem(r,M),w(D,M))}}catch(D){f(D)}}function x(E){const D=E?E.newValue:t.getItem(r);if(D==null)return l&&g!=null&&t.setItem(r,_.write(g)),g;if(!E&&u){const M=_.read(D);return typeof u=="function"?u(M,g):v==="object"&&!Array.isArray(M)?{...g,...M}:M}else return typeof D!="string"?D:_.read(D)}function A(E){if(!(E&&E.storageArea!==t)){if(E&&E.key==null){m.value=g;return}if(!(E&&E.key!==r)){y();try{(E==null?void 0:E.newValue)!==_.write(m.value)&&(m.value=x(E))}catch(D){f(D)}finally{E?ri(b):b()}}}}function C(E){A(E.detail)}return m}const Dx="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ox(r={}){const{selector:e="html",attribute:t="class",initialValue:i="auto",window:s=Pt,storage:n,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:u,disableTransition:c=!0}=r,d={auto:"",light:"light",dark:"dark",...r.modes||{}},h=Ix({window:s}),f=U(()=>h.value?"dark":"light"),p=l||(o==null?gg(i):lh(o,i,n,{window:s,listenToStorageChanges:a})),m=U(()=>p.value==="auto"?f.value:p.value),g=vg("updateHTMLAttrs",(b,w,S)=>{const x=typeof b=="string"?s==null?void 0:s.document.querySelector(b):tt(b);if(!x)return;const A=new Set,C=new Set;let E=null;if(w==="class"){const M=S.split(/\s/g);Object.values(d).flatMap(T=>(T||"").split(/\s/g)).filter(Boolean).forEach(T=>{M.includes(T)?A.add(T):C.add(T)})}else E={key:w,value:S};if(A.size===0&&C.size===0&&E===null)return;let D;c&&(D=s.document.createElement("style"),D.appendChild(document.createTextNode(Dx)),s.document.head.appendChild(D));for(const M of A)x.classList.add(M);for(const M of C)x.classList.remove(M);E&&x.setAttribute(E.key,E.value),c&&(s.getComputedStyle(D).opacity,document.head.removeChild(D))});function v(b){var w;g(e,t,(w=d[b])!=null?w:b)}function _(b){r.onChanged?r.onChanged(b,v):v(b)}xe(m,_,{flush:"post",immediate:!0}),Fn(()=>_(m.value));const y=U({get(){return u?p.value:m.value},set(b){p.value=b}});return Object.assign(y,{store:p,system:f,state:m})}function xu(r,e,t={}){const{window:i=Pt,initialValue:s,observe:n=!1}=t,o=V(s),a=U(()=>{var u;return tt(e)||((u=i==null?void 0:i.document)==null?void 0:u.documentElement)});function l(){var u;const c=he(r),d=he(a);if(d&&i&&c){const h=(u=i.getComputedStyle(d).getPropertyValue(c))==null?void 0:u.trim();o.value=h||s}}return n&&yg(a,l,{attributeFilter:["style","class"],window:i}),xe([a,()=>he(r)],(u,c)=>{c[0]&&c[1]&&c[0].style.removeProperty(c[1]),l()},{immediate:!0}),xe(o,u=>{var c;const d=he(r);(c=a.value)!=null&&c.style&&d&&(u==null?a.value.style.removeProperty(d):a.value.style.setProperty(d,u))}),o}function Lx(r={}){const{valueDark:e="dark",valueLight:t=""}=r,i=Ox({...r,onChanged:(o,a)=>{var l;r.onChanged?(l=r.onChanged)==null||l.call(r,o==="dark",a,o):a(o)},modes:{dark:e,light:t}}),s=U(()=>i.system.value);return U({get(){return i.value==="dark"},set(o){const a=o?"dark":"light";s.value===a?i.value="auto":i.value=a}})}function Bx(r,e,t={}){const{window:i=Pt,...s}=t;let n;const o=ka(()=>i&&"ResizeObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=U(()=>{const d=he(r);return Array.isArray(d)?d.map(h=>tt(h)):[tt(d)]}),u=xe(l,d=>{if(a(),o.value&&i){n=new ResizeObserver(e);for(const h of d)h&&n.observe(h,s)}},{immediate:!0,flush:"post"}),c=()=>{a(),u()};return Ms(c),{isSupported:o,stop:c}}function CL(r,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:s=!0,immediate:n=!0,updateTiming:o="sync"}=e,a=V(0),l=V(0),u=V(0),c=V(0),d=V(0),h=V(0),f=V(0),p=V(0);function m(){const v=tt(r);if(!v){t&&(a.value=0,l.value=0,u.value=0,c.value=0,d.value=0,h.value=0,f.value=0,p.value=0);return}const _=v.getBoundingClientRect();a.value=_.height,l.value=_.bottom,u.value=_.left,c.value=_.right,d.value=_.top,h.value=_.width,f.value=_.x,p.value=_.y}function g(){o==="sync"?m():o==="next-frame"&&requestAnimationFrame(()=>m())}return Bx(r,g),xe(()=>tt(r),v=>!v&&g()),yg(r,g,{attributeFilter:["style","class"]}),s&&Ct("scroll",g,{capture:!0,passive:!0}),i&&Ct("resize",g,{passive:!0}),Fn(()=>{n&&g()}),{height:a,bottom:l,left:u,right:c,top:d,width:h,x:f,y:p,update:g}}function PL(r,e,t={}){const{root:i,rootMargin:s="0px",threshold:n=0,window:o=Pt,immediate:a=!0}=t,l=ka(()=>o&&"IntersectionObserver"in o),u=U(()=>{const p=he(r);return(Array.isArray(p)?p:[p]).map(tt).filter(fg)});let c=ut;const d=V(a),h=l.value?xe(()=>[u.value,tt(i),d.value],([p,m])=>{if(c(),!d.value||!p.length)return;const g=new IntersectionObserver(e,{root:tt(m),rootMargin:s,threshold:n});p.forEach(v=>v&&g.observe(v)),c=()=>{g.disconnect(),c=ut}},{immediate:a,flush:"post"}):ut,f=()=>{c(),h(),d.value=!1};return Ms(f),{isSupported:l,isActive:d,pause(){c(),d.value=!1},resume(){d.value=!0},stop:f}}function nl(r){return typeof Window<"u"&&r instanceof Window?r.document.documentElement:typeof Document<"u"&&r instanceof Document?r.documentElement:r}const ld=1;function Fx(r,e={}){const{throttle:t=0,idle:i=200,onStop:s=ut,onScroll:n=ut,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:l="auto",window:u=Pt,onError:c=x=>{console.error(x)}}=e,d=V(0),h=V(0),f=U({get(){return d.value},set(x){m(x,void 0)}}),p=U({get(){return h.value},set(x){m(void 0,x)}});function m(x,A){var C,E,D,M;if(!u)return;const T=he(r);if(!T)return;(D=T instanceof Document?u.document.body:T)==null||D.scrollTo({top:(C=he(A))!=null?C:p.value,left:(E=he(x))!=null?E:f.value,behavior:he(l)});const P=((M=T==null?void 0:T.document)==null?void 0:M.documentElement)||(T==null?void 0:T.documentElement)||T;f!=null&&(d.value=P.scrollLeft),p!=null&&(h.value=P.scrollTop)}const g=V(!1),v=fn({left:!0,right:!1,top:!0,bottom:!1}),_=fn({left:!1,right:!1,top:!1,bottom:!1}),y=x=>{g.value&&(g.value=!1,_.left=!1,_.right=!1,_.top=!1,_.bottom=!1,s(x))},b=bx(y,t+i),w=x=>{var A;if(!u)return;const C=((A=x==null?void 0:x.document)==null?void 0:A.documentElement)||(x==null?void 0:x.documentElement)||tt(x),{display:E,flexDirection:D}=getComputedStyle(C),M=C.scrollLeft;_.left=M<d.value,_.right=M>d.value;const T=Math.abs(M)<=(o.left||0),P=Math.abs(M)+C.clientWidth>=C.scrollWidth-(o.right||0)-ld;E==="flex"&&D==="row-reverse"?(v.left=P,v.right=T):(v.left=T,v.right=P),d.value=M;let L=C.scrollTop;x===u.document&&!L&&(L=u.document.body.scrollTop),_.top=L<h.value,_.bottom=L>h.value;const j=Math.abs(L)<=(o.top||0),$=Math.abs(L)+C.clientHeight>=C.scrollHeight-(o.bottom||0)-ld;E==="flex"&&D==="column-reverse"?(v.top=$,v.bottom=j):(v.top=j,v.bottom=$),h.value=L},S=x=>{var A;if(!u)return;const C=(A=x.target.documentElement)!=null?A:x.target;w(C),g.value=!0,b(x),n(x)};return Ct(r,"scroll",t?xx(S,t,!0,!1):S,a),Fn(()=>{try{const x=he(r);if(!x)return;w(x)}catch(x){c(x)}}),Ct(r,"scrollend",y,a),{x:f,y:p,isScrolling:g,arrivedState:v,directions:_,measure(){const x=he(r);u&&x&&w(x)}}}function Nx(r,e=ut,t={}){const{immediate:i=!0,manual:s=!1,type:n="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:u,defer:c,document:d=Sx,attrs:h={}}=t,f=V(null);let p=null;const m=_=>new Promise((y,b)=>{const w=A=>(f.value=A,y(A),A);if(!d){y(!1);return}let S=!1,x=d.querySelector(`script[src="${he(r)}"]`);x?x.hasAttribute("data-loaded")&&w(x):(x=d.createElement("script"),x.type=n,x.async=o,x.src=he(r),c&&(x.defer=c),a&&(x.crossOrigin=a),u&&(x.noModule=u),l&&(x.referrerPolicy=l),Object.entries(h).forEach(([A,C])=>x==null?void 0:x.setAttribute(A,C)),S=!0),x.addEventListener("error",A=>b(A)),x.addEventListener("abort",A=>b(A)),x.addEventListener("load",()=>{x.setAttribute("data-loaded","true"),e(x),w(x)}),S&&(x=d.head.appendChild(x)),_||w(x)}),g=(_=!0)=>(p||(p=m(_)),p),v=()=>{if(!d)return;p=null,f.value&&(f.value=null);const _=d.querySelector(`script[src="${he(r)}"]`);_&&d.head.removeChild(_)};return i&&!s&&Fn(g),s||Ax(v),{scriptTag:f,load:g,unload:v}}function _g(r){const e=window.getComputedStyle(r);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&r.clientWidth<r.scrollWidth||e.overflowY==="auto"&&r.clientHeight<r.scrollHeight)return!0;{const t=r.parentNode;return!t||t.tagName==="BODY"?!1:_g(t)}}function $x(r){const e=r||window.event,t=e.target;return _g(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const ol=new WeakMap;function Ux(r,e=!1){const t=V(e);let i=null,s="";xe(gg(r),a=>{const l=nl(he(a));if(l){const u=l;if(ol.get(u)||ol.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(s=u.style.overflow),u.style.overflow==="hidden")return t.value=!0;if(t.value)return u.style.overflow="hidden"}},{immediate:!0});const n=()=>{const a=nl(he(r));!a||t.value||(bu&&(i=Ct(a,"touchmove",l=>{$x(l)},{passive:!1})),a.style.overflow="hidden",t.value=!0)},o=()=>{const a=nl(he(r));!a||!t.value||(bu&&(i==null||i()),a.style.overflow=s,ol.delete(a),t.value=!1)};return Ms(o),U({get(){return t.value},set(a){a?n():o()}})}function Hx(r={}){const{window:e=Pt,behavior:t="auto"}=r;if(!e)return{x:V(0),y:V(0)};const i=V(e.scrollX),s=V(e.scrollY),n=U({get(){return i.value},set(a){scrollTo({left:a,behavior:t})}}),o=U({get(){return s.value},set(a){scrollTo({top:a,behavior:t})}});return Ct(e,"scroll",()=>{i.value=e.scrollX,s.value=e.scrollY},{capture:!1,passive:!0}),{x:n,y:o}}function Gi(){const r=Nr();return U(()=>r.meta.frontmatter||{})}function RL(){const r=Nr();return U(()=>r.meta.$encryptedPhotos||"")}function IL(){const r=nt(),e=Nr();return U(()=>((r.value.url.endsWith("/")?r.value.url.slice(0,-1):r.value.url)||yr&&window.location.origin)+e.path)}function uh(r={}){const e=Lx(r.useDarkOptions),t=Io(e),i=U(()=>{var n,o;return e.value?((n=r.themeColor)==null?void 0:n.dark)||"#000":((o=r.themeColor)==null?void 0:o.light)||"#fff"});r.circleTransition&&Ne(()=>Promise.resolve({}),__vite__mapDeps([0]));function s(n,o={}){if(!document.startViewTransition){t();return}const a=n.clientX,l=n.clientY,u=Math.hypot(Math.max(a,innerWidth-a),Math.max(l,innerHeight-l));document.startViewTransition(()=>{t()}).ready.then(()=>{const d=[`circle(0px at ${a}px ${l}px)`,`circle(${u}px at ${a}px ${l}px)`];document.documentElement.animate({clipPath:e.value?d.reverse():d},{duration:o.duration||300,easing:o.easing||"ease-in",pseudoElement:e.value?"::view-transition-old(root)":"::view-transition-new(root)"})})}return{isDark:e,themeColor:i,toggleDark:t,toggleDarkWithTransition:s}}function Gx(){const r=Lt("(max-width: 639px)"),e=Lt("(min-width: 640px)"),t=Lt("(min-width: 768px)"),i=Lt("(min-width: 1024px)"),s=Lt("(min-width: 1280px)"),n=Lt("(min-width: 1536px)");return{isXs:r,isSm:e,isMd:t,isLg:i,isXl:s,is2xl:n}}function bg(r){const e=Nr();return r?U(()=>{var t;return((t=e.meta)==null?void 0:t.layout)===r}):U(()=>{var t;return(t=e.meta)==null?void 0:t.layout})}function zx(){return Lt("(max-width: 768px)")}function jx(){const{availableLocales:r,locale:e}=st(),t=lh("valaxy-locale",e.value);return pr.locale(e.value==="zh-CN"?"zh-cn":"en"),{lang:t,toggleLocales:()=>{const s=r;e.value=s[(s.indexOf(e.value)+1)%s.length],t.value=e.value,pr.locale(e.value==="zh-CN"?"zh-cn":"en"),yr&&document.documentElement.setAttribute("lang",e.value)}}}var wu=[];function Vx(r,e,t){wu.length=0;let i=[],s=[];return r.forEach(n=>{let o={...n,children:[]},a=s[s.length-1];for(;a&&a.level>=o.level;)s.pop(),a=s[s.length-1];if(o.element.classList.contains("ignore-header")||a&&"shouldIgnore"in a){s.push({level:o.level,shouldIgnore:!0});return}o.level>t||o.level<e||(wu.push({element:o.element,link:o.link}),a?a.children.push(o):i.push(o),s.push(o))}),i}function Wx(r,e=[2,4]){let t=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[i,s]=typeof t=="number"?[t,t]:t==="deep"?[2,6]:t;return Vx(r,i,s)}function Xx(r){let e="";for(let t of Array.from(r.childNodes))if(t.nodeType===1){if(t.classList.contains("VABadge")||t.classList.contains("header-anchor"))continue;e+=t.textContent}else t.nodeType===3&&(e+=t.textContent);return e.trim()}function Yx(r={range:[2,4],selector:".markdown-body"}){let e=r.selector||".markdown-body",t=document.querySelectorAll(e),i=t[t.length-1],s=Array.from((i==null?void 0:i.querySelectorAll(`${e} :where(h1,h2,h3,h4,h5,h6)`))||[]).filter(n=>r.filter?r.filter(n):!0).map(n=>{let o=Number(n.tagName[1]);return{element:n,title:Xx(n),link:`#${n.id}`,level:o,lang:n.lang}});return Wx(s,r.range)}let Mo=[];function qx(r){Mo.push(r),Fc(()=>{Mo=Mo.filter(e=>e!==r)})}const Kx=()=>Mo.forEach(r=>r()),ML=Kx;function kL(r,e){return Math.random()*(e-r)+r}function Zx(r,e){let t,i=!1;return()=>{t&&clearTimeout(t),i?t=setTimeout(r,e):(r(),i=!0,setTimeout(()=>{i=!1},e))}}function DL(r){return new Promise(e=>setTimeout(e,r))}function Jx(){const{hasSidebar:r}=Ww(),e=Lt("(min-width: 960px)"),t=Lt("(min-width: 1280px)");return{isAsideEnabled:U(()=>!t.value&&!e.value?!1:r.value?t.value:e.value)}}const Qx=130,al=33;function ew(r){let e=0;for(;r!==document.body;){if(r===null)return Number.NaN;e+=r.offsetTop,r=r.offsetParent}return e}function tw(r,e){const{isAsideEnabled:t}=Jx(),i=Zx(o,100);let s=null;Yt(()=>{requestAnimationFrame(o),window.addEventListener("scroll",i)}),u_(()=>{a(location.hash)}),Fc(()=>{window.removeEventListener("scroll",i)});const n=()=>{const l=s;if(!l)return;const u=document.querySelector(".yun-aside");if(u){const c=l.offsetTop+al+60;(c<u.scrollTop||c>u.offsetHeight+u.scrollTop)&&u.scrollTo({top:c,behavior:"smooth"})}};function o(){if(!t.value)return;const l=window.scrollY,u=window.innerHeight,c=document.body.offsetHeight,d=Math.abs(l+u-c)<1,h=wu.map(({element:p,link:m})=>({link:m,top:ew(p)})).filter(({top:p})=>!Number.isNaN(p)).sort((p,m)=>p.top-m.top);if(!h.length){a(null);return}if(l<1){a(null);return}if(d){a(h[h.length-1].link);return}let f=null;for(const{link:p,top:m}of h){if(m>l+4+Qx)break;f=p}a(f)}function a(l){s&&s.classList.remove("active"),l==null?s=null:s=r.value.querySelector(`a[href="${decodeURIComponent(l)}"]`);const u=s;n(),u?(u.classList.add("active"),e.value.style.top=`${u.offsetTop+al}px`,e.value.style.opacity="1"):e.value&&(e.value.style.top=`${al}px`,e.value.style.opacity="0")}}function rw(){const r=Gi(),e=oh(),t=In([]),i=U(()=>r.value.outline??e.value.outline);return qx(()=>{i.value!==!1&&(t.value=Yx({range:i.value,selector:".markdown-body",filter:n=>!!n.id&&n.hasChildNodes()}))}),{headers:t,handleClick:({target:n})=>{const o=n.href.split("#")[1],a=document.getElementById(decodeURIComponent(o));a==null||a.focus({preventScroll:!0})}}}function OL(r){const{locale:e}=st();return U(()=>{const t=e.value==="zh-CN"?"zh":e.value;return r.value[`title_${t}`]||r.value.title})}function iw(){const e=hg().router;return U(()=>{const t=["/:..all","/:all(.*)*","/","/:path(.*)"];return e.getRoutes().filter(s=>s.name).filter(s=>s.meta).filter(s=>s.meta.frontmatter).filter(s=>s.path&&!t.includes(s.path)).map(s=>Object.assign({path:s.path,excerpt:s.meta.excerpt},s.meta.frontmatter||{}))})}function sw(r={}){const e=iw();return U(()=>{const t=e.value.filter(n=>{var o,a;return((o=n.path)==null?void 0:o.startsWith("/posts"))&&!((a=n.path)!=null&&a.endsWith(".html"))&&n.date&&(!r.type||n.type===r.type)&&(!n.hide||n.hide==="index")}),i=nd(t.filter(n=>n.top)).sort((n,o)=>o.top-n.top),s=nd(t.filter(n=>!n.top));return i.concat(s)})}function Lr(r){return Array.isArray?Array.isArray(r):Tg(r)==="[object Array]"}function nw(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function ow(r){return r==null?"":nw(r)}function or(r){return typeof r=="string"}function xg(r){return typeof r=="number"}function aw(r){return r===!0||r===!1||lw(r)&&Tg(r)=="[object Boolean]"}function wg(r){return typeof r=="object"}function lw(r){return wg(r)&&r!==null}function gt(r){return r!=null}function ll(r){return!r.trim().length}function Tg(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const uw="Incorrect 'index' type",cw=r=>`Invalid value for key ${r}`,hw=r=>`Pattern length exceeds max of ${r}.`,dw=r=>`Missing ${r} property in key`,fw=r=>`Property 'weight' in key '${r}' must be a positive integer`,ud=Object.prototype.hasOwnProperty;class pw{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let s=Ag(i);this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ag(r){let e=null,t=null,i=null,s=1,n=null;if(or(r)||Lr(r))i=r,e=cd(r),t=Tu(r);else{if(!ud.call(r,"name"))throw new Error(dw("name"));const o=r.name;if(i=o,ud.call(r,"weight")&&(s=r.weight,s<=0))throw new Error(fw(o));e=cd(o),t=Tu(o),n=r.getFn}return{path:e,id:t,weight:s,src:i,getFn:n}}function cd(r){return Lr(r)?r:r.split(".")}function Tu(r){return Lr(r)?r.join("."):r}function mw(r,e){let t=[],i=!1;const s=(n,o,a)=>{if(gt(n))if(!o[a])t.push(n);else{let l=o[a];const u=n[l];if(!gt(u))return;if(a===o.length-1&&(or(u)||xg(u)||aw(u)))t.push(ow(u));else if(Lr(u)){i=!0;for(let c=0,d=u.length;c<d;c+=1)s(u[c],o,a+1)}else o.length&&s(u,o,a+1)}};return s(r,or(e)?e.split("."):e,0),i?t:t[0]}const gw={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},yw={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},vw={location:0,threshold:.6,distance:100},_w={useExtendedSearch:!1,getFn:mw,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var se={...yw,...gw,...vw,..._w};const bw=/[^ ]+/g;function xw(r=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(s){const n=s.match(bw).length;if(t.has(n))return t.get(n);const o=1/Math.pow(n,.5*r),a=parseFloat(Math.round(o*i)/i);return t.set(n,a),a},clear(){t.clear()}}}class ch{constructor({getFn:e=se.getFn,fieldNormWeight:t=se.fieldNormWeight}={}){this.norm=xw(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,or(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();or(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!gt(e)||ll(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((s,n)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(gt(o)){if(Lr(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(gt(c))if(or(c)&&!ll(c)){let d={v:c,i:u,n:this.norm.get(c)};a.push(d)}else Lr(c)&&c.forEach((d,h)=>{l.push({nestedArrIndex:h,value:d})})}i.$[n]=a}else if(or(o)&&!ll(o)){let a={v:o,n:this.norm.get(o)};i.$[n]=a}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Sg(r,e,{getFn:t=se.getFn,fieldNormWeight:i=se.fieldNormWeight}={}){const s=new ch({getFn:t,fieldNormWeight:i});return s.setKeys(r.map(Ag)),s.setSources(e),s.create(),s}function ww(r,{getFn:e=se.getFn,fieldNormWeight:t=se.fieldNormWeight}={}){const{keys:i,records:s}=r,n=new ch({getFn:e,fieldNormWeight:t});return n.setKeys(i),n.setIndexRecords(s),n}function Yn(r,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:s=se.distance,ignoreLocation:n=se.ignoreLocation}={}){const o=e/r.length;if(n)return o;const a=Math.abs(i-t);return s?o+a/s:a?1:o}function Tw(r=[],e=se.minMatchCharLength){let t=[],i=-1,s=-1,n=0;for(let o=r.length;n<o;n+=1){let a=r[n];a&&i===-1?i=n:!a&&i!==-1&&(s=n-1,s-i+1>=e&&t.push([i,s]),i=-1)}return r[n-1]&&n-i>=e&&t.push([i,n-1]),t}const Ei=32;function Aw(r,e,t,{location:i=se.location,distance:s=se.distance,threshold:n=se.threshold,findAllMatches:o=se.findAllMatches,minMatchCharLength:a=se.minMatchCharLength,includeMatches:l=se.includeMatches,ignoreLocation:u=se.ignoreLocation}={}){if(e.length>Ei)throw new Error(hw(Ei));const c=e.length,d=r.length,h=Math.max(0,Math.min(i,d));let f=n,p=h;const m=a>1||l,g=m?Array(d):[];let v;for(;(v=r.indexOf(e,p))>-1;){let x=Yn(e,{currentLocation:v,expectedLocation:h,distance:s,ignoreLocation:u});if(f=Math.min(x,f),p=v+c,m){let A=0;for(;A<c;)g[v+A]=1,A+=1}}p=-1;let _=[],y=1,b=c+d;const w=1<<c-1;for(let x=0;x<c;x+=1){let A=0,C=b;for(;A<C;)Yn(e,{errors:x,currentLocation:h+C,expectedLocation:h,distance:s,ignoreLocation:u})<=f?A=C:b=C,C=Math.floor((b-A)/2+A);b=C;let E=Math.max(1,h-C+1),D=o?d:Math.min(h+C,d)+c,M=Array(D+2);M[D+1]=(1<<x)-1;for(let P=D;P>=E;P-=1){let L=P-1,j=t[r.charAt(L)];if(m&&(g[L]=+!!j),M[P]=(M[P+1]<<1|1)&j,x&&(M[P]|=(_[P+1]|_[P])<<1|1|_[P+1]),M[P]&w&&(y=Yn(e,{errors:x,currentLocation:L,expectedLocation:h,distance:s,ignoreLocation:u}),y<=f)){if(f=y,p=L,p<=h)break;E=Math.max(1,2*h-p)}}if(Yn(e,{errors:x+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:u})>f)break;_=M}const S={isMatch:p>=0,score:Math.max(.001,y)};if(m){const x=Tw(g,a);x.length?l&&(S.indices=x):S.isMatch=!1}return S}function Sw(r){let e={};for(let t=0,i=r.length;t<i;t+=1){const s=r.charAt(t);e[s]=(e[s]||0)|1<<i-t-1}return e}const qo=String.prototype.normalize?r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):r=>r;class Eg{constructor(e,{location:t=se.location,threshold:i=se.threshold,distance:s=se.distance,includeMatches:n=se.includeMatches,findAllMatches:o=se.findAllMatches,minMatchCharLength:a=se.minMatchCharLength,isCaseSensitive:l=se.isCaseSensitive,ignoreDiacritics:u=se.ignoreDiacritics,ignoreLocation:c=se.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:s,includeMatches:n,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:c},e=l?e:e.toLowerCase(),e=u?qo(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const d=(f,p)=>{this.chunks.push({pattern:f,alphabet:Sw(f),startIndex:p})},h=this.pattern.length;if(h>Ei){let f=0;const p=h%Ei,m=h-p;for(;f<m;)d(this.pattern.substr(f,Ei),f),f+=Ei;if(p){const g=h-Ei;d(this.pattern.substr(g),g)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:i,includeMatches:s}=this.options;if(e=t?e:e.toLowerCase(),e=i?qo(e):e,this.pattern===e){let m={isMatch:!0,score:0};return s&&(m.indices=[[0,e.length-1]]),m}const{location:n,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,ignoreLocation:c}=this.options;let d=[],h=0,f=!1;this.chunks.forEach(({pattern:m,alphabet:g,startIndex:v})=>{const{isMatch:_,score:y,indices:b}=Aw(e,m,g,{location:n+v,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,includeMatches:s,ignoreLocation:c});_&&(f=!0),h+=y,_&&b&&(d=[...d,...b])});let p={isMatch:f,score:f?h/this.chunks.length:1};return f&&s&&(p.indices=d),p}}class ui{constructor(e){this.pattern=e}static isMultiMatch(e){return hd(e,this.multiRegex)}static isSingleMatch(e){return hd(e,this.singleRegex)}search(){}}function hd(r,e){const t=r.match(e);return t?t[1]:null}class Ew extends ui{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Cw extends ui{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Pw extends ui{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Rw extends ui{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Iw extends ui{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Mw extends ui{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Cg extends ui{constructor(e,{location:t=se.location,threshold:i=se.threshold,distance:s=se.distance,includeMatches:n=se.includeMatches,findAllMatches:o=se.findAllMatches,minMatchCharLength:a=se.minMatchCharLength,isCaseSensitive:l=se.isCaseSensitive,ignoreDiacritics:u=se.ignoreDiacritics,ignoreLocation:c=se.ignoreLocation}={}){super(e),this._bitapSearch=new Eg(e,{location:t,threshold:i,distance:s,includeMatches:n,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Pg extends ui{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const s=[],n=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+n,s.push([i,t-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Au=[Ew,Pg,Pw,Rw,Mw,Iw,Cw,Cg],dd=Au.length,kw=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Dw="|";function Ow(r,e={}){return r.split(Dw).map(t=>{let i=t.trim().split(kw).filter(n=>n&&!!n.trim()),s=[];for(let n=0,o=i.length;n<o;n+=1){const a=i[n];let l=!1,u=-1;for(;!l&&++u<dd;){const c=Au[u];let d=c.isMultiMatch(a);d&&(s.push(new c(d,e)),l=!0)}if(!l)for(u=-1;++u<dd;){const c=Au[u];let d=c.isSingleMatch(a);if(d){s.push(new c(d,e));break}}}return s})}const Lw=new Set([Cg.type,Pg.type]);class Bw{constructor(e,{isCaseSensitive:t=se.isCaseSensitive,ignoreDiacritics:i=se.ignoreDiacritics,includeMatches:s=se.includeMatches,minMatchCharLength:n=se.minMatchCharLength,ignoreLocation:o=se.ignoreLocation,findAllMatches:a=se.findAllMatches,location:l=se.location,threshold:u=se.threshold,distance:c=se.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:i,includeMatches:s,minMatchCharLength:n,findAllMatches:a,ignoreLocation:o,location:l,threshold:u,distance:c},e=t?e:e.toLowerCase(),e=i?qo(e):e,this.pattern=e,this.query=Ow(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:s,ignoreDiacritics:n}=this.options;e=s?e:e.toLowerCase(),e=n?qo(e):e;let o=0,a=[],l=0;for(let u=0,c=t.length;u<c;u+=1){const d=t[u];a.length=0,o=0;for(let h=0,f=d.length;h<f;h+=1){const p=d[h],{isMatch:m,indices:g,score:v}=p.search(e);if(m){if(o+=1,l+=v,i){const _=p.constructor.type;Lw.has(_)?a=[...a,...g]:a.push(g)}}else{l=0,o=0,a.length=0;break}}if(o){let h={isMatch:!0,score:l/o};return i&&(h.indices=a),h}}return{isMatch:!1,score:1}}}const Su=[];function Fw(...r){Su.push(...r)}function Eu(r,e){for(let t=0,i=Su.length;t<i;t+=1){let s=Su[t];if(s.condition(r,e))return new s(r,e)}return new Eg(r,e)}const Ko={AND:"$and",OR:"$or"},Cu={PATH:"$path",PATTERN:"$val"},Pu=r=>!!(r[Ko.AND]||r[Ko.OR]),Nw=r=>!!r[Cu.PATH],$w=r=>!Lr(r)&&wg(r)&&!Pu(r),fd=r=>({[Ko.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function Rg(r,e,{auto:t=!0}={}){const i=s=>{let n=Object.keys(s);const o=Nw(s);if(!o&&n.length>1&&!Pu(s))return i(fd(s));if($w(s)){const l=o?s[Cu.PATH]:n[0],u=o?s[Cu.PATTERN]:s[l];if(!or(u))throw new Error(cw(l));const c={keyId:Tu(l),pattern:u};return t&&(c.searcher=Eu(u,e)),c}let a={children:[],operator:n[0]};return n.forEach(l=>{const u=s[l];Lr(u)&&u.forEach(c=>{a.children.push(i(c))})}),a};return Pu(r)||(r=fd(r)),i(r)}function Uw(r,{ignoreFieldNorm:e=se.ignoreFieldNorm}){r.forEach(t=>{let i=1;t.matches.forEach(({key:s,norm:n,score:o})=>{const a=s?s.weight:null;i*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:n))}),t.score=i})}function Hw(r,e){const t=r.matches;e.matches=[],gt(t)&&t.forEach(i=>{if(!gt(i.indices)||!i.indices.length)return;const{indices:s,value:n}=i;let o={indices:s,value:n};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),e.matches.push(o)})}function Gw(r,e){e.score=r.score}function zw(r,e,{includeMatches:t=se.includeMatches,includeScore:i=se.includeScore}={}){const s=[];return t&&s.push(Hw),i&&s.push(Gw),r.map(n=>{const{idx:o}=n,a={item:e[o],refIndex:o};return s.length&&s.forEach(l=>{l(n,a)}),a})}class ks{constructor(e,t={},i){this.options={...se,...t},this.options.useExtendedSearch,this._keyStore=new pw(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ch))throw new Error(uw);this._myIndex=t||Sg(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){gt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,s=this._docs.length;i<s;i+=1){const n=this._docs[i];e(n,i)&&(this.removeAt(i),i-=1,s-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:n,sortFn:o,ignoreFieldNorm:a}=this.options;let l=or(e)?or(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Uw(l,{ignoreFieldNorm:a}),n&&l.sort(o),xg(t)&&t>-1&&(l=l.slice(0,t)),zw(l,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(e){const t=Eu(e,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:n,i:o,n:a})=>{if(!gt(n))return;const{isMatch:l,score:u,indices:c}=t.searchIn(n);l&&s.push({item:n,idx:o,matches:[{score:u,value:n,norm:a,indices:c}]})}),s}_searchLogical(e){const t=Rg(e,this.options),i=(a,l,u)=>{if(!a.children){const{keyId:d,searcher:h}=a,f=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:h});return f&&f.length?[{idx:u,item:l,matches:f}]:[]}const c=[];for(let d=0,h=a.children.length;d<h;d+=1){const f=a.children[d],p=i(f,l,u);if(p.length)c.push(...p);else if(a.operator===Ko.AND)return[]}return c},s=this._myIndex.records,n={},o=[];return s.forEach(({$:a,i:l})=>{if(gt(a)){let u=i(t,a,l);u.length&&(n[l]||(n[l]={idx:l,item:a,matches:[]},o.push(n[l])),u.forEach(({matches:c})=>{n[l].matches.push(...c)}))}}),o}_searchObjectList(e){const t=Eu(e,this.options),{keys:i,records:s}=this._myIndex,n=[];return s.forEach(({$:o,i:a})=>{if(!gt(o))return;let l=[];i.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:t}))}),l.length&&n.push({idx:a,item:o,matches:l})}),n}_findMatches({key:e,value:t,searcher:i}){if(!gt(t))return[];let s=[];if(Lr(t))t.forEach(({v:n,i:o,n:a})=>{if(!gt(n))return;const{isMatch:l,score:u,indices:c}=i.searchIn(n);l&&s.push({score:u,key:e,value:n,idx:o,norm:a,indices:c})});else{const{v:n,n:o}=t,{isMatch:a,score:l,indices:u}=i.searchIn(n);a&&s.push({score:l,key:e,value:n,norm:o,indices:u})}return s}}ks.version="7.1.0";ks.createIndex=Sg;ks.parseIndex=ww;ks.config=se;ks.parseQuery=Rg;Fw(Bw);function jw(r,e,t){const i=()=>{var o,a;return new ks((o=he(e))!=null?o:[],(a=he(t))==null?void 0:a.fuseOptions)},s=V(i());xe(()=>{var o;return(o=he(t))==null?void 0:o.fuseOptions},()=>{s.value=i()},{deep:!0}),xe(()=>he(e),o=>{s.value.setCollection(o)},{deep:!0});const n=U(()=>{const o=he(t);if(o!=null&&o.matchAllWhenSearchEmpty&&!he(r))return he(e).map((l,u)=>({item:l,refIndex:u}));const a=o==null?void 0:o.resultLimit;return s.value.search(he(r),a?{limit:a}:void 0)});return{fuse:s,results:n}}function Vw(r,e){const t=nt(),i=In([]),s=U(()=>{const c=t.value.fuse.options.keys||[];return c.length===0?["title","tags","categories","excerpt"]:c}),n={fuseOptions:{includeMatches:!0,findAllMatches:!0,...t.value.fuse.options,keys:s.value}},o=U(()=>({...n,...e})),{fuse:a,results:l}=jw(r,i,o);async function u(c){const d=c||(t.value.fuse.dataPath.startsWith("http")?t.value.fuse.dataPath:`/${t.value.fuse.dataPath}`),f=await(await fetch(d)).json();Array.isArray(f)&&(i.value=f)}return{fuse:a,results:l,fetchFuseListData:u}}function Ww(){const r=V(!1),e=Gi(),t=bg(),i=U(()=>e.value.sidebar!==!1&&t.value!=="home");function s(){r.value=!0}function n(){r.value=!1}function o(){r.value?n():s()}return{isOpen:r,hasSidebar:i,open:s,close:n,toggle:o}}function Ig(){const r=Ma();return U(()=>{const e=new Map;return r.postList.forEach(t=>{if(t.tags){let i;typeof t.tags=="string"?i=[t.tags]:i=t.tags,i.forEach(s=>{if(e.has(s)){const n=e.get(s);e.set(s,{...n,count:n.count+1})}else e.set(s,{count:1})})}}),e})}function Xw(r={offset:100}){if(!yr)return{percentage:V(0),show:V(!1)};const{y:e}=Hx(),t=U(()=>e.value/(document.body.scrollHeight-window.innerHeight)),i=U(()=>e.value>r.offset);return{percentage:t,show:i,backToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}}const Yw={};function qw(r,e){const t=it("RouterView");return R(),ae(t)}const Kw=li(Yw,[["render",qw]]),Zw={class:"vc-site-live-time"},Jw={"mx-1":""},Qw={"mx-1":""},e1={"mx-1":""},t1={"mx-1":""},r1=ee({__name:"VCLiveTime",props:{startTime:{}},setup(r){const e=r,{t}=st(),i=V(0),s=V(0),n=V(0),o=V(0);function a(){const l=pr(e.startTime),c=pr().diff(l)/1e3;i.value=Math.floor(c/60/60/24),s.value=Math.floor(c/60/60%24),n.value=Math.floor(c/60%60),o.value=Math.floor(c%60)}return Yt(()=>{setInterval(a,1e3)}),(l,u)=>(R(),N("div",Zw,[rt(l.$slots,"live-time-before"),k("span",Jw,de(I(t)("time.day",i.value)),1),k("span",Qw,de(I(t)("time.hour",s.value)),1),k("span",e1,de(I(t)("time.minute",n.value)),1),k("span",t1,de(I(t)("time.second",o.value)),1),rt(l.$slots,"live-time-after")]))}}),i1={},s1={class:"yun-cloud"};function n1(r,e){return R(),N("div",s1,e[0]||(e[0]=[c_('<svg class="waves" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" fill="var(--yun-c-cloud)"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg>',1)]))}const o1=li(i1,[["render",n1]]);function ci(){const r=Bn();return U(()=>r.value.themeConfig)}function LL(r,e=!1){const t=V();return xe(()=>r,async()=>{let i;if(typeof r=="string"){if(!yr)return;i=await fetch(r).then(s=>s.json())||[]}else i=r;t.value=e?Array.from(i).sort(()=>Math.random()-.5):i},{immediate:!0}),{data:t}}function a1(r,e){const t=V(!1);function i(s){s.key.toLowerCase()===r.toLowerCase()&&(s.metaKey||s.ctrlKey)&&(s.preventDefault(),e())}return Ct("keydown",i),{isHotKeyActive:t}}function Ze(r,e){l1(r)&&(r="100%");const t=u1(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function qn(r){return Math.min(1,Math.max(0,r))}function l1(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function u1(r){return typeof r=="string"&&r.indexOf("%")!==-1}function Mg(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Kn(r){return Number(r)<=1?`${Number(r)*100}%`:r}function Ri(r){return r.length===1?"0"+r:String(r)}function c1(r,e,t){return{r:Ze(r,255)*255,g:Ze(e,255)*255,b:Ze(t,255)*255}}function pd(r,e,t){r=Ze(r,255),e=Ze(e,255),t=Ze(t,255);const i=Math.max(r,e,t),s=Math.min(r,e,t);let n=0,o=0;const a=(i+s)/2;if(i===s)o=0,n=0;else{const l=i-s;switch(o=a>.5?l/(2-i-s):l/(i+s),i){case r:n=(e-t)/l+(e<t?6:0);break;case e:n=(t-r)/l+2;break;case t:n=(r-e)/l+4;break}n/=6}return{h:n,s:o,l:a}}function ul(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function h1(r,e,t){let i,s,n;if(r=Ze(r,360),e=Ze(e,100),t=Ze(t,100),e===0)s=t,n=t,i=t;else{const o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=ul(a,o,r+1/3),s=ul(a,o,r),n=ul(a,o,r-1/3)}return{r:i*255,g:s*255,b:n*255}}function md(r,e,t){r=Ze(r,255),e=Ze(e,255),t=Ze(t,255);const i=Math.max(r,e,t),s=Math.min(r,e,t);let n=0;const o=i,a=i-s,l=i===0?0:a/i;if(i===s)n=0;else{switch(i){case r:n=(e-t)/a+(e<t?6:0);break;case e:n=(t-r)/a+2;break;case t:n=(r-e)/a+4;break}n/=6}return{h:n,s:l,v:o}}function d1(r,e,t){r=Ze(r,360)*6,e=Ze(e,100),t=Ze(t,100);const i=Math.floor(r),s=r-i,n=t*(1-e),o=t*(1-s*e),a=t*(1-(1-s)*e),l=i%6,u=[t,o,n,n,a,t][l],c=[a,t,t,o,n,n][l],d=[n,n,a,t,t,o][l];return{r:u*255,g:c*255,b:d*255}}function gd(r,e,t,i){const s=[Ri(Math.round(r).toString(16)),Ri(Math.round(e).toString(16)),Ri(Math.round(t).toString(16))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function f1(r,e,t,i,s){const n=[Ri(Math.round(r).toString(16)),Ri(Math.round(e).toString(16)),Ri(Math.round(t).toString(16)),Ri(m1(i))];return s&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))&&n[3].startsWith(n[3].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}function p1(r,e,t,i){const s=r/100,n=e/100,o=t/100,a=i/100,l=255*(1-s)*(1-a),u=255*(1-n)*(1-a),c=255*(1-o)*(1-a);return{r:l,g:u,b:c}}function yd(r,e,t){let i=1-r/255,s=1-e/255,n=1-t/255,o=Math.min(i,s,n);return o===1?(i=0,s=0,n=0):(i=(i-o)/(1-o)*100,s=(s-o)/(1-o)*100,n=(n-o)/(1-o)*100),o*=100,{c:Math.round(i),m:Math.round(s),y:Math.round(n),k:Math.round(o)}}function m1(r){return Math.round(parseFloat(r)*255).toString(16)}function vd(r){return pt(r)/255}function pt(r){return parseInt(r,16)}function g1(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}const Ru={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function y1(r){let e={r:0,g:0,b:0},t=1,i=null,s=null,n=null,o=!1,a=!1;return typeof r=="string"&&(r=b1(r)),typeof r=="object"&&(dt(r.r)&&dt(r.g)&&dt(r.b)?(e=c1(r.r,r.g,r.b),o=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):dt(r.h)&&dt(r.s)&&dt(r.v)?(i=Kn(r.s),s=Kn(r.v),e=d1(r.h,i,s),o=!0,a="hsv"):dt(r.h)&&dt(r.s)&&dt(r.l)?(i=Kn(r.s),n=Kn(r.l),e=h1(r.h,i,n),o=!0,a="hsl"):dt(r.c)&&dt(r.m)&&dt(r.y)&&dt(r.k)&&(e=p1(r.c,r.m,r.y,r.k),o=!0,a="cmyk"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=Mg(t),{ok:o,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}const v1="[-\\+]?\\d+%?",_1="[-\\+]?\\d*\\.\\d+%?",Xr="(?:"+_1+")|(?:"+v1+")",cl="[\\s|\\(]+("+Xr+")[,|\\s]+("+Xr+")[,|\\s]+("+Xr+")\\s*\\)?",Zn="[\\s|\\(]+("+Xr+")[,|\\s]+("+Xr+")[,|\\s]+("+Xr+")[,|\\s]+("+Xr+")\\s*\\)?",wt={CSS_UNIT:new RegExp(Xr),rgb:new RegExp("rgb"+cl),rgba:new RegExp("rgba"+Zn),hsl:new RegExp("hsl"+cl),hsla:new RegExp("hsla"+Zn),hsv:new RegExp("hsv"+cl),hsva:new RegExp("hsva"+Zn),cmyk:new RegExp("cmyk"+Zn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function b1(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;let e=!1;if(Ru[r])r=Ru[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let t=wt.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=wt.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=wt.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=wt.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=wt.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=wt.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=wt.cmyk.exec(r),t?{c:t[1],m:t[2],y:t[3],k:t[4]}:(t=wt.hex8.exec(r),t?{r:pt(t[1]),g:pt(t[2]),b:pt(t[3]),a:vd(t[4]),format:e?"name":"hex8"}:(t=wt.hex6.exec(r),t?{r:pt(t[1]),g:pt(t[2]),b:pt(t[3]),format:e?"name":"hex"}:(t=wt.hex4.exec(r),t?{r:pt(t[1]+t[1]),g:pt(t[2]+t[2]),b:pt(t[3]+t[3]),a:vd(t[4]+t[4]),format:e?"name":"hex8"}:(t=wt.hex3.exec(r),t?{r:pt(t[1]+t[1]),g:pt(t[2]+t[2]),b:pt(t[3]+t[3]),format:e?"name":"hex"}:!1))))))))))}function dt(r){return typeof r=="number"?!Number.isNaN(r):wt.CSS_UNIT.test(r)}class Le{constructor(e="",t={}){if(e instanceof Le)return e;typeof e=="number"&&(e=g1(e)),this.originalInput=e;const i=y1(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=t.format??i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3}getLuminance(){const e=this.toRgb();let t,i,s;const n=e.r/255,o=e.g/255,a=e.b/255;return n<=.03928?t=n/12.92:t=Math.pow((n+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*s}getAlpha(){return this.a}setAlpha(e){return this.a=Mg(e),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:e}=this.toHsl();return e===0}toHsv(){const e=md(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){const e=md(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?`hsv(${t}, ${i}%, ${s}%)`:`hsva(${t}, ${i}%, ${s}%, ${this.roundA})`}toHsl(){const e=pd(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){const e=pd(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?`hsl(${t}, ${i}%, ${s}%)`:`hsla(${t}, ${i}%, ${s}%, ${this.roundA})`}toHex(e=!1){return gd(this.r,this.g,this.b,e)}toHexString(e=!1){return"#"+this.toHex(e)}toHex8(e=!1){return f1(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return"#"+this.toHex8(e)}toHexShortString(e=!1){return this.a===1?this.toHexString(e):this.toHex8String(e)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?`rgb(${e}, ${t}, ${i})`:`rgba(${e}, ${t}, ${i}, ${this.roundA})`}toPercentageRgb(){const e=t=>`${Math.round(Ze(t,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){const e=t=>Math.round(Ze(t,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toCmyk(){return{...yd(this.r,this.g,this.b)}}toCmykString(){const{c:e,m:t,y:i,k:s}=yd(this.r,this.g,this.b);return`cmyk(${e}, ${t}, ${i}, ${s})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const e="#"+gd(this.r,this.g,this.b,!1);for(const[t,i]of Object.entries(Ru))if(e===i)return t;return!1}toString(e){const t=!!e;e=e??this.format;let i=!1;const s=this.a<1&&this.a>=0;return!t&&s&&(e.startsWith("hex")||e==="name")?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),e==="cmyk"&&(i=this.toCmykString()),i||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new Le(this.toString())}lighten(e=10){const t=this.toHsl();return t.l+=e/100,t.l=qn(t.l),new Le(t)}brighten(e=10){const t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new Le(t)}darken(e=10){const t=this.toHsl();return t.l-=e/100,t.l=qn(t.l),new Le(t)}tint(e=10){return this.mix("white",e)}shade(e=10){return this.mix("black",e)}desaturate(e=10){const t=this.toHsl();return t.s-=e/100,t.s=qn(t.s),new Le(t)}saturate(e=10){const t=this.toHsl();return t.s+=e/100,t.s=qn(t.s),new Le(t)}greyscale(){return this.desaturate(100)}spin(e){const t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new Le(t)}mix(e,t=50){const i=this.toRgb(),s=new Le(e).toRgb(),n=t/100,o={r:(s.r-i.r)*n+i.r,g:(s.g-i.g)*n+i.g,b:(s.b-i.b)*n+i.b,a:(s.a-i.a)*n+i.a};return new Le(o)}analogous(e=6,t=30){const i=this.toHsl(),s=360/t,n=[this];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,n.push(new Le(i));return n}complement(){const e=this.toHsl();return e.h=(e.h+180)%360,new Le(e)}monochromatic(e=6){const t=this.toHsv(),{h:i}=t,{s}=t;let{v:n}=t;const o=[],a=1/e;for(;e--;)o.push(new Le({h:i,s,v:n})),n=(n+a)%1;return o}splitcomplement(){const e=this.toHsl(),{h:t}=e;return[this,new Le({h:(t+72)%360,s:e.s,l:e.l}),new Le({h:(t+216)%360,s:e.s,l:e.l})]}onBackground(e){const t=this.toRgb(),i=new Le(e).toRgb(),s=t.a+i.a*(1-t.a);return new Le({r:(t.r*t.a+i.r*i.a*(1-t.a))/s,g:(t.g*t.a+i.g*i.a*(1-t.a))/s,b:(t.b*t.a+i.b*i.a*(1-t.a))/s,a:s})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(e){const t=this.toHsl(),{h:i}=t,s=[this],n=360/e;for(let o=1;o<e;o++)s.push(new Le({h:(i+o*n)%360,s:t.s,l:t.l}));return s}equals(e){const t=new Le(e);return this.format==="cmyk"||t.format==="cmyk"?this.toCmykString()===t.toCmykString():this.toRgbString()===t.toRgbString()}}const x1={flex:"~ col",class:"relative yun-footer va-footer px-4 py-4 pt-0 text-$va-c-text-light w-full mt-14",bg:"white dark:$va-c-bg-soft",text:"center sm"},w1={key:1,class:"beian",m:"y-2"},T1={href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"},A1={class:"copyright flex justify-center items-center gap-2",p:"1"},S1=["href","title"],E1={key:2,class:"powered",m:"2"},C1=["innerHTML"],P1=["href","title"],R1={class:"ml-1 op-60"},I1=ee({__name:"YunFooter",setup(r){const{isDark:e}=uh(),t=U(()=>e.value?{"--gradient-from":"0 0 0","--gradient-to":"0 0 0"}:{"--gradient-from":"161 196 253","--gradient-to":"194 233 251"}),{t:i}=st(),s=Bn(),n=nt(),o=ci(),a=new Date().getFullYear(),l=U(()=>a===o.value.footer.since),u=U(()=>i("footer.powered",[`<a href="${zs.repository.url}" target="_blank" rel="noopener">Valaxy</a> <span class="op-60">v${zs.version}</span>`])),c=U(()=>o.value.footer.icon||{url:zs.repository.url,name:"i-ri-cloud-line",title:zs.name});return(d,h)=>{var p,m,g;const f=o1;return R(),N("footer",x1,[(p=I(o).footer.cloud)!=null&&p.enable?(R(),ae(f,{key:0,class:"absolute top--10 left-0 right-0"})):J("v-if",!0),(m=I(o).footer.beian)!=null&&m.enable&&I(o).footer.beian.icp?(R(),N("div",w1,[k("a",T1,de(I(o).footer.beian.icp),1)])):J("v-if",!0),k("div",A1,[k("span",null,[h[0]||(h[0]=nr(" © ")),l.value?J("v-if",!0):(R(),N(Be,{key:0},[nr(de(I(o).footer.since)+" - ",1)],64)),nr(" "+de(I(a)),1)]),(g=I(o).footer.icon)!=null&&g.enable?(R(),N("a",{key:0,class:we(["inline-flex",I(o).footer.icon.animated?"animate-pulse":""]),href:c.value.url,target:"_blank",title:c.value.title},[k("div",{class:we(c.value.name)},null,2)],10,S1)):J("v-if",!0),k("span",null,de(I(n).author.name),1)]),I(o).footer.powered?(R(),N("div",E1,[k("span",{innerHTML:u.value},null,8,C1),h[2]||(h[2]=k("span",{"mx-1":""},"|",-1)),k("span",null,[k("span",null,de(I(i)("footer.theme")),1),h[1]||(h[1]=k("span",{"mx-1":""},"-",-1)),k("a",{href:I(o).pkg.repository.url,title:I(o).pkg.name,target:"_blank"},de(h_(I(s).theme)),9,P1),k("span",R1,"v"+de(I(o).pkg.version),1)])])):J("v-if",!0),rt(d.$slots,"default"),k("div",{class:"yun-footer-gradient",style:Zr(t.value)},null,4)])}}}),M1=ee({__name:"YunFooter",setup(r){return Nx("https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"),(e,t)=>{const i=r1;return R(),ae(I1,null,{default:_e(()=>[J(" 自定义页脚内容 "),t[2]||(t[2]=k("div",null,[nr("本站总访问量 "),k("span",{id:"busuanzi_value_site_pv"}),nr(" 次")],-1)),t[3]||(t[3]=k("div",null,[nr("本站访客数 "),k("span",{id:"busuanzi_value_site_uv"}),nr(" 人次")],-1)),X(i,{"start-time":"2025-03-15"},{"live-time-before":_e(()=>t[0]||(t[0]=[k("span",null,"本站已运行",-1)])),"live-time-after":_e(()=>t[1]||(t[1]=[k("span",null,null,-1)])),_:1}),t[4]||(t[4]=k("div",{class:"bootfmore"},null,-1))]),_:1})}}}),_t=Aa("yun-app",()=>{const r=ci(),e=U(()=>r.value.type==="strato"),t=U(()=>r.value.type==="nimbo"),[i,s]=Io(),[n,o]=Io(),[a,l]=Io();return{size:Gx(),leftSidebar:{isOpen:i,toggle:s},rightSidebar:{isOpen:n,toggle:o},fullscreenMenu:{isOpen:a,toggle:l},scrollY:yr?Fx(window).y:0,isStrato:e,isNimbo:t}}),k1=ee({__name:"YunLayoutWrapper",setup(r){const e=_t(),t=U(()=>e.isNimbo?"mt-12 md:mt-24":"mt-12");return(i,s)=>(R(),N("div",{flex:"~",class:we(["w-full m-auto justify-center items-start gap-4",t.value])},[rt(i.$slots,"default")],2))}}),D1=["lang"],O1=["href"],L1=ee({__name:"YunOutlineItem",props:{headers:{},onClick:{type:Function},root:{type:Boolean}},setup(r){const{locale:e}=st();return(t,i)=>{const s=it("YunOutlineItem",!0);return R(),N("ul",{class:we(t.root?"root":"nested")},[(R(!0),N(Be,null,Ui(t.headers,({children:n,link:o,title:a,lang:l})=>(R(),N("li",{key:o,class:"va-toc-item",lang:l||I(e)},[k("a",{class:"outline-link",href:o,onClick:i[0]||(i[0]=(...u)=>t.onClick&&t.onClick(...u))},de(a),9,O1),n!=null&&n.length?(R(),ae(s,{key:0,headers:n,"on-click":t.onClick},null,8,["headers","on-click"])):J("v-if",!0)],8,D1))),128))],2)}}}),B1=li(L1,[["__scopeId","data-v-699db71a"]]),F1={class:"content"},N1={class:"outline-title"},$1={"aria-labelledby":"doc-outline-aria-label"},U1=ee({__name:"YunOutline",setup(r){const{t:e}=st(),t=V(),i=V(),{headers:s,handleClick:n}=rw();return tw(t,i),(o,a)=>{const l=B1;return Ta((R(),N("div",{ref_key:"containerRef",ref:t},[k("div",F1,[k("div",N1,de(I(e)("theme.outlineTitle")),1),k("div",{ref_key:"marker",ref:i,class:"outline-marker"},null,512),k("nav",$1,[a[0]||(a[0]=k("span",{id:"doc-outline-aria-label",class:"visually-hidden"}," Table of Contents for current page ",-1)),X(l,{class:"va-toc relative z-1 css-i18n-toc",headers:I(s),"on-click":I(n),root:""},null,8,["headers","on-click"])])])],512)),[[sm,I(s).length]])}}}),H1=li(U1,[["__scopeId","data-v-6dc67c73"]]),G1={class:"w-full",flex:"~ col","pb-2":""},z1={m:"t-6 b-2",font:"serif black"},j1={key:1,class:"custom-container"},V1=ee({__name:"YunAside",setup(r){const e=Gi(),{t}=st(),i=_t(),s=V(!1),n=U(()=>e.value.toc!==!1),o=V(!1);return xe(()=>[i.rightSidebar.isOpen,i.size.isXl],async()=>{await ri(),o.value=!i.size.isXl,s.value=(i.rightSidebar.isOpen||!o.value)&&e.value.aside!==!1},{immediate:!0}),(a,l)=>{const u=H1;return R(),N("aside",{flex:"~ col",class:we(["va-card yun-aside sticky top-0 lg:top-$yun-margin-top min-h-sm",{float:o.value,show:s.value,open:I(i).rightSidebar.isOpen}]),text:"center",overflow:"auto"},[X(Hi,{name:"fade",delay:100,persisted:""},{default:_e(()=>[Ta(k("div",G1,[n.value?(R(),N(Be,{key:0},[k("h2",z1,de(I(t)("sidebar.toc")),1),X(u)],64)):J("v-if",!0),l[0]||(l[0]=k("div",{class:"flex-grow"},null,-1)),a.$slots.default?(R(),N("div",j1,[rt(a.$slots,"default")])):J("v-if",!0)],512),[[sm,s.value]])]),_:3})],2)}}}),W1={key:0,class:"yun-overlay z-$yun-z-overlay"},kg=ee({__name:"YunOverlay",props:{show:{type:Boolean,default:!1}},setup(r){return(e,t)=>(R(),ae(Hi,{name:"fade"},{default:_e(()=>[e.show?(R(),N("div",W1)):J("v-if",!0)]),_:1}))}}),X1=ee({__name:"YunLayoutRight",setup(r){const e=Gi(),t=_t();return(i,s)=>{const n=kg,o=V1;return R(),N(Be,null,[I(e).aside!==!1?(R(),N("button",{key:0,class:"xl:hidden toc-btn shadow-md fixed yun-icon-btn z-20 bg-$va-c-bg-soft",opacity:"75",right:"4",bottom:"19",onClick:s[0]||(s[0]=a=>I(t).rightSidebar.toggle())},s[2]||(s[2]=[k("div",{"i-ri-file-list-line":""},null,-1)]))):J("v-if",!0),X(n,{show:I(t).rightSidebar.isOpen,onClick:s[1]||(s[1]=a=>I(t).rightSidebar.toggle())},null,8,["show"]),X(o)],64)}}}),Y1={class:"yun-card flex-center rounded",flex:"col","min-h":"100px",bg:"$va-c-bg-light"},q1=["src"],K1={key:1,class:"yun-card-header"},Z1={key:2,class:"yun-card-content",w:"full"},Dg=ee({__name:"YunCard",props:{cover:{}},setup(r){return(e,t)=>(R(),N("div",Y1,[e.cover?(R(),N("img",{key:0,width:"640",height:"360",class:"object-cover select-none",h:"64 md:sm",w:"full",src:e.cover,loading:"lazy"},null,8,q1)):J("v-if",!0),e.$slots.header?(R(),N("div",K1,[k("header",null,[rt(e.$slots,"header")])])):J("v-if",!0),rt(e.$slots,"default"),e.$slots.content?(R(),N("div",Z1,[rt(e.$slots,"content")])):J("v-if",!0)]))}}),J1=ee({__name:"YunAdBoard",setup(r){const{t:e}=st();return(t,i)=>{const s=it("RouterLink"),n=Dg;return R(),ae(n,null,{default:_e(()=>[X(s,{to:"/about/adb"},{default:_e(()=>[nr(de(I(e)("post.adb")),1)]),_:1})]),_:1})}}}),Q1=["href"],eT={key:0,class:"icon-link inline-block","i-ri-arrow-right-up-line":""},Nn=ee({__name:"AppLink",props:{showExternalIcon:{type:Boolean},to:{},href:{}},setup(r){const e=r,t=U(()=>e.href||e.to||"#"),i=U(()=>typeof t.value=="string"&&t.value.startsWith("http"));return(s,n)=>{const o=it("RouterLink");return i.value?(R(),N("a",pn({key:0},s.$attrs,{href:t.value,target:"_blank"}),[rt(s.$slots,"default"),s.showExternalIcon?(R(),N("div",eT)):J("v-if",!0)],16,Q1)):(R(),ae(o,pn({key:1},s.$attrs,{to:t.value}),{default:_e(()=>[rt(s.$slots,"default")]),_:3},16,["to"]))}}}),tT={class:"links flex-center"},hh=ee({__name:"YunSidebarLinks",setup(r){const e=ci();return(t,i)=>{const s=Nn;return R(),N("div",tT,[(R(!0),N(Be,null,Ui(I(e).pages,(n,o)=>(R(),ae(s,{key:o,class:"link-item yun-icon-btn","inline-flex":"",to:n.url,title:n.name,style:Zr(`color:${n.color}`)},{default:_e(()=>[k("div",{class:we([n.icon,"icon size-6"])},null,2)]),_:2},1032,["to","title","style"]))),128))])}}}),rT=["href","title"],iT=ee({__name:"YunSocialLinkItem",props:{social:{}},setup(r){const e=r,t=Or(),i=U(()=>t.isDark&&e.social.color==="black"?"white":e.social.color);return(s,n)=>(R(),N("a",{class:"links-of-author-item yun-icon-btn",rel:"noopener",href:s.social.link,title:s.social.name,target:"_blank",style:Zr(`color:${i.value}`)},[k("div",{class:we(["icon",s.social.icon])},null,2)],12,rT))}}),sT={class:"links-of-author"},dh=ee({__name:"YunSocialLinks",setup(r){const e=nt();return(t,i)=>{const s=iT;return R(),N("div",sT,[(R(!0),N(Be,null,Ui(I(e).social,(n,o)=>(R(),ae(s,{key:o,social:n},null,8,["social"]))),128))])}}}),nT={flex:"~ col",class:"text-$va-c-text inline-flex-center gap-1"},oT={class:"text-xs"},aT={class:"count text-base text-black/80 dark:text-white/80"},lT=ee({__name:"YunPostClassifyNavItem",props:{activeIcon:{},icon:{},title:{},total:{},to:{}},setup(r){const e=r,t=Nr(),i=U(()=>t.path===e.to),s=U(()=>i.value&&e.activeIcon?e.activeIcon:e.icon);return(n,o)=>{const a=it("RouterLink");return R(),ae(a,{flex:"~ col center",class:"post-classify-nav-item gap-1 w-20 p-2 rounded transition op-80",to:n.to,title:n.title,hover:"bg-$va-c-bg-soft op-100"},{default:_e(()=>[k("div",nT,[k("div",{class:we(["text-2xl",s.value])},null,2),k("span",oT,de(n.title),1)]),k("span",aT,de(n.total),1)]),_:1},8,["to","title"])}}}),uT={class:"site-nav","text-xl":"","mt-2":""},Og=ee({__name:"YunPostsInfo",setup(r){const{t:e}=st(),t=Ma(),i=dg(),s=Ig();return(n,o)=>{const a=lT;return R(),N("nav",uT,[X(a,{to:"/archives/",icon:"i-ri-archive-line","active-icon":"i-ri-archive-fill",title:I(e)("menu.archives"),total:I(t).postList.length},null,8,["title","total"]),X(a,{to:"/categories/",icon:"i-ri-folder-2-line","active-icon":"i-ri-folder-2-fill",title:I(e)("menu.categories"),total:Array.from(I(i).children).length},null,8,["title","total"]),X(a,{to:"/tags/",icon:"i-ri-price-tag-3-line","active-icon":"i-ri-price-tag-3-fill",title:I(e)("menu.tags"),total:Array.from(I(s)).length},null,8,["title","total"])])}}}),cT={},hT={class:"yun-gradient-line"};function dT(r,e){return R(),N("div",hT)}const Lg=li(cT,[["render",dT]]),fT=ee({__name:"YunSiteTitle",setup(r){const e=Nc(),t=nt(),i=ci();return(s,n)=>{const o=it("RouterLink");return I(e).hasRoute("/about/site")?(R(),ae(o,{key:0,to:"/about/site",class:we(["site-name text-lg leading-loose",I(i).banner.siteNameClass])},{default:_e(()=>[nr(de(I(t).title),1)]),_:1},8,["class"])):(R(),N("span",{key:1,class:we(["site-name text-lg leading-loose",I(i).banner.siteNameClass])},de(I(t).title),3))}}}),pT=ee({__name:"YunAuthorName",setup(r){const e=nt();return(t,i)=>{const s=it("RouterLink");return R(),ae(s,{class:"site-author-name font-black font-serif text-$va-c-text op-80 hover:op-100 flex-center",to:"/about"},{default:_e(()=>[nr(de(I(e).author.name),1)]),_:1})}}}),mT={class:"relative yun-author-avatar"},gT=["src"],yT=["title"],vT=ee({__name:"YunAuthorAvatar",setup(r){const e=nt();return(t,i)=>(R(),N("div",mT,[i[0]||(i[0]=k("div",{class:"absolute size-full avatar-bg bg-image-$yun-home-hero-image-background-image filter-blur-2xl op-30"},null,-1)),k("img",{class:"rounded-full size-full bg-white dark:bg-white/20 p-1 m-0 absolute",src:I(e).author.avatar,alt:"avatar"},null,8,gT),I(e).author.status.emoji?(R(),N("span",{key:0,class:"site-author-status absolute",title:I(e).author.status.message||void 0},de(I(e).author.status.emoji),9,yT)):J("v-if",!0)]))}}),_T={class:"site-info gap-1 items-center",flex:"~ col",p:"t-8"},bT={key:0,class:"site-subtitle block",text:"xs"},xT={key:1,class:"site-description"},fh=ee({__name:"YunSiteInfo",setup(r){const e=nt();return(t,i)=>{const s=vT,n=it("RouterLink"),o=pT,a=fT;return R(),N("div",_T,[X(n,{class:"site-author-avatar inline-flex-center",to:"/about"},{default:_e(()=>[X(s)]),_:1}),X(o),X(a),I(e).subtitle?(R(),N("h4",bT,de(I(e).subtitle),1)):J("v-if",!0),I(e).description?(R(),N("div",xT,de(I(e).description),1)):J("v-if",!0)])}}}),wT=ee({__name:"YunSidebarCard",setup(r){return(e,t)=>{const i=fh,s=Lg,n=Og,o=dh,a=hh,l=Dg;return R(),ae(l,{class:"p-4 min-h-sm",flex:"~ col gap-1"},{default:_e(()=>[X(i,{class:"text-center"}),X(s,{class:"my-2 op-20"}),X(n),X(s,{class:"my-2 op-20"}),X(o),X(s,{class:"my-2 op-20"}),X(a)]),_:1})}}}),TT={key:0,flex:"~ col",class:"gap-4 sticky top-$yun-margin-top w-80"},AT=ee({__name:"YunLayoutLeft",setup(r){const e=_t();return(t,i)=>{const s=wT,n=J1;return I(e).size.isLg?(R(),N("div",TT,[X(s),X(n)])):J("v-if",!0)}}}),ST=ee({__name:"default",setup(r){return(e,t)=>{const i=AT,s=it("RouterView"),n=X1,o=k1,a=M1;return R(),N(Be,null,[X(o,null,{default:_e(()=>[X(i),X(s),X(n)]),_:1}),X(a)],64)}}}),_d={404:()=>Ne(()=>import("./404.DT8GHgK1.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10])),default:Kw,empty:()=>Ne(()=>import("./empty.Cx7ZiHZE.js"),__vite__mapDeps([11,2,3])),post:()=>Ne(()=>import("./post.Fi2lpGM_.js"),__vite__mapDeps([12,2,3])),404:()=>Ne(()=>import("./404.wfzOfVoE.js"),__vite__mapDeps([13,2,3,4,5,6,7,8,9,14])),albums:()=>Ne(()=>import("./albums.ZhA9Sk6l.js"),__vite__mapDeps([15,2,3,16,6,17,18,7,5,8,9,19])),archives:()=>Ne(()=>import("./archives.CtM31GGf.js"),__vite__mapDeps([20,21,2,3,6,7,22,18,5,8,9])),categories:()=>Ne(()=>import("./categories.DXE3lkzl.js"),__vite__mapDeps([23,21,2,3,6,7,22,5,24,25,18,8,9])),collection:()=>Ne(()=>import("./collection.BFlp9W3r.js"),__vite__mapDeps([26,2,3,5,6,7,8,9])),collections:()=>Ne(()=>import("./collections.C9DnTNGZ.js"),__vite__mapDeps([27,2,3,6,5,7,8,9])),default:ST,gallery:()=>Ne(()=>import("./gallery.RWNAxWmZ.js").then(r=>r.g),__vite__mapDeps([28,3,2,6,18,5,7])),home:()=>Ne(()=>import("./home.cf6Kv5iK.js"),__vite__mapDeps([29,2,3,6,17,5,7,8,9,30])),post:()=>Ne(()=>import("./post.CdhpDE_u.js"),__vite__mapDeps([31,2,3,7,32,6,33,34,5,16,17,35,8,9,36])),posts:()=>Ne(()=>import("./posts.BJCqi7wD.js"),__vite__mapDeps([37,38,2,3,6,5,34,7,16,17,35,39,40,8,9])),projects:()=>Ne(()=>import("./projects.DY5K7gKJ.js"),__vite__mapDeps([41,42,2,3,43,6,5,7,44,32,33,25,8,9,45])),tags:()=>Ne(()=>import("./tags.CpUs5ivz.js"),__vite__mapDeps([46,21,2,3,6,7,22,24,25,18,5,8,9]))};function ET(r){function e(t,i=!0){return t.map(s=>{var n,o,a,l,u,c;if(((n=s.children)==null?void 0:n.length)>0&&(s.children=e(s.children,!1)),i){if(!s.component&&((o=s.children)==null?void 0:o.find(h=>{var f;return(h.path===""||h.path==="/")&&((f=h.meta)==null?void 0:f.isLayout)})))return s;if(((a=s.meta)==null?void 0:a.layout)!==!1)return{path:s.path,component:_d[((l=s.meta)==null?void 0:l.layout)||"default"],children:s.path==="/"?[s]:[{...s,path:""}],meta:{isLayout:!0}}}return(u=s.meta)!=null&&u.layout?{path:s.path,component:_d[(c=s.meta)==null?void 0:c.layout],children:[{...s,path:""}],meta:{isLayout:!0}}:s})}return e(r)}function CT(r){return document.readyState==="loading"?new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>e(r))}):Promise.resolve(r)}const PT=ee({setup(r,{slots:e}){const t=V(!1);return Yt(()=>t.value=!0),()=>t.value?e.default&&e.default({}):e.placeholder&&e.placeholder({})}});function RT(r){try{return JSON.parse(r||"{}")}catch(e){return console.error("[SSG] On state deserialization -",e,r),{}}}function IT(r,e,t,i={}){const{transformState:s,registerComponents:n=!0,useHead:o=!0,rootContainer:a="#app",hydration:l=!1}=i,u=typeof window<"u";async function c(d=!1,h){const f=d&&!l?nm(r):d_(r);let p;o&&(p=tx(),f.use(p));const m=S_({history:d?E_(e.base):C_(e.base),...e}),{routes:g}=e;n&&f.component("ClientOnly",PT);const v=[],b={app:f,head:p,isClient:u,router:m,routes:g,onSSRAppRendered:d?()=>{}:A=>v.push(A),triggerOnSSRAppRendered:()=>Promise.all(v.map(A=>A())),initialState:{},transformState:s,routePath:h};d&&(await CT(),b.initialState=(s==null?void 0:s(window.__INITIAL_STATE__||{}))||RT(window.__INITIAL_STATE__)),await(t==null?void 0:t(b)),f.use(m);let w,S=!0;if(m.beforeEach((A,C,E)=>{(S||w&&w===A.path)&&(S=!1,w=A.path,A.meta.state=b.initialState),E()}),!d){const A=b.routePath??"/";m.push(A),await m.isReady(),b.initialState=m.currentRoute.value.meta.state||{}}const x=b.initialState;return{...b,initialState:x}}return u&&(async()=>{const{app:d,router:h}=await c(!0);await h.isReady(),d.mount(a,!0)})(),c}class MT{constructor(e){Ve(this,"live2dTips");Ve(this,"messageArray",[]);Ve(this,"messageTimer",null);this.live2dTips=e}init(){this.setupEvents(),this.setupSeasonalTips(this.live2dTips.seasons),this.welcomeMessage(),this.activityBasedMessages(),this.setupAdditionalEvents(),this.showMessage(this.generateReferrerMessage(),7e3,10)}setupEvents(){this.setupEventHandlers(this.live2dTips.mouseover,"mouseover"),this.setupEventHandlers(this.live2dTips.click,"click")}setupEventHandlers(e,t){e.forEach(i=>{window.addEventListener(t,s=>{const n=s.target;if(n.matches(i.selector)){const o=this.randomSelection(i.text).replace("{text}",n.textContent||"");this.showMessage(o,4e3,8)}})})}setupSeasonalTips(e){const t=new Date;e.forEach(i=>{const[s,n]=i.date.split("-"),[o,a]=s.split("/").map(Number),[l,u]=n?n.split("/").map(Number):[o,a],c=t.getMonth()+1,d=t.getDate();if(o<=c&&c<=l&&a<=d&&d<=u){let h=this.randomSelection(i.text);h=h.replace("{year}",String(t.getFullYear())),this.showMessage(h,7e3,100),this.messageArray.push(h)}})}randomSelection(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}welcomeMessage(){const e=new Date().getHours();let t;const i=this.live2dTips.time;for(let s=0;s<i.length;s++){const n=i[s].hour.split("-"),o=Number.parseInt(n[0]),a=Number.parseInt(n[1]);if(e>=o&&e<=a){const l=i[s].text;Array.isArray(l)?t=this.randomSelection(l):t=l;break}}setTimeout(()=>{this.showMessage(t,7e3,8)},3e3)}generateReferrerMessage(){var e,t;if(document.referrer!==""){const i=new URL(document.referrer),s=i.hostname.split(".")[1];if(location.hostname===i.hostname)return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`;{const n=i.search.split("&");return s==="baidu"?`Hello！来自 百度搜索 的朋友<br>你是搜索 <span>${(e=n.find(o=>o.startsWith("wd=")))==null?void 0:e.split("=")[1]}</span> 找到的我吗？`:s==="so"?`Hello！来自 360搜索 的朋友<br>你是搜索 <span>${(t=n.find(o=>o.startsWith("q=")))==null?void 0:t.split("=")[1]}</span> 找到的我吗？`:s==="google"?`Hello！来自 谷歌搜索 的朋友<br>欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`:`Hello！来自 <span>${i.hostname}</span> 的朋友`}}else return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`}activityBasedMessages(){let e=!1,t=null;const i=this.live2dTips.message.default;window.addEventListener("mousemove",()=>e=!0),window.addEventListener("keydown",()=>e=!0),setInterval(()=>{e?(e=!1,t!==null&&(clearInterval(t),t=null)):t||(t=setInterval(()=>{this.showMessage(this.randomSelection(i),6e3,9)},2e4))},1e3)}setupAdditionalEvents(){window.addEventListener("copy",()=>{this.showMessage(this.live2dTips.message.copy,6e3,9)}),window.addEventListener("visibilitychange",()=>{document.hidden||this.showMessage(this.live2dTips.message.visibilitychange,6e3,9)})}showHitokoto(){fetch("https://v1.hitokoto.cn").then(e=>e.json()).then(e=>{const t=`这句一言是 <span>${e.creator}</span>投稿的。`;this.showMessage(e.hitokoto,6e3,9),setTimeout(()=>{this.showMessage(t,4e3,9)},6e3)})}showMessage(e,t=3e3,i){const s=document.getElementById("live2d-tips");if(!e){s.classList.remove("live2d-tips-active");return}const n=sessionStorage.getItem("live2d-text");Number(n)<=i&&(this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null),sessionStorage.setItem("live2d-text",i.toString()),s.innerHTML=typeof e=="string"?e:this.randomSelection(e),s.classList.add("live2d-tips-active"),this.messageTimer=window.setTimeout(()=>{sessionStorage.removeItem("live2d-text"),s.classList.remove("live2d-tips-active")},t))}}function bd(r,e,t){let i="";{const s=new Date;s.setTime(s.getTime()+24*t*60*60*1e3),i=`; expires=${s.toUTCString()}`}document.cookie=`${encodeURIComponent(r)}=${encodeURIComponent(e)}${i}; path=/`}function xd(r){const e=`${encodeURIComponent(r)}=`,t=document.cookie.split(";");for(let i of t)if(i=i.trim(),i.startsWith(e))return decodeURIComponent(i.substring(e.length));return null}async function kT(r){try{const e=await fetch(r);if(!e.ok)throw new Error(`请求失败，状态码: ${e.status}`);return await e.json()}catch(e){return console.error(`请求或解析错误: ${e}`),null}}function Bg(r){const e=/https:\/\/cdn\.jsdelivr\.net\/gh\/([\w-]+)\/([\w-]+)\/([\w\-/]+)\/index\.json/,t=r.match(e);if(t){const i=t[1],s=t[2],n=t[3];return`https://api.github.com/repos/${i}/${s}/contents/${n}/textures`}else throw new Error("URL格式不正确")}async function Fg(r){const e=`live2d-cache-${r}`,t=`live2d-cacheTime-${r}`,i=24*60*60*1e3,s=localStorage.getItem(e),n=localStorage.getItem(t);if(s&&n&&Date.now()-Number.parseInt(n)<i)return JSON.parse(s);try{const o=await fetch(r);if(!o.ok)throw new Error(`Network request failed, status code: ${o.status}`);const a=await o.json();if(!Array.isArray(a))throw new TypeError("目录内容获取失败");const l=a.map(u=>u.name);return localStorage.setItem(e,JSON.stringify(l)),localStorage.setItem(t,Date.now().toString()),l}catch(o){throw console.error("获取文件名失败:",o),o}}const Ng="modelKey",$g="skinKey";async function Jn(r){const e=localStorage.getItem(Ng),t=localStorage.getItem($g),i=e||Object.keys(r)[0];let s=Number.parseInt(t||"0",10),n=r[i];if(!n){const a=Object.keys(r)[0];n=r[a],us(Object.keys(r)[0],0),console.warn(`缓存中的人物Key值"${i}"不存在，已初始化为默认值`)}s>=n.models.length&&(s=0,console.warn("皮肤索引越界，已初始化皮肤索引。如果这是由于您删除了某些人物 models 导致的，请放心忽略此消息"));const o=typeof n.models=="string"?await ko(n.models,s):n.models[s];return{currentCharacterKey:i,currentSkinIndex:s,availableModels:n,selectedModel:o}}function us(r,e){r!==null&&localStorage.setItem(Ng,r.toString()),e!==null&&localStorage.setItem($g,e.toString())}async function ko(r,e){const t=Bg(r);try{const i=await Fg(t),s=await kT(r);return s.url=r,s.textures[0]=`textures/${i[e]}`,us(null,e),s}catch(i){console.error(i)}}const DT={XiaoYun:{message:"来自云游君的小云 ~",models:["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/小云.model3.json"]},Tia:{message:"来自 Potion Maker 的 Tia 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},Pio:{message:"来自 Potion Maker 的 Pio 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"},ShizukuTalk:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-48/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-pajama/index.json"]},BiliBili22:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/22/index.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.cba-normal.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.newyear.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.school.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.2.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.high.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.low.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.valley.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.vdays.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.lover.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.spring.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.default.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.2.model.json"]},BiliBili33:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/33/index.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.cba-normal.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.newyear.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.school.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.high.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.low.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.valley.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.vdays.json","https://summerscar.me/live2dDemo/assets/33.default/model.2018.lover.json","https://summerscar.me/live2dDemo/assets/33.defaultmodel.2018.spring.json"]}},OT={mouseover:[{selector:"#live2d-canvas",text:["干嘛呢你，快把手拿开～～","鼠…鼠标放错地方了！","你要干嘛呀？","喵喵喵？","怕怕(ノ≧∇≦)ノ","非礼呀！救命！","这样的话，只能使用武力了！","我要生气了哦","不要动手动脚的！","真…真的是不知羞耻！","Hentai！"]},{selector:"#live2d-tool-hitokoto",text:["猜猜我要说些什么？","我从青蛙王子那里听到了不少人生经验。"]},{selector:"#live2d-tool-asteroids",text:["要不要来玩飞机大战？","这个按钮上写着「不要点击」。","怎么，你想来和我玩个游戏？","听说这样可以蹦迪！"]},{selector:"#live2d-tool-switch-model",text:["你是不是不爱人家了呀，呜呜呜～","要见见我的姐姐嘛？","想要看我妹妹嘛？","要切换看板娘吗？"]},{selector:"#live2d-tool-switch-texture",text:["喜欢换装 PLAY 吗？","这次要扮演什么呢？","变装！","让我们看看接下来会发生什么！"]},{selector:"#live2d-tool-photo",text:["你要给我拍照呀？一二三～茄子～","要不，我们来合影吧！","保持微笑就好了～"]},{selector:"#live2d-tool-info",text:["想要知道更多关于我的事么？","这里记录着我搬家的历史呢。","你想深入了解我什么呢？"]},{selector:"#live2d-tool-quit",text:["到了要说再见的时候了吗？","呜呜 QAQ 后会有期……","不要抛弃我呀……","我们，还能再见面吗……","哼，你会后悔的！"]},{selector:".menu-item-home a",text:["点击前往首页，想回到上一页可以使用浏览器的后退功能哦。","点它就可以回到首页啦！","回首页看看吧。"]},{selector:".menu-item-about a",text:["你想知道我家主人是谁吗？","这里有一些关于我家主人的秘密哦，要不要看看呢？","发现主人出没地点！"]},{selector:".menu-item-tags a",text:["点击就可以看文章的标签啦！","点击来查看所有标签哦。"]},{selector:".menu-item-categories a",text:["文章都分类好啦～","点击来查看文章分类哦。"]},{selector:".menu-item-archives a",text:["翻页比较麻烦吗，那就来看看文章归档吧。","文章目录都整理在这里啦！"]},{selector:".menu-item-friends a",text:["这是我的朋友们哦ヾ(◍°∇°◍)ﾉﾞ","要去大佬们的家看看吗？","要去拜访一下我的朋友们吗？"]},{selector:".menu-item-search a",text:["找不到想看的内容？搜索看看吧！","在找什么东西呢，需要帮忙吗？"]},{selector:".menu-item a",text:["快看看这里都有什么呢？"]},{selector:".site-author",text:["我家主人好看吗？","这是我家主人(*´∇｀*)"]},{selector:".site-state",text:["这是文章的统计信息～","要不要点进去看看？"]},{selector:".feed-link a",text:["这里可以使用 RSS 订阅呢！","利用 feed 订阅器，就能快速知道博客有没有更新了呢。"]},{selector:".cc-opacity, .post-copyright-author",text:["要记得规范转载哦。","所有文章均采用 CC BY-NC-SA 4.0 许可协议～","转载前要先注意下文章的版权协议呢。"]},{selector:".links-of-author",text:["这里是主人的常驻地址哦。","这里有主人的联系方式！"]},{selector:".followme",text:["手机扫一下就能继续看，很方便呢～","扫一扫，打开新世界的大门！"]},{selector:".fancybox img, img.medium-zoom-image",text:["点击图片可以放大呢！"]},{selector:".copy-btn",text:["代码可以直接点击复制哟。"]},{selector:".highlight .table-container, .gist",text:["GitHub！我是新手！","PHP 是最好的语言！"]},{selector:"a[href^='mailto']",text:["邮件我会及时回复的！","点击就可以发送邮件啦～"]},{selector:"a[href^='/tags/']",text:["要去看看 <span>{text}</span> 标签么？","点它可以查看此标签下的所有文章哟！"]},{selector:"a[href^='/categories/']",text:["要去看看 <span>{text}</span> 分类么？","点它可以查看此分类下的所有文章哟！"]},{selector:".post-title-link",text:["要看看 <span>{text}</span> 这篇文章吗？"]},{selector:"a[rel='contents']",text:["点击来阅读全文哦。"]},{selector:"a[itemprop='discussionUrl']",text:["要去看看评论吗？"]},{selector:".beian a",text:["我也是有户口的人哦。","我的主人可是遵纪守法的好主人。"]},{selector:".container a[href^='http'], .nav-link .nav-text",text:["要去看看 <span>{text}</span> 么？","去 <span>{text}</span> 逛逛吧。","到 <span>{text}</span> 看看吧。"]},{selector:".back-to-top",text:["点它就可以回到顶部啦！","又回到最初的起点～","要回到开始的地方么？"]},{selector:".reward-container",text:["我是不是棒棒哒～快给我点赞吧！","要打赏我嘛？好期待啊～","主人最近在吃土呢，很辛苦的样子，给他一些钱钱吧～"]},{selector:"#wechat",text:["这是我的微信二维码～"]},{selector:"#alipay",text:["这是我的支付宝哦！"]},{selector:"#bitcoin",text:["这是我的比特币账号！"]},{selector:"#needsharebutton-postbottom .btn",text:["好东西要让更多人知道才行哦。","觉得文章有帮助的话，可以分享给更多需要的朋友呢。"]},{selector:".need-share-button_weibo",text:["微博？来分享一波喵！"]},{selector:".need-share-button_wechat",text:["分享到微信吧！"]},{selector:".need-share-button_douban",text:["分享到豆瓣好像也不错！"]},{selector:".need-share-button_qqzone",text:["QQ 空间，一键转发，耶～"]},{selector:".need-share-button_twitter",text:["Twitter？好像是不存在的东西？"]},{selector:".need-share-button_facebook",text:["emmm…FB 好像也是不存在的东西？"]},{selector:".post-nav-item a[rel='next']",text:["来看看下一篇文章吧。","点它可以看下一篇文章哦！","要翻到下一篇文章吗？"]},{selector:".post-nav-item a[rel='prev']",text:["来看看上一篇文章吧。","点它可以看上一篇文章哦！","要翻到上一篇文章吗？"]},{selector:".extend.next",text:["去下一页看看吧。","点它可以前进哦！","要翻到下一页吗？"]},{selector:".extend.prev",text:["去上一页看看吧。","点它可以后退哦！","要翻到上一页吗？"]},{selector:"input.vnick",text:["该怎么称呼你呢？","留下你的尊姓大名！"]},{selector:".vmail",text:["留下你的邮箱，不然就是无头像人士了！","记得设置好 Gravatar 头像哦！","为了方便通知你最新消息，一定要留下邮箱！"]},{selector:".vlink",text:["快快告诉我你的家在哪里，好让我去参观参观！"]},{selector:".veditor",text:["想要去评论些什么吗？","要说点什么吗？","觉得博客不错？快来留言和主人交流吧！"]},{selector:".vcontrol a",text:["你会不会熟练使用 Markdown 呀？","使用 Markdown 让评论更美观吧～"]},{selector:".vemoji-btn",text:["要插入一个萌萌哒的表情吗？","要来一发表情吗？"]},{selector:".vpreview-btn",text:["要预览一下你的发言吗？","快看看你的评论有多少负熵！"]},{selector:".vsubmit",text:["评论没有审核，要对自己的发言负责哦～","要提交了吗，请耐心等待回复哦～"]},{selector:".vcontent",text:["哇，快看看这个精彩评论！","如果有疑问，请尽快留言哦～"]}],click:[{selector:"#live2d",text:["是…是不小心碰到了吧…","萝莉控是什么呀？","你看到我的小熊了吗？","再摸的话我可要报警了！⌇●﹏●⌇","110 吗，这里有个变态一直在摸我(ó﹏ò｡)","不要摸我了，我会告诉老婆来打你的！","干嘛动我呀！小心我咬你！","别摸我，有什么好摸的！"]},{selector:".veditor",text:["要吐槽些什么呢？","一定要认真填写喵～","有什么想说的吗？"]},{selector:".vsubmit",text:["输入验证码就可以提交评论啦～"]}],seasons:[{date:"01/01",text:"<span>元旦</span>了呢，新的一年又开始了，今年是{year}年～"},{date:"02/14",text:"又是一年<span>情人节</span>，{year}年找到对象了嘛～"},{date:"03/08",text:"今天是<span>国际妇女节</span>！"},{date:"03/12",text:"今天是<span>植树节</span>，要保护环境呀！"},{date:"04/01",text:"悄悄告诉你一个秘密～<span>今天是愚人节，不要被骗了哦～</span>"},{date:"05/01",text:"今天是<span>五一劳动节</span>，计划好假期去哪里了吗～"},{date:"06/01",text:"<span>儿童节</span>了呢，快活的时光总是短暂，要是永远长不大该多好啊…"},{date:"09/03",text:"<span>中国人民抗日战争胜利纪念日</span>，铭记历史、缅怀先烈、珍爱和平、开创未来。"},{date:"09/10",text:"<span>教师节</span>，在学校要给老师问声好呀～"},{date:"10/01",text:"<span>国庆节</span>到了，为祖国母亲庆生！"},{date:"11/05-11/12",text:"今年的<span>双十一</span>是和谁一起过的呢～"},{date:"12/20-12/31",text:"这几天是<span>圣诞节</span>，主人肯定又去剁手买买买了～"}],time:[{hour:"6-7",text:"早上好！一日之计在于晨，美好的一天就要开始了～"},{hour:"8-11",text:"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！"},{hour:"12-13",text:"中午了，工作了一个上午，现在是午餐时间！"},{hour:"14-17",text:"午后很容易犯困呢，今天的运动目标完成了吗？"},{hour:"18-19",text:"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～"},{hour:"20-21",text:"晚上好，今天过得怎么样？"},{hour:"22-23",text:["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]},{hour:"0-5",text:"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？"}],message:{default:["好久不见，日子过得好快呢……","大坏蛋！你都多久没理人家了呀，嘤嘤嘤～","嗨～快来逗我玩吧！","拿小拳拳锤你胸口！","记得把小家加入收藏夹哦！"],console:"哈哈，你打开了控制台，是想要看看我的小秘密吗？",copy:"你都复制了些什么呀，转载要记得加上出处哦！",visibilitychange:"哇，你终于回来了～",clothes:["我还没有其他衣服呢！"]},tool:{camera:["照好了嘛，是不是很可爱呢？"],display:["愿你有一天能与重要的人重逢"]}};function LT(r,e){const t={...r};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]?Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=[...t[i],...e[i]]:t[i]=[t[i],e[i]]:t[i]=e[i]);return t}function BT(r,e){return Array.isArray(r)?r.reduce((t,i)=>(i in e&&(t[i]=e[i]),t),{}):{}}function FT(){const r=lx();return U(()=>{const{options:e}=r.value.addons["valaxy-addon-live2d"],t=(e==null?void 0:e.enableLive2D)??"all",i={...DT,...e==null?void 0:e.live2DCollection},s=t==="all"?i:BT(t,i),n=LT(OT,(e==null?void 0:e.live2dTips)||{});return{widthLimit:250,safetyMargin:50,randomCharacter:!1,randomSkin:!1,skipHello:!1,hideOnScreenSizes:600,debugger:!1,...e,live2DCollection:s,enableLive2D:t,live2dTips:n}})}function NT(){const r=FT(),{randomCharacter:e,randomSkin:t,live2DCollection:i,live2dTips:s,hideOnScreenSizes:n}=r.value,o=V(),a=V(!1);let l=V(!1);const u=new MT(s);async function c(){await Ne(()=>import("./index.D4glYwG5.js"),__vite__mapDeps([47,3,5,2,6,7,8,9])),o.value=(await Ne(async()=>{const{Live2DApp:w}=await import("./Live2DApp.SegSPKx_.js");return{Live2DApp:w}},__vite__mapDeps([48,3,5,2,6,7,8,9]))).Live2DApp,xd("live2d")==="Show"&&setTimeout(()=>{b()},0),xd("live2d")==="Hide"&&setTimeout(()=>{y()},0),u.init(),o.value.init(r.value,u),o.value.loadModel((await Jn(i)).selectedModel)}async function d(w=e){var S;(S=o.value)==null||S.switchModel(w?await f():await p())}async function h(w=t){var S;(S=o.value)==null||S.switchModel(w?await m():await g()),u.showMessage("我的新衣服好看嘛？",4e3,10)}function f(){const w=Object.keys(i),S=w[Math.floor(Math.random()*w.length)];return us(S,0),u.showMessage(i[S].message,4e3,10),i[S].models[0]}async function p(){const{currentCharacterKey:w}=await Jn(i),S=Object.keys(i),x=S[(S.indexOf(w)+1)%S.length],A=i[x].models;return us(x,0),u.showMessage(i[x].message,4e3,10),typeof A=="string"?await ko(A,0):A[0]}async function m(){const{currentCharacterKey:w}=await Jn(i),S=i[w],x=Math.floor(Math.random()*S.models.length);return us(null,x),S.models.length===0&&u.showMessage(s.message.clothes,4e3,10),typeof S.models=="string"?await ko(S.models,x):S.models[x]}async function g(){const{currentCharacterKey:w,currentSkinIndex:S}=await Jn(i),x=i[w],A=C=>(S+1)%C;if(typeof x.models=="string"){const C=await Fg(Bg(x.models)),E=A(C.length);return ko(x.models,E)}else{if(x.models.length===0)return u.showMessage(s.message.clothes,4e3,10),x.models[0];const C=A(x.models.length);return us(null,C),x.models[C]}}function v(){var w;(w=o.value)==null||w.captureFrame()}function _(){const w=document.getElementById("live2d");a.value=w.style.bottom==="0px"||w.style.bottom==="",a.value?y():b()}function y(){a.value=!0;const w=document.getElementById("live2d");localStorage.setItem("live2d-display",Date.now().toString()),u.showMessage(s.tool.display,2e3,11),w.style.bottom="-100%",setTimeout(()=>{bd("live2d","Hide",7)},0)}function b(){a.value=!1;const w=document.getElementById("live2d");w.style.bottom="0px",setTimeout(()=>{localStorage.removeItem("live2d-display"),w.style.display="",bd("live2d","Show",7)},0)}if(yr&&c(),n!==!1){const w=typeof n=="string"?n:`${n}px`;l=Lt(`(max-width: ${w})`)}return xe(l,w=>{w?y():b()}),{live2DApp:o,switchCharacter:d,switchSkin:h,getRandomCharacter:f,getSequentialCharacter:p,getRandomSkin:m,getSequentialSkin:g,captureFrame:v,toggleLive2DVisibility:_,isLive2DHide:a,live2dTipsHandler:u,isHidden:l}}function $T(r=200){const e=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let t=null;function i(s){t||(t=s);const n=s-t,o=Math.min(n/r,1);e.forEach(a=>{a.style.padding=`${5*o}px 0`,a.style.maxHeight=`${60*o}px`}),o<1?requestAnimationFrame(i):e.forEach(a=>{a.style.transform=""})}requestAnimationFrame(i)}function UT(r=200){const e=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let t=null;function i(s){t===null&&(t=s);const n=s-t,o=Math.min(n/r,1);e.forEach(a=>{o<1?(a.style.padding="5px 0",a.style.maxHeight="60px",a.style.transform=`translateX(${-40*o}px)`):(a.style.padding="0",a.style.maxHeight="0")}),o<1||n<r*2?requestAnimationFrame(i):t=null}requestAnimationFrame(i)}var zi=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(zi||{}),Ug=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(Ug||{}),Iu=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Iu||{}),re=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(re||{}),ar=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(ar||{}),F=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(F||{}),fs=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(fs||{}),Q=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Q||{}),G=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(G||{}),Sr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Sr||{}),Qr=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Qr||{}),mr=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(mr||{}),ht=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(ht||{}),ir=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(ir||{}),ph=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(ph||{}),At=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(At||{}),Ge=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Ge||{}),$e=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))($e||{}),cr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(cr||{});const HT={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},z={ADAPTER:HT,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var hl=/iPhone/i,wd=/iPod/i,Td=/iPad/i,Ad=/\biOS-universal(?:.+)Mac\b/i,dl=/\bAndroid(?:.+)Mobile\b/i,Sd=/Android/i,qi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Qn=/Silk/i,_r=/Windows Phone/i,Ed=/\bWindows(?:.+)ARM\b/i,Cd=/BlackBerry/i,Pd=/BB10/i,Rd=/Opera Mini/i,Id=/\b(CriOS|Chrome)(?:.+)Mobile/i,Md=/Mobile(?:.+)Firefox\b/i,kd=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function GT(r){return function(e){return e.test(r)}}function Dd(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var s=GT(t),n={apple:{phone:s(hl)&&!s(_r),ipod:s(wd),tablet:!s(hl)&&(s(Td)||kd(e))&&!s(_r),universal:s(Ad),device:(s(hl)||s(wd)||s(Td)||s(Ad)||kd(e))&&!s(_r)},amazon:{phone:s(qi),tablet:!s(qi)&&s(Qn),device:s(qi)||s(Qn)},android:{phone:!s(_r)&&s(qi)||!s(_r)&&s(dl),tablet:!s(_r)&&!s(qi)&&!s(dl)&&(s(Qn)||s(Sd)),device:!s(_r)&&(s(qi)||s(Qn)||s(dl)||s(Sd))||s(/\bokhttp\b/i)},windows:{phone:s(_r),tablet:s(Ed),device:s(_r)||s(Ed)},other:{blackberry:s(Cd),blackberry10:s(Pd),opera:s(Rd),firefox:s(Md),chrome:s(Id),device:s(Cd)||s(Pd)||s(Rd)||s(Md)||s(Id)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const zT=Dd.default??Dd,Er=zT(globalThis.navigator);z.RETINA_PREFIX=/@([0-9\.]+)x/;z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Hg={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function n(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new s(c,d||l,h),p=t?t+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=t?t+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(u){var c=t?t+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,h,f,p){var m=t?t+u:u;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,_,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,h),!0;case 5:return g.fn.call(g.context,c,d,h,f),!0;case 6:return g.fn.call(g.context,c,d,h,f,p),!0}for(y=1,_=new Array(v-1);y<v;y++)_[y-1]=arguments[y];g.fn.apply(g.context,_)}else{var b=g.length,w;for(y=0;y<b;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,d);break;case 4:g[y].fn.call(g[y].context,c,d,h);break;default:if(!_)for(w=1,_=new Array(v-1);w<v;w++)_[w-1]=arguments[w];g[y].fn.apply(g[y].context,_)}}return!0},a.prototype.on=function(u,c,d){return n(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return n(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,h){var f=t?t+u:u;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==c||h&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(Hg);var jT=Hg.exports;const $n=lm(jT);var mh={exports:{}};mh.exports=Da;mh.exports.default=Da;function Da(r,e,t){t=t||2;var i=e&&e.length,s=i?e[0]*t:r.length,n=Gg(r,0,s,t,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,u,c,d,h,f;if(i&&(n=qT(r,e,n,t)),r.length>80*t){a=u=r[0],l=c=r[1];for(var p=t;p<s;p+=t)d=r[p],h=r[p+1],d<a&&(a=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return gn(n,o,t,a,l,f,0),o}function Gg(r,e,t,i,s){var n,o;if(s===Du(r,e,t,i)>0)for(n=e;n<t;n+=i)o=Od(n,r[n],r[n+1],o);else for(n=t-i;n>=e;n-=i)o=Od(n,r[n],r[n+1],o);return o&&Oa(o,o.next)&&(vn(o),o=o.next),o}function Oi(r,e){if(!r)return r;e||(e=r);var t=r,i;do if(i=!1,!t.steiner&&(Oa(t,t.next)||Re(t.prev,t,t.next)===0)){if(vn(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function gn(r,e,t,i,s,n,o){if(r){!o&&n&&eA(r,i,s,n);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,n?WT(r,i,s,n):VT(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),vn(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=XT(Oi(r),e,t),gn(r,e,t,i,s,n,2)):o===2&&YT(r,e,t,i,s,n):gn(Oi(r),e,t,i,s,n,1);break}}}}function VT(r){var e=r.prev,t=r,i=r.next;if(Re(e,t,i)>=0)return!1;for(var s=e.x,n=t.x,o=i.x,a=e.y,l=t.y,u=i.y,c=s<n?s<o?s:o:n<o?n:o,d=a<l?a<u?a:u:l<u?l:u,h=s>n?s>o?s:o:n>o?n:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&cs(s,a,n,l,o,u,p.x,p.y)&&Re(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function WT(r,e,t,i){var s=r.prev,n=r,o=r.next;if(Re(s,n,o)>=0)return!1;for(var a=s.x,l=n.x,u=o.x,c=s.y,d=n.y,h=o.y,f=a<l?a<u?a:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=a>l?a>u?a:u:l>u?l:u,g=c>d?c>h?c:h:d>h?d:h,v=Mu(f,p,e,t,i),_=Mu(m,g,e,t,i),y=r.prevZ,b=r.nextZ;y&&y.z>=v&&b&&b.z<=_;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==s&&y!==o&&cs(a,c,l,d,u,h,y.x,y.y)&&Re(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&cs(a,c,l,d,u,h,b.x,b.y)&&Re(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==s&&y!==o&&cs(a,c,l,d,u,h,y.x,y.y)&&Re(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=_;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&cs(a,c,l,d,u,h,b.x,b.y)&&Re(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function XT(r,e,t){var i=r;do{var s=i.prev,n=i.next.next;!Oa(s,n)&&zg(s,i,i.next,n)&&yn(s,n)&&yn(n,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(n.i/t|0),vn(i),vn(i.next),i=r=n),i=i.next}while(i!==r);return Oi(i)}function YT(r,e,t,i,s,n){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&iA(o,a)){var l=jg(o,a);o=Oi(o,o.next),l=Oi(l,l.next),gn(o,e,t,i,s,n,0),gn(l,e,t,i,s,n,0);return}a=a.next}o=o.next}while(o!==r)}function qT(r,e,t,i){var s=[],n,o,a,l,u;for(n=0,o=e.length;n<o;n++)a=e[n]*i,l=n<o-1?e[n+1]*i:r.length,u=Gg(r,a,l,i,!1),u===u.next&&(u.steiner=!0),s.push(rA(u));for(s.sort(KT),n=0;n<s.length;n++)t=ZT(s[n],t);return t}function KT(r,e){return r.x-e.x}function ZT(r,e){var t=JT(r,e);if(!t)return e;var i=jg(t,r);return Oi(i,i.next),Oi(t,t.next)}function JT(r,e){var t=e,i=r.x,s=r.y,n=-1/0,o;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){var a=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>n&&(n=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,c=o.y,d=1/0,h;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&cs(s<c?i:n,s,u,c,s<c?n:i,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(i-t.x),yn(t,r)&&(h<d||h===d&&(t.x>o.x||t.x===o.x&&QT(o,t)))&&(o=t,d=h)),t=t.next;while(t!==l);return o}function QT(r,e){return Re(r.prev,r,e.prev)<0&&Re(e.next,r,r.next)<0}function eA(r,e,t,i){var s=r;do s.z===0&&(s.z=Mu(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,tA(s)}function tA(r){var e,t,i,s,n,o,a,l,u=1;do{for(t=r,r=null,n=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,a--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:r=s,s.prevZ=n,n=s;t=i}n.nextZ=null,u*=2}while(o>1);return r}function Mu(r,e,t,i,s){return r=(r-t)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function rA(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function cs(r,e,t,i,s,n,o,a){return(s-o)*(e-a)>=(r-o)*(n-a)&&(r-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(n-a)>=(s-o)*(i-a)}function iA(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!sA(r,e)&&(yn(r,e)&&yn(e,r)&&nA(r,e)&&(Re(r.prev,r,e.prev)||Re(r,e.prev,e))||Oa(r,e)&&Re(r.prev,r,r.next)>0&&Re(e.prev,e,e.next)>0)}function Re(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Oa(r,e){return r.x===e.x&&r.y===e.y}function zg(r,e,t,i){var s=to(Re(r,e,t)),n=to(Re(r,e,i)),o=to(Re(t,i,r)),a=to(Re(t,i,e));return!!(s!==n&&o!==a||s===0&&eo(r,t,e)||n===0&&eo(r,i,e)||o===0&&eo(t,r,i)||a===0&&eo(t,e,i))}function eo(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function to(r){return r>0?1:r<0?-1:0}function sA(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&zg(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function yn(r,e){return Re(r.prev,r,r.next)<0?Re(r,e,r.next)>=0&&Re(r,r.prev,e)>=0:Re(r,e,r.prev)<0||Re(r,r.next,e)<0}function nA(r,e){var t=r,i=!1,s=(r.x+e.x)/2,n=(r.y+e.y)/2;do t.y>n!=t.next.y>n&&t.next.y!==t.y&&s<(t.next.x-t.x)*(n-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function jg(r,e){var t=new ku(r.i,r.x,r.y),i=new ku(e.i,e.x,e.y),s=r.next,n=e.prev;return r.next=e,e.prev=r,t.next=s,s.prev=t,i.next=t,t.prev=i,n.next=i,i.prev=n,i}function Od(r,e,t,i){var s=new ku(r,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function vn(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function ku(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Da.deviation=function(r,e,t,i){var s=e&&e.length,n=s?e[0]*t:r.length,o=Math.abs(Du(r,0,n,t));if(s)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:r.length;o-=Math.abs(Du(r,u,c,t))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*t,f=i[a+1]*t,p=i[a+2]*t;d+=Math.abs((r[h]-r[p])*(r[f+1]-r[h+1])-(r[h]-r[f])*(r[p+1]-r[h+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function Du(r,e,t,i){for(var s=0,n=e,o=t-i;n<t;n+=i)s+=(r[o]-r[n])*(r[n+1]+r[o+1]),o=n;return s}Da.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,s=0;s<r.length;s++){for(var n=0;n<r[s].length;n++)for(var o=0;o<e;o++)t.vertices.push(r[s][n][o]);s>0&&(i+=r[s-1].length,t.holes.push(i))}return t};var oA=mh.exports;const aA=lm(oA);var Zo={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Zo.exports;(function(r,e){(function(t){var i=e&&!e.nodeType&&e,s=r&&!r.nodeType&&r,n=typeof Zs=="object"&&Zs;(n.global===n||n.window===n||n.self===n)&&(t=n);var o,a=2147483647,l=36,u=1,c=26,d=38,h=700,f=72,p=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-u,w=Math.floor,S=String.fromCharCode,x;function A(O){throw new RangeError(y[O])}function C(O,B){for(var oe=O.length,ce=[];oe--;)ce[oe]=B(O[oe]);return ce}function E(O,B){var oe=O.split("@"),ce="";oe.length>1&&(ce=oe[0]+"@",O=oe[1]),O=O.replace(_,".");var fe=O.split("."),Ae=C(fe,B).join(".");return ce+Ae}function D(O){for(var B=[],oe=0,ce=O.length,fe,Ae;oe<ce;)fe=O.charCodeAt(oe++),fe>=55296&&fe<=56319&&oe<ce?(Ae=O.charCodeAt(oe++),(Ae&64512)==56320?B.push(((fe&1023)<<10)+(Ae&1023)+65536):(B.push(fe),oe--)):B.push(fe);return B}function M(O){return C(O,function(B){var oe="";return B>65535&&(B-=65536,oe+=S(B>>>10&1023|55296),B=56320|B&1023),oe+=S(B),oe}).join("")}function T(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function P(O,B){return O+22+75*(O<26)-((B!=0)<<5)}function L(O,B,oe){var ce=0;for(O=oe?w(O/h):O>>1,O+=w(O/B);O>b*c>>1;ce+=l)O=w(O/b);return w(ce+(b+1)*O/(O+d))}function j(O){var B=[],oe=O.length,ce,fe=0,Ae=p,Se=f,Fe,je,ot,Ue,Te,Me,Oe,bt,xt;for(Fe=O.lastIndexOf(m),Fe<0&&(Fe=0),je=0;je<Fe;++je)O.charCodeAt(je)>=128&&A("not-basic"),B.push(O.charCodeAt(je));for(ot=Fe>0?Fe+1:0;ot<oe;){for(Ue=fe,Te=1,Me=l;ot>=oe&&A("invalid-input"),Oe=T(O.charCodeAt(ot++)),(Oe>=l||Oe>w((a-fe)/Te))&&A("overflow"),fe+=Oe*Te,bt=Me<=Se?u:Me>=Se+c?c:Me-Se,!(Oe<bt);Me+=l)xt=l-bt,Te>w(a/xt)&&A("overflow"),Te*=xt;ce=B.length+1,Se=L(fe-Ue,ce,Ue==0),w(fe/ce)>a-Ae&&A("overflow"),Ae+=w(fe/ce),fe%=ce,B.splice(fe++,0,Ae)}return M(B)}function $(O){var B,oe,ce,fe,Ae,Se,Fe,je,ot,Ue,Te,Me=[],Oe,bt,xt,pi;for(O=D(O),Oe=O.length,B=p,oe=0,Ae=f,Se=0;Se<Oe;++Se)Te=O[Se],Te<128&&Me.push(S(Te));for(ce=fe=Me.length,fe&&Me.push(m);ce<Oe;){for(Fe=a,Se=0;Se<Oe;++Se)Te=O[Se],Te>=B&&Te<Fe&&(Fe=Te);for(bt=ce+1,Fe-B>w((a-oe)/bt)&&A("overflow"),oe+=(Fe-B)*bt,B=Fe,Se=0;Se<Oe;++Se)if(Te=O[Se],Te<B&&++oe>a&&A("overflow"),Te==B){for(je=oe,ot=l;Ue=ot<=Ae?u:ot>=Ae+c?c:ot-Ae,!(je<Ue);ot+=l)pi=je-Ue,xt=l-Ue,Me.push(S(P(Ue+pi%xt,0))),je=w(pi/xt);Me.push(S(P(je,0))),Ae=L(oe,bt,ce==fe),oe=0,++ce}++oe,++B}return Me.join("")}function W(O){return E(O,function(B){return g.test(B)?j(B.slice(4).toLowerCase()):B})}function ne(O){return E(O,function(B){return v.test(B)?"xn--"+$(B):B})}if(o={version:"1.4.1",ucs2:{decode:D,encode:M},decode:j,encode:$,toASCII:ne,toUnicode:W},i&&s)if(r.exports==i)s.exports=o;else for(x in o)o.hasOwnProperty(x)&&(i[x]=o[x]);else t.punycode=o})(Zs)})(Zo,Zo.exports);var lA=Zo.exports,Ds=TypeError;const uA={},cA=Object.freeze(Object.defineProperty({__proto__:null,default:uA},Symbol.toStringTag,{value:"Module"})),hA=O_(cA);var gh=typeof Map=="function"&&Map.prototype,fl=Object.getOwnPropertyDescriptor&&gh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Jo=gh&&fl&&typeof fl.get=="function"?fl.get:null,Ld=gh&&Map.prototype.forEach,yh=typeof Set=="function"&&Set.prototype,pl=Object.getOwnPropertyDescriptor&&yh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Qo=yh&&pl&&typeof pl.get=="function"?pl.get:null,Bd=yh&&Set.prototype.forEach,dA=typeof WeakMap=="function"&&WeakMap.prototype,Qs=dA?WeakMap.prototype.has:null,fA=typeof WeakSet=="function"&&WeakSet.prototype,en=fA?WeakSet.prototype.has:null,pA=typeof WeakRef=="function"&&WeakRef.prototype,Fd=pA?WeakRef.prototype.deref:null,mA=Boolean.prototype.valueOf,gA=Object.prototype.toString,yA=Function.prototype.toString,vA=String.prototype.match,vh=String.prototype.slice,Yr=String.prototype.replace,_A=String.prototype.toUpperCase,Nd=String.prototype.toLowerCase,Vg=RegExp.prototype.test,$d=Array.prototype.concat,sr=Array.prototype.join,bA=Array.prototype.slice,Ud=Math.floor,Ou=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ml=Object.getOwnPropertySymbols,Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="object",tn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ts||!0)?Symbol.toStringTag:null,Wg=Object.prototype.propertyIsEnumerable,Hd=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Gd(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Vg.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-Ud(-r):Ud(r);if(i!==r){var s=String(i),n=vh.call(e,s.length+1);return Yr.call(s,t,"$&_")+"."+Yr.call(Yr.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Yr.call(e,t,"$&_")}var Bu=hA,zd=Bu.custom,jd=qg(zd)?zd:null,Xg={__proto__:null,double:'"',single:"'"},xA={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},La=function r(e,t,i,s){var n=t||{};if(wr(n,"quoteStyle")&&!wr(Xg,n.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(wr(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=wr(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(wr(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(wr(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Zg(e,n);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Gd(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Gd(e,u):u}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof e=="object")return Fu(e)?"[Array]":"[Object]";var d=$A(n,i);if(typeof s>"u")s=[];else if(Kg(s,e)>=0)return"[Circular]";function h(T,P,L){if(P&&(s=bA.call(s),s.push(P)),L){var j={depth:n.depth};return wr(n,"quoteStyle")&&(j.quoteStyle=n.quoteStyle),r(T,j,i+1,s)}return r(T,n,i+1,s)}if(typeof e=="function"&&!Vd(e)){var f=IA(e),p=ro(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+sr.call(p,", ")+" }":"")}if(qg(e)){var m=Ts?Yr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Lu.call(e);return typeof e=="object"&&!Ts?Fs(m):m}if(BA(e)){for(var g="<"+Nd.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+Yg(wA(v[_].value),"double",n);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+Nd.call(String(e.nodeName))+">",g}if(Fu(e)){if(e.length===0)return"[]";var y=ro(e,h);return d&&!NA(y)?"["+Nu(y,d)+"]":"[ "+sr.call(y,", ")+" ]"}if(AA(e)){var b=ro(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!Wg.call(e,"cause")?"{ ["+String(e)+"] "+sr.call($d.call("[cause]: "+h(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+sr.call(b,", ")+" }"}if(typeof e=="object"&&o){if(jd&&typeof e[jd]=="function"&&Bu)return Bu(e,{depth:c-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(MA(e)){var w=[];return Ld&&Ld.call(e,function(T,P){w.push(h(P,e,!0)+" => "+h(T,e))}),Wd("Map",Jo.call(e),w,d)}if(OA(e)){var S=[];return Bd&&Bd.call(e,function(T){S.push(h(T,e))}),Wd("Set",Qo.call(e),S,d)}if(kA(e))return gl("WeakMap");if(LA(e))return gl("WeakSet");if(DA(e))return gl("WeakRef");if(EA(e))return Fs(h(Number(e)));if(PA(e))return Fs(h(Ou.call(e)));if(CA(e))return Fs(mA.call(e));if(SA(e))return Fs(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Zs<"u"&&e===Zs)return"{ [object globalThis] }";if(!TA(e)&&!Vd(e)){var x=ro(e,h),A=Hd?Hd(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",E=!A&&tn&&Object(e)===e&&tn in e?vh.call(hi(e),8,-1):C?"Object":"",D=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=D+(E||C?"["+sr.call($d.call([],E||[],C||[]),": ")+"] ":"");return x.length===0?M+"{}":d?M+"{"+Nu(x,d)+"}":M+"{ "+sr.call(x,", ")+" }"}return String(e)};function Yg(r,e,t){var i=t.quoteStyle||e,s=Xg[i];return s+r+s}function wA(r){return Yr.call(String(r),/"/g,"&quot;")}function ji(r){return!tn||!(typeof r=="object"&&(tn in r||typeof r[tn]<"u"))}function Fu(r){return hi(r)==="[object Array]"&&ji(r)}function TA(r){return hi(r)==="[object Date]"&&ji(r)}function Vd(r){return hi(r)==="[object RegExp]"&&ji(r)}function AA(r){return hi(r)==="[object Error]"&&ji(r)}function SA(r){return hi(r)==="[object String]"&&ji(r)}function EA(r){return hi(r)==="[object Number]"&&ji(r)}function CA(r){return hi(r)==="[object Boolean]"&&ji(r)}function qg(r){if(Ts)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Lu)return!1;try{return Lu.call(r),!0}catch{}return!1}function PA(r){if(!r||typeof r!="object"||!Ou)return!1;try{return Ou.call(r),!0}catch{}return!1}var RA=Object.prototype.hasOwnProperty||function(r){return r in this};function wr(r,e){return RA.call(r,e)}function hi(r){return gA.call(r)}function IA(r){if(r.name)return r.name;var e=vA.call(yA.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Kg(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function MA(r){if(!Jo||!r||typeof r!="object")return!1;try{Jo.call(r);try{Qo.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function kA(r){if(!Qs||!r||typeof r!="object")return!1;try{Qs.call(r,Qs);try{en.call(r,en)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function DA(r){if(!Fd||!r||typeof r!="object")return!1;try{return Fd.call(r),!0}catch{}return!1}function OA(r){if(!Qo||!r||typeof r!="object")return!1;try{Qo.call(r);try{Jo.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function LA(r){if(!en||!r||typeof r!="object")return!1;try{en.call(r,en);try{Qs.call(r,Qs)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function BA(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Zg(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return Zg(vh.call(r,0,e.maxStringLength),e)+i}var s=xA[e.quoteStyle||"single"];s.lastIndex=0;var n=Yr.call(Yr.call(r,s,"\\$1"),/[\x00-\x1f]/g,FA);return Yg(n,"single",e)}function FA(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+_A.call(e.toString(16))}function Fs(r){return"Object("+r+")"}function gl(r){return r+" { ? }"}function Wd(r,e,t,i){var s=i?Nu(t,i):sr.call(t,", ");return r+" ("+e+") {"+s+"}"}function NA(r){for(var e=0;e<r.length;e++)if(Kg(r[e],`
`)>=0)return!1;return!0}function $A(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=sr.call(Array(r.indent+1)," ");else return null;return{base:t,prev:sr.call(Array(e+1),t)}}function Nu(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+sr.call(r,","+t)+`
`+e.prev}function ro(r,e){var t=Fu(r),i=[];if(t){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=wr(r,s)?e(r[s],r):""}var n=typeof ml=="function"?ml(r):[],o;if(Ts){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var l in r)wr(r,l)&&(t&&String(Number(l))===l&&l<r.length||Ts&&o["$"+l]instanceof Symbol||(Vg.call(/[^\w$]/,l)?i.push(e(l,r)+": "+e(r[l],r)):i.push(l+": "+e(r[l],r))));if(typeof ml=="function")for(var u=0;u<n.length;u++)Wg.call(r,n[u])&&i.push("["+e(n[u])+"]: "+e(r[n[u]],r));return i}var UA=La,HA=Ds,Ba=function(r,e,t){for(var i=r,s;(s=i.next)!=null;i=s)if(s.key===e)return i.next=s.next,t||(s.next=r.next,r.next=s),s},GA=function(r,e){if(r){var t=Ba(r,e);return t&&t.value}},zA=function(r,e,t){var i=Ba(r,e);i?i.value=t:r.next={key:e,next:r.next,value:t}},jA=function(r,e){return r?!!Ba(r,e):!1},VA=function(r,e){if(r)return Ba(r,e,!0)},WA=function(){var e,t={assert:function(i){if(!t.has(i))throw new HA("Side channel does not contain "+UA(i))},delete:function(i){var s=e&&e.next,n=VA(e,i);return n&&s&&s===n&&(e=void 0),!!n},get:function(i){return GA(e,i)},has:function(i){return jA(e,i)},set:function(i,s){e||(e={next:void 0}),zA(e,i,s)}};return t},Jg=Object,XA=Error,YA=EvalError,qA=RangeError,KA=ReferenceError,ZA=SyntaxError,JA=URIError,QA=Math.abs,eS=Math.floor,tS=Math.max,rS=Math.min,iS=Math.pow,sS=Math.round,nS=Number.isNaN||function(e){return e!==e},oS=nS,aS=function(e){return oS(e)||e===0?e:e<0?-1:1},lS=Object.getOwnPropertyDescriptor,Do=lS;if(Do)try{Do([],"length")}catch{Do=null}var Qg=Do,Oo=Object.defineProperty||!1;if(Oo)try{Oo({},"a",{value:1})}catch{Oo=!1}var uS=Oo,yl,Xd;function cS(){return Xd||(Xd=1,yl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==s||a.enumerable!==!0)return!1}return!0}),yl}var vl,Yd;function hS(){if(Yd)return vl;Yd=1;var r=typeof Symbol<"u"&&Symbol,e=cS();return vl=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},vl}var _l,qd;function ey(){return qd||(qd=1,_l=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_l}var bl,Kd;function ty(){if(Kd)return bl;Kd=1;var r=Jg;return bl=r.getPrototypeOf||null,bl}var xl,Zd;function dS(){if(Zd)return xl;Zd=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",s=function(l,u){for(var c=[],d=0;d<l.length;d+=1)c[d]=l[d];for(var h=0;h<u.length;h+=1)c[h+l.length]=u[h];return c},n=function(l,u){for(var c=[],d=u,h=0;d<l.length;d+=1,h+=1)c[h]=l[d];return c},o=function(a,l){for(var u="",c=0;c<a.length;c+=1)u+=a[c],c+1<a.length&&(u+=l);return u};return xl=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==i)throw new TypeError(r+u);for(var c=n(arguments,1),d,h=function(){if(this instanceof d){var v=u.apply(this,s(c,arguments));return Object(v)===v?v:this}return u.apply(l,s(c,arguments))},f=t(0,u.length-c.length),p=[],m=0;m<f;m++)p[m]="$"+m;if(d=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var g=function(){};g.prototype=u.prototype,d.prototype=new g,g.prototype=null}return d},xl}var wl,Jd;function Fa(){if(Jd)return wl;Jd=1;var r=dS();return wl=Function.prototype.bind||r,wl}var Tl,Qd;function _h(){return Qd||(Qd=1,Tl=Function.prototype.call),Tl}var Al,ef;function ry(){return ef||(ef=1,Al=Function.prototype.apply),Al}var fS=typeof Reflect<"u"&&Reflect&&Reflect.apply,pS=Fa(),mS=ry(),gS=_h(),yS=fS,vS=yS||pS.call(gS,mS),_S=Fa(),bS=Ds,xS=_h(),wS=vS,iy=function(e){if(e.length<1||typeof e[0]!="function")throw new bS("a function is required");return wS(_S,xS,e)},Sl,tf;function TS(){if(tf)return Sl;tf=1;var r=iy,e=Qg,t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!t&&e&&e(Object.prototype,"__proto__"),s=Object,n=s.getPrototypeOf;return Sl=i&&typeof i.get=="function"?r([i.get]):typeof n=="function"?function(a){return n(a==null?a:s(a))}:!1,Sl}var El,rf;function AS(){if(rf)return El;rf=1;var r=ey(),e=ty(),t=TS();return El=r?function(s){return r(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:t?function(s){return t(s)}:null,El}var Cl,sf;function SS(){if(sf)return Cl;sf=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Fa();return Cl=t.call(r,e),Cl}var me,ES=Jg,CS=XA,PS=YA,RS=qA,IS=KA,As=ZA,ps=Ds,MS=JA,kS=QA,DS=eS,OS=tS,LS=rS,BS=iS,FS=sS,NS=aS,sy=Function,Pl=function(r){try{return sy('"use strict"; return ('+r+").constructor;")()}catch{}},_n=Qg,$S=uS,Rl=function(){throw new ps},US=_n?function(){try{return arguments.callee,Rl}catch{try{return _n(arguments,"callee").get}catch{return Rl}}}():Rl,Ki=hS()(),We=AS(),HS=ty(),GS=ey(),ny=ry(),Un=_h(),ts={},zS=typeof Uint8Array>"u"||!We?me:We(Uint8Array),Mi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?me:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?me:ArrayBuffer,"%ArrayIteratorPrototype%":Ki&&We?We([][Symbol.iterator]()):me,"%AsyncFromSyncIteratorPrototype%":me,"%AsyncFunction%":ts,"%AsyncGenerator%":ts,"%AsyncGeneratorFunction%":ts,"%AsyncIteratorPrototype%":ts,"%Atomics%":typeof Atomics>"u"?me:Atomics,"%BigInt%":typeof BigInt>"u"?me:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?me:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?me:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?me:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":CS,"%eval%":eval,"%EvalError%":PS,"%Float16Array%":typeof Float16Array>"u"?me:Float16Array,"%Float32Array%":typeof Float32Array>"u"?me:Float32Array,"%Float64Array%":typeof Float64Array>"u"?me:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?me:FinalizationRegistry,"%Function%":sy,"%GeneratorFunction%":ts,"%Int8Array%":typeof Int8Array>"u"?me:Int8Array,"%Int16Array%":typeof Int16Array>"u"?me:Int16Array,"%Int32Array%":typeof Int32Array>"u"?me:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ki&&We?We(We([][Symbol.iterator]())):me,"%JSON%":typeof JSON=="object"?JSON:me,"%Map%":typeof Map>"u"?me:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ki||!We?me:We(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":ES,"%Object.getOwnPropertyDescriptor%":_n,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?me:Promise,"%Proxy%":typeof Proxy>"u"?me:Proxy,"%RangeError%":RS,"%ReferenceError%":IS,"%Reflect%":typeof Reflect>"u"?me:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?me:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ki||!We?me:We(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?me:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ki&&We?We(""[Symbol.iterator]()):me,"%Symbol%":Ki?Symbol:me,"%SyntaxError%":As,"%ThrowTypeError%":US,"%TypedArray%":zS,"%TypeError%":ps,"%Uint8Array%":typeof Uint8Array>"u"?me:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?me:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?me:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?me:Uint32Array,"%URIError%":MS,"%WeakMap%":typeof WeakMap>"u"?me:WeakMap,"%WeakRef%":typeof WeakRef>"u"?me:WeakRef,"%WeakSet%":typeof WeakSet>"u"?me:WeakSet,"%Function.prototype.call%":Un,"%Function.prototype.apply%":ny,"%Object.defineProperty%":$S,"%Object.getPrototypeOf%":HS,"%Math.abs%":kS,"%Math.floor%":DS,"%Math.max%":OS,"%Math.min%":LS,"%Math.pow%":BS,"%Math.round%":FS,"%Math.sign%":NS,"%Reflect.getPrototypeOf%":GS};if(We)try{null.error}catch(r){var jS=We(We(r));Mi["%Error.prototype%"]=jS}var VS=function r(e){var t;if(e==="%AsyncFunction%")t=Pl("async function () {}");else if(e==="%GeneratorFunction%")t=Pl("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Pl("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&We&&(t=We(s.prototype))}return Mi[e]=t,t},nf={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Hn=Fa(),ea=SS(),WS=Hn.call(Un,Array.prototype.concat),XS=Hn.call(ny,Array.prototype.splice),of=Hn.call(Un,String.prototype.replace),ta=Hn.call(Un,String.prototype.slice),YS=Hn.call(Un,RegExp.prototype.exec),qS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,KS=/\\(\\)?/g,ZS=function(e){var t=ta(e,0,1),i=ta(e,-1);if(t==="%"&&i!=="%")throw new As("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new As("invalid intrinsic syntax, expected opening `%`");var s=[];return of(e,qS,function(n,o,a,l){s[s.length]=a?of(l,KS,"$1"):o||n}),s},JS=function(e,t){var i=e,s;if(ea(nf,i)&&(s=nf[i],i="%"+s[0]+"%"),ea(Mi,i)){var n=Mi[i];if(n===ts&&(n=VS(i)),typeof n>"u"&&!t)throw new ps("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new As("intrinsic "+e+" does not exist!")},bh=function(e,t){if(typeof e!="string"||e.length===0)throw new ps("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ps('"allowMissing" argument must be a boolean');if(YS(/^%?[^%]*%?$/,e)===null)throw new As("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=ZS(e),s=i.length>0?i[0]:"",n=JS("%"+s+"%",t),o=n.name,a=n.value,l=!1,u=n.alias;u&&(s=u[0],XS(i,WS([0,1],u)));for(var c=1,d=!0;c<i.length;c+=1){var h=i[c],f=ta(h,0,1),p=ta(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new As("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),s+="."+h,o="%"+s+"%",ea(Mi,o))a=Mi[o];else if(a!=null){if(!(h in a)){if(!t)throw new ps("base intrinsic for "+e+" exists, but the property is not available.");return}if(_n&&c+1>=i.length){var m=_n(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=ea(a,h),a=a[h];d&&!l&&(Mi[o]=a)}}return a},oy=bh,ay=iy,QS=ay([oy("%String.prototype.indexOf%")]),ly=function(e,t){var i=oy(e,!!t);return typeof i=="function"&&QS(e,".prototype.")>-1?ay([i]):i},eE=bh,Gn=ly,tE=La,rE=Ds,af=eE("%Map%",!0),iE=Gn("Map.prototype.get",!0),sE=Gn("Map.prototype.set",!0),nE=Gn("Map.prototype.has",!0),oE=Gn("Map.prototype.delete",!0),aE=Gn("Map.prototype.size",!0),uy=!!af&&function(){var e,t={assert:function(i){if(!t.has(i))throw new rE("Side channel does not contain "+tE(i))},delete:function(i){if(e){var s=oE(e,i);return aE(e)===0&&(e=void 0),s}return!1},get:function(i){if(e)return iE(e,i)},has:function(i){return e?nE(e,i):!1},set:function(i,s){e||(e=new af),sE(e,i,s)}};return t},lE=bh,Na=ly,uE=La,io=uy,cE=Ds,Zi=lE("%WeakMap%",!0),hE=Na("WeakMap.prototype.get",!0),dE=Na("WeakMap.prototype.set",!0),fE=Na("WeakMap.prototype.has",!0),pE=Na("WeakMap.prototype.delete",!0),mE=Zi?function(){var e,t,i={assert:function(s){if(!i.has(s))throw new cE("Side channel does not contain "+uE(s))},delete:function(s){if(Zi&&s&&(typeof s=="object"||typeof s=="function")){if(e)return pE(e,s)}else if(io&&t)return t.delete(s);return!1},get:function(s){return Zi&&s&&(typeof s=="object"||typeof s=="function")&&e?hE(e,s):t&&t.get(s)},has:function(s){return Zi&&s&&(typeof s=="object"||typeof s=="function")&&e?fE(e,s):!!t&&t.has(s)},set:function(s,n){Zi&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Zi),dE(e,s,n)):io&&(t||(t=io()),t.set(s,n))}};return i}:io,gE=Ds,yE=La,vE=WA,_E=uy,bE=mE,xE=bE||_E||vE,wE=function(){var e,t={assert:function(i){if(!t.has(i))throw new gE("Side channel does not contain "+yE(i))},delete:function(i){return!!e&&e.delete(i)},get:function(i){return e&&e.get(i)},has:function(i){return!!e&&e.has(i)},set:function(i,s){e||(e=xE()),e.set(i,s)}};return t},TE=String.prototype.replace,AE=/%20/g,Il={RFC1738:"RFC1738",RFC3986:"RFC3986"},xh={default:Il.RFC3986,formatters:{RFC1738:function(r){return TE.call(r,AE,"+")},RFC3986:function(r){return String(r)}},RFC1738:Il.RFC1738,RFC3986:Il.RFC3986},SE=xh,Ml=Object.prototype.hasOwnProperty,Ci=Array.isArray,Kt=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),EE=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(Ci(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);t.obj[t.prop]=s}}},cy=function(e,t){for(var i=t&&t.plainObjects?{__proto__:null}:{},s=0;s<e.length;++s)typeof e[s]<"u"&&(i[s]=e[s]);return i},CE=function r(e,t,i){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(Ci(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Ml.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var s=e;return Ci(e)&&!Ci(t)&&(s=cy(e,i)),Ci(e)&&Ci(t)?(t.forEach(function(n,o){if(Ml.call(e,o)){var a=e[o];a&&typeof a=="object"&&n&&typeof n=="object"?e[o]=r(a,n,i):e.push(n)}else e[o]=n}),e):Object.keys(t).reduce(function(n,o){var a=t[o];return Ml.call(n,o)?n[o]=r(n[o],a,i):n[o]=a,n},s)},PE=function(e,t){return Object.keys(t).reduce(function(i,s){return i[s]=t[s],i},e)},RE=function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},kl=1024,IE=function(e,t,i,s,n){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=kl){for(var u=o.length>=kl?o.slice(l,l+kl):o,c=[],d=0;d<u.length;++d){var h=u.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===SE.RFC1738&&(h===40||h===41)){c[c.length]=u.charAt(d);continue}if(h<128){c[c.length]=Kt[h];continue}if(h<2048){c[c.length]=Kt[192|h>>6]+Kt[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Kt[224|h>>12]+Kt[128|h>>6&63]+Kt[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|u.charCodeAt(d)&1023),c[c.length]=Kt[240|h>>18]+Kt[128|h>>12&63]+Kt[128|h>>6&63]+Kt[128|h&63]}a+=c.join("")}return a},ME=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var n=t[s],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(t.push({obj:o,prop:u}),i.push(c))}return EE(t),e},kE=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},DE=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},OE=function(e,t){return[].concat(e,t)},LE=function(e,t){if(Ci(e)){for(var i=[],s=0;s<e.length;s+=1)i.push(t(e[s]));return i}return t(e)},hy={arrayToObject:cy,assign:PE,combine:OE,compact:ME,decode:RE,encode:IE,isBuffer:DE,isRegExp:kE,maybeMap:LE,merge:CE},dy=wE,Lo=hy,rn=xh,BE=Object.prototype.hasOwnProperty,fy={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},rr=Array.isArray,FE=Array.prototype.push,py=function(r,e){FE.apply(r,rr(e)?e:[e])},NE=Date.prototype.toISOString,lf=rn.default,He={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Lo.encode,encodeValuesOnly:!1,filter:void 0,format:lf,formatter:rn.formatters[lf],indices:!1,serializeDate:function(e){return NE.call(e)},skipNulls:!1,strictNullHandling:!1},$E=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Dl={},UE=function r(e,t,i,s,n,o,a,l,u,c,d,h,f,p,m,g,v,_){for(var y=e,b=_,w=0,S=!1;(b=b.get(Dl))!==void 0&&!S;){var x=b.get(e);if(w+=1,typeof x<"u"){if(x===w)throw new RangeError("Cyclic object value");S=!0}typeof b.get(Dl)>"u"&&(w=0)}if(typeof c=="function"?y=c(t,y):y instanceof Date?y=f(y):i==="comma"&&rr(y)&&(y=Lo.maybeMap(y,function(O){return O instanceof Date?f(O):O})),y===null){if(o)return u&&!g?u(t,He.encoder,v,"key",p):t;y=""}if($E(y)||Lo.isBuffer(y)){if(u){var A=g?t:u(t,He.encoder,v,"key",p);return[m(A)+"="+m(u(y,He.encoder,v,"value",p))]}return[m(t)+"="+m(String(y))]}var C=[];if(typeof y>"u")return C;var E;if(i==="comma"&&rr(y))g&&u&&(y=Lo.maybeMap(y,u)),E=[{value:y.length>0?y.join(",")||null:void 0}];else if(rr(c))E=c;else{var D=Object.keys(y);E=d?D.sort(d):D}var M=l?String(t).replace(/\./g,"%2E"):String(t),T=s&&rr(y)&&y.length===1?M+"[]":M;if(n&&rr(y)&&y.length===0)return T+"[]";for(var P=0;P<E.length;++P){var L=E[P],j=typeof L=="object"&&L&&typeof L.value<"u"?L.value:y[L];if(!(a&&j===null)){var $=h&&l?String(L).replace(/\./g,"%2E"):String(L),W=rr(y)?typeof i=="function"?i(T,$):T:T+(h?"."+$:"["+$+"]");_.set(e,w);var ne=dy();ne.set(Dl,_),py(C,r(j,W,i,s,n,o,a,l,i==="comma"&&g&&rr(y)?null:u,c,d,h,f,p,m,g,v,ne))}}return C},HE=function(e){if(!e)return He;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||He.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=rn.default;if(typeof e.format<"u"){if(!BE.call(rn.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=rn.formatters[i],n=He.filter;(typeof e.filter=="function"||rr(e.filter))&&(n=e.filter);var o;if(e.arrayFormat in fy?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=He.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:He.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:He.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:He.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:He.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?He.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:He.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:He.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:He.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:He.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:He.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:He.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:He.strictNullHandling}},GE=function(r,e){var t=r,i=HE(e),s,n;typeof i.filter=="function"?(n=i.filter,t=n("",t)):rr(i.filter)&&(n=i.filter,s=n);var o=[];if(typeof t!="object"||t===null)return"";var a=fy[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;s||(s=Object.keys(t)),i.sort&&s.sort(i.sort);for(var u=dy(),c=0;c<s.length;++c){var d=s[c],h=t[d];i.skipNulls&&h===null||py(o,UE(h,d,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var f=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Li=hy,$u=Object.prototype.hasOwnProperty,uf=Array.isArray,ke={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Li.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},zE=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},my=function(r,e,t){if(r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1)return r.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return r},jE="utf8=%26%2310003%3B",VE="utf8=%E2%9C%93",WE=function(e,t){var i={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var n=t.parameterLimit===1/0?void 0:t.parameterLimit,o=s.split(t.delimiter,t.throwOnLimitExceeded?n+1:n);if(t.throwOnLimitExceeded&&o.length>n)throw new RangeError("Parameter limit exceeded. Only "+n+" parameter"+(n===1?"":"s")+" allowed.");var a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===VE?u="utf-8":o[l]===jE&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],d=c.indexOf("]="),h=d===-1?c.indexOf("="):d+1,f,p;h===-1?(f=t.decoder(c,ke.decoder,u,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(c.slice(0,h),ke.decoder,u,"key"),p=Li.maybeMap(my(c.slice(h+1),t,uf(i[f])?i[f].length:0),function(g){return t.decoder(g,ke.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=zE(String(p))),c.indexOf("[]=")>-1&&(p=uf(p)?[p]:p);var m=$u.call(i,f);m&&t.duplicates==="combine"?i[f]=Li.combine(i[f],p):(!m||t.duplicates==="last")&&(i[f]=p)}return i},XE=function(r,e,t,i){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var n=r.slice(0,-1).join("");s=Array.isArray(e)&&e[n]?e[n].length:0}for(var o=i?e:my(e,t,s),a=r.length-1;a>=0;--a){var l,u=r[a];if(u==="[]"&&t.parseArrays)l=t.allowEmptyArrays&&(o===""||t.strictNullHandling&&o===null)?[]:Li.combine([],o);else{l=t.plainObjects?{__proto__:null}:{};var c=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,d=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,h=parseInt(d,10);!t.parseArrays&&d===""?l={0:o}:!isNaN(h)&&u!==d&&String(h)===d&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(l=[],l[h]=o):d!=="__proto__"&&(l[d]=o)}o=l}return o},YE=function(e,t,i,s){if(e){var n=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(n),u=l?n.slice(0,l.index):n,c=[];if(u){if(!i.plainObjects&&$u.call(Object.prototype,u)&&!i.allowPrototypes)return;c.push(u)}for(var d=0;i.depth>0&&(l=a.exec(n))!==null&&d<i.depth;){if(d+=1,!i.plainObjects&&$u.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");c.push("["+n.slice(l.index)+"]")}return XE(c,t,i,s)}},qE=function(e){if(!e)return ke;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?ke.charset:e.charset,i=typeof e.duplicates>"u"?ke.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:ke.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ke.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ke.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ke.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ke.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ke.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ke.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:ke.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:ke.decoder,delimiter:typeof e.delimiter=="string"||Li.isRegExp(e.delimiter)?e.delimiter:ke.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ke.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ke.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ke.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ke.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:ke.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ke.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},KE=function(r,e){var t=qE(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?WE(r,t):r,s=t.plainObjects?{__proto__:null}:{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=YE(a,i[a],t,typeof r=="string");s=Li.merge(s,l,t)}return t.allowSparse===!0?s:Li.compact(s)},ZE=GE,JE=KE,QE=xh,eC={formats:QE,parse:JE,stringify:ZE},tC=lA;function Ht(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var rC=/^([a-z0-9.+-]+:)/i,iC=/:[0-9]*$/,sC=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,nC=["<",">",'"',"`"," ","\r",`
`,"	"],oC=["{","}","|","\\","^","`"].concat(nC),Uu=["'"].concat(oC),cf=["%","/","?",";","#"].concat(Uu),hf=["/","?","#"],aC=255,df=/^[+a-z0-9A-Z_-]{0,63}$/,lC=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,uC={javascript:!0,"javascript:":!0},Hu={javascript:!0,"javascript:":!0},ms={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Gu=eC;function $a(r,e,t){if(r&&typeof r=="object"&&r instanceof Ht)return r;var i=new Ht;return i.parse(r,e,t),i}Ht.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",n=r.split(s),o=/\\/g;n[0]=n[0].replace(o,"/"),r=n.join(s);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=sC.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Gu.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=rC.exec(a);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(u&&Hu[u])&&(a=a.substr(2),this.slashes=!0)}if(!Hu[u]&&(d||u&&!ms[u])){for(var h=-1,f=0;f<hf.length;f++){var p=a.indexOf(hf[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,g;h===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",h),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),h=-1;for(var f=0;f<cf.length;f++){var p=a.indexOf(cf[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var _=this.hostname.split(/\./),f=0,y=_.length;f<y;f++){var b=_[f];if(b&&!b.match(df)){for(var w="",S=0,x=b.length;S<x;S++)b.charCodeAt(S)>127?w+="x":w+=b[S];if(!w.match(df)){var A=_.slice(0,f),C=_.slice(f+1),E=b.match(lC);E&&(A.push(E[1]),C.unshift(E[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=A.join(".");break}}}this.hostname.length>aC?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=tC.toASCII(this.hostname));var D=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+D,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!uC[c])for(var f=0,y=Uu.length;f<y;f++){var T=Uu[f];if(a.indexOf(T)!==-1){var P=encodeURIComponent(T);P===T&&(P=escape(T)),a=a.split(T).join(P)}}var L=a.indexOf("#");L!==-1&&(this.hash=a.substr(L),a=a.slice(0,L));var j=a.indexOf("?");if(j!==-1?(this.search=a.substr(j),this.query=a.substr(j+1),e&&(this.query=Gu.parse(this.query)),a=a.slice(0,j)):e&&(this.search="",this.query={}),a&&(this.pathname=a),ms[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",$=this.search||"";this.path=D+$}return this.href=this.format(),this};function cC(r){return typeof r=="string"&&(r=$a(r)),r instanceof Ht?r.format():Ht.prototype.format.call(r)}Ht.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=Gu.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ms[e])&&s!==!1?(s="//"+(s||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+s+t+o+i};function hC(r,e){return $a(r,!1,!0).resolve(e)}Ht.prototype.resolve=function(r){return this.resolveObject($a(r,!1,!0)).format()};Ht.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new Ht;e.parse(r,!1,!0),r=e}for(var t=new Ht,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];t[n]=this[n]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=r[l])}return ms[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!ms[r.protocol]){for(var u=Object.keys(r),c=0;c<u.length;c++){var d=u[c];t[d]=r[d]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Hu[r.protocol]){for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var h=t.pathname||"",f=t.search||"";t.path=h+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=m||p||t.host&&r.pathname,v=g,_=t.pathname&&t.pathname.split("/")||[],y=r.pathname&&r.pathname.split("/")||[],b=t.protocol&&!ms[t.protocol];if(b&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),g=g&&(y[0]===""||_[0]==="")),m)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,_=y;else if(y.length)_||(_=[]),_.pop(),_=_.concat(y),t.search=r.search,t.query=r.query;else if(r.search!=null){if(b){t.host=_.shift(),t.hostname=t.host;var w=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;w&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=_.slice(-1)[0],x=(t.host||r.host||_.length>1)&&(S==="."||S==="..")||S==="",A=0,C=_.length;C>=0;C--)S=_[C],S==="."?_.splice(C,1):S===".."?(_.splice(C,1),A++):A&&(_.splice(C,1),A--);if(!g&&!v)for(;A--;A)_.unshift("..");g&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),x&&_.join("/").substr(-1)!=="/"&&_.push("");var E=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(b){t.hostname=E?"":_.length?_.shift():"",t.host=t.hostname;var w=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;w&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname)}return g=g||t.host&&_.length,g&&!E&&_.unshift(""),_.length>0?t.pathname=_.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};Ht.prototype.parseHost=function(){var r=this.host,e=iC.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var BL=$a,FL=hC,NL=cC;const ff={};function pe(r,e,t=3){if(ff[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(i))),ff[e]=!0}function It(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Ns(r){return r.split("?")[0].split("#")[0]}function dC(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fC(r,e,t){return r.replace(new RegExp(dC(e),"g"),t)}function pC(r,e){let t="",i=0,s=-1,n=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||n===1))if(s!==a-1&&n===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),s=a,n=0;continue}}else if(t.length===2||t.length===1){t="",i=0,s=a,n=0;continue}}}else t.length>0?t+=`/${r.slice(s+1,a)}`:t=r.slice(s+1,a),i=a-s-1;s=a,n=0}else o===46&&n!==-1?++n:n=-1}return t}const Ye={toPosix(r){return fC(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){It(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(It(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=Ns(this.toPosix(e??z.ADAPTER.getBaseUrl())),s=Ns(this.toPosix(t??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Ye.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(It(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const i=r.endsWith("/");return r=pC(r),r.length>0&&i&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return It(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];if(It(i),i.length>0)if(e===void 0)e=i;else{const s=r[t-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(It(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let i=-1,s=!0;const n=this.getProtocol(r),o=r;r=r.slice(n.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!s){i=a;break}}else s=!1;return i===-1?t?"/":this.isUrl(o)?n+r:n:t&&i===1?"//":n+r.slice(0,i)},rootname(r){It(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){It(r),e&&It(e),r=Ns(this.toPosix(r));let t=0,i=-1,s=!0,n;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===47){if(!s){t=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===47){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){It(r),r=Ns(this.toPosix(r));let e=-1,t=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===46?e===-1?e=o:n!==1&&(n=1):e!==-1&&(n=-1)}return e===-1||i===-1||n===0||n===1&&e===i-1&&e===t+1?"":r.slice(e,i)},parse(r){It(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Ns(this.toPosix(r));let t=r.charCodeAt(0);const i=this.isAbsolute(r);let s;e.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,o=0,a=-1,l=!0,u=r.length-1,c=0;for(;u>=s;--u){if(t=r.charCodeAt(u),t===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),t===46?n===-1?n=u:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&i?(e.name=r.slice(1,n),e.base=r.slice(1,a)):(e.name=r.slice(o,n),e.base=r.slice(o,a)),e.ext=r.slice(n,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Ol;async function mC(){return Ol??(Ol=(async()=>{var n;const r=document.createElement("canvas").getContext("webgl");if(!r)return ht.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return ht.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(t),(n=r.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?ht.PMA:ht.UNPACK})()),Ol}let Ll;function gC(){return typeof Ll>"u"&&(Ll=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!z.ADAPTER.getWebGLRenderingContext())return!1;const t=z.ADAPTER.createCanvas();let i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const s=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),Ll}var yC={grad:.9,turn:360,rad:360/(2*Math.PI)},br=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Xe=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},St=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},gy=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},pf=function(r){return{r:St(r.r,0,255),g:St(r.g,0,255),b:St(r.b,0,255),a:St(r.a)}},Bl=function(r){return{r:Xe(r.r),g:Xe(r.g),b:Xe(r.b),a:Xe(r.a,3)}},vC=/^#([0-9a-f]{3,8})$/i,so=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},yy=function(r){var e=r.r,t=r.g,i=r.b,s=r.a,n=Math.max(e,t,i),o=n-Math.min(e,t,i),a=o?n===e?(t-i)/o:n===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:s}},vy=function(r){var e=r.h,t=r.s,i=r.v,s=r.a;e=e/360*6,t/=100,i/=100;var n=Math.floor(e),o=i*(1-t),a=i*(1-(e-n)*t),l=i*(1-(1-e+n)*t),u=n%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:s}},mf=function(r){return{h:gy(r.h),s:St(r.s,0,100),l:St(r.l,0,100),a:St(r.a)}},gf=function(r){return{h:Xe(r.h),s:Xe(r.s),l:Xe(r.l),a:Xe(r.a,3)}},yf=function(r){return vy((t=(e=r).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},sn=function(r){return{h:(e=yy(r)).h,s:(s=(200-(t=e.s))*(i=e.v)/100)>0&&s<200?t*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,i,s},_C=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bC=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zu={string:[[function(r){var e=vC.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Xe(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Xe(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=xC.exec(r)||wC.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:pf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=_C.exec(r)||bC.exec(r);if(!e)return null;var t,i,s=mf({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(yC[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return yf(s)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,i=r.b,s=r.a,n=s===void 0?1:s;return br(e)&&br(t)&&br(i)?pf({r:Number(e),g:Number(t),b:Number(i),a:Number(n)}):null},"rgb"],[function(r){var e=r.h,t=r.s,i=r.l,s=r.a,n=s===void 0?1:s;if(!br(e)||!br(t)||!br(i))return null;var o=mf({h:Number(e),s:Number(t),l:Number(i),a:Number(n)});return yf(o)},"hsl"],[function(r){var e=r.h,t=r.s,i=r.v,s=r.a,n=s===void 0?1:s;if(!br(e)||!br(t)||!br(i))return null;var o=function(a){return{h:gy(a.h),s:St(a.s,0,100),v:St(a.v,0,100),a:St(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(n)});return vy(o)},"hsv"]]},vf=function(r,e){for(var t=0;t<e.length;t++){var i=e[t][0](r);if(i)return[i,e[t][1]]}return[null,void 0]},TC=function(r){return typeof r=="string"?vf(r.trim(),zu.string):typeof r=="object"&&r!==null?vf(r,zu.object):[null,void 0]},Fl=function(r,e){var t=sn(r);return{h:t.h,s:St(t.s+100*e,0,100),l:t.l,a:t.a}},Nl=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},_f=function(r,e){var t=sn(r);return{h:t.h,s:t.s,l:St(t.l+100*e,0,100),a:t.a}},ju=function(){function r(e){this.parsed=TC(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Xe(Nl(this.rgba),2)},r.prototype.isDark=function(){return Nl(this.rgba)<.5},r.prototype.isLight=function(){return Nl(this.rgba)>=.5},r.prototype.toHex=function(){return e=Bl(this.rgba),t=e.r,i=e.g,s=e.b,o=(n=e.a)<1?so(Xe(255*n)):"","#"+so(t)+so(i)+so(s)+o;var e,t,i,s,n,o},r.prototype.toRgb=function(){return Bl(this.rgba)},r.prototype.toRgbString=function(){return e=Bl(this.rgba),t=e.r,i=e.g,s=e.b,(n=e.a)<1?"rgba("+t+", "+i+", "+s+", "+n+")":"rgb("+t+", "+i+", "+s+")";var e,t,i,s,n},r.prototype.toHsl=function(){return gf(sn(this.rgba))},r.prototype.toHslString=function(){return e=gf(sn(this.rgba)),t=e.h,i=e.s,s=e.l,(n=e.a)<1?"hsla("+t+", "+i+"%, "+s+"%, "+n+")":"hsl("+t+", "+i+"%, "+s+"%)";var e,t,i,s,n},r.prototype.toHsv=function(){return e=yy(this.rgba),{h:Xe(e.h),s:Xe(e.s),v:Xe(e.v),a:Xe(e.a,3)};var e},r.prototype.invert=function(){return Zt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Zt(Fl(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Zt(Fl(this.rgba,-e))},r.prototype.grayscale=function(){return Zt(Fl(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Zt(_f(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Zt(_f(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Zt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Xe(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=sn(this.rgba);return typeof e=="number"?Zt({h:e,s:t.s,l:t.l,a:t.a}):Xe(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Zt(e).toHex()},r}(),Zt=function(r){return r instanceof ju?r:new ju(r)},bf=[],AC=function(r){r.forEach(function(e){bf.indexOf(e)<0&&(e(ju,zu),bf.push(e))})};function SC(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in t)i[t[s]]=s;var n={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),d=1/0,h="black";if(!n.length)for(var f in t)n[f]=new r(t[f]).toRgb();for(var p in t){var m=(a=c,l=n[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<d&&(d=m,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}AC([SC]);const rs=class Bo{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Bo)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,n)=>s===t[n]);if(e!==null&&t!==null){const s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,s,n]=Bo.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,n=n*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,s,n]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}normalize(e){let t,i,s,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,n=255]=e,t/=255,i/=255,s/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Bo.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Zt(e);o.isValid()&&({r:t,g:i,b:s,a:n}=o.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,n)=>{e[n]=Math.min(Math.max(s,t),i)}),e)}};rs.shared=new rs,rs.temp=new rs,rs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ee=rs;function EC(r){return pe("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ee.shared.setValue(r).toHex()}function CC(r){return pe("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ee.shared.setValue(r).toNumber()}function PC(){const r=[],e=[];for(let i=0;i<32;i++)r[i]=i,e[i]=i;r[re.NORMAL_NPM]=re.NORMAL,r[re.ADD_NPM]=re.ADD,r[re.SCREEN_NPM]=re.SCREEN,e[re.NORMAL]=re.NORMAL_NPM,e[re.ADD]=re.ADD_NPM,e[re.SCREEN]=re.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const _y=PC();function by(r,e){return _y[e?1:0][r]}function RC(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,s=0;i<t;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function xy(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ra(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function xf(r){return!(r&r-1)&&!!r}function wf(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function gs(r,e,t){const i=r.length;let s;if(e>=i||t===0)return;t=e+t>i?i-e:t;const n=i-t;for(s=e;s<n;++s)r[s]=r[s+t];r.length=n}function qr(r){return r===0?0:r<0?-1:1}let IC=0;function Bi(){return++IC}const Vu=class{constructor(r,e,t,i){this.left=r,this.top=e,this.right=t,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Vu.EMPTY=new Vu(0,0,0,0);let Tf=Vu;const Af={},Jt=Object.create(null),$r=Object.create(null);class MC{constructor(e,t,i){this._canvas=z.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||z.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Sf(r,e,t){for(let i=0,s=4*t*e;i<e;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function Ef(r,e,t,i,s){const n=4*e;for(let o=i,a=i*n+4*t;o<=s;++o,a+=n)if(r[a+3]!==0)return!1;return!0}function kC(r){const{width:e,height:t}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,e,t).data;let n=0,o=0,a=e-1,l=t-1;for(;o<t&&Sf(s,e,o);)++o;if(o===t)return Tf.EMPTY;for(;Sf(s,e,l);)--l;for(;Ef(s,e,n,o,l);)++n;for(;Ef(s,e,a,o,l);)--a;return++a,++l,new Tf(n,o,a,l)}function DC(r){const e=kC(r),{width:t,height:i}=e;let s=null;if(!e.isEmpty()){const n=r.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(e.left,e.top,t,i)}return{width:t,height:i,data:s}}function OC(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Br(r,e=1){var i;const t=(i=z.RETINA_PREFIX)==null?void 0:i.exec(r);return t?parseFloat(t[1]):e}var H=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(H||{});const Wu=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Cf=(r,e)=>Wu(r).priority??e,K={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Wu).forEach(e=>{e.type.forEach(t=>{var i,s;return(s=(i=this._removeHandlers)[t])==null?void 0:s.call(i,e)})}),this},add(...r){return r.map(Wu).forEach(e=>{e.type.forEach(t=>{var n,o;const i=this._addHandlers,s=this._queue;i[t]?(n=i[t])==null||n.call(i,e):(s[t]=s[t]||[],(o=s[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=e,s[r]=t;const n=this._queue;return n[r]&&((o=n[r])==null||o.forEach(a=>e(a)),delete n[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,n)=>Cf(n,t)-Cf(s,t)))},i=>{const s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}};class Xu{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const LC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function BC(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function FC(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=LC.replace(/%forloop%/gi,BC(r));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const $l=0,Ul=1,Hl=2,Gl=3,zl=4,jl=5;class vr{constructor(){this.data=0,this.blendMode=re.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<$l)}set blend(e){!!(this.data&1<<$l)!==e&&(this.data^=1<<$l)}get offsets(){return!!(this.data&1<<Ul)}set offsets(e){!!(this.data&1<<Ul)!==e&&(this.data^=1<<Ul)}get culling(){return!!(this.data&1<<Hl)}set culling(e){!!(this.data&1<<Hl)!==e&&(this.data^=1<<Hl)}get depthTest(){return!!(this.data&1<<Gl)}set depthTest(e){!!(this.data&1<<Gl)!==e&&(this.data^=1<<Gl)}get depthMask(){return!!(this.data&1<<jl)}set depthMask(e){!!(this.data&1<<jl)!==e&&(this.data^=1<<jl)}get clockwiseFrontFace(){return!!(this.data&1<<zl)}set clockwiseFrontFace(e){!!(this.data&1<<zl)!==e&&(this.data^=1<<zl)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==re.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new vr;return e.depthTest=!1,e.blend=!0,e}}vr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Yu=[];function wy(r,e){if(!r)return null;let t="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(t=i[1].toLowerCase())}for(let i=Yu.length-1;i>=0;--i){const s=Yu[i];if(s.test&&s.test(r,t))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Gt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,s,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let d=0,h=c.length;d<h;d++)c[d][u](e,t,i,s,n,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Gt.prototype,{dispatch:{value:Gt.prototype.emit},run:{value:Gt.prototype.emit}});class bn{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Gt("setRealSize"),this.onUpdate=new Gt("update"),this.onError=new Gt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Ua extends bn{constructor(e,t){const{width:i,height:s}=t||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,i){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ht.UNPACK);const n=t.realWidth,o=t.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(t.target,0,0,0,n,o,t.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(t.target,0,i.internalFormat,n,o,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const NC={scaleMode:Sr.NEAREST,alphaMode:ht.NPM},qu=class is extends $n{constructor(e=null,t=null){super(),t=Object.assign({},is.defaultOptions,t);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:o,width:a,height:l,wrapMode:u,format:c,type:d,target:h,resolution:f,resourceOptions:p}=t;e&&!(e instanceof bn)&&(e=wy(e,p),e.internal=!0),this.resolution=f||z.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=u,this._scaleMode=o,this.format=c,this.type=d,this.target=h,this.alphaMode=i,this.uid=Bi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=xf(this.realWidth)&&xf(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete $r[this.cacheId],delete Jt[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),is.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=z.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Bi()}`}n=e._pixiId}let o=$r[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return o||(o=new is(e,t),o.cacheId=n,is.addToCache(o,n)),o}static fromBuffer(e,t,i,s){e=e||new Float32Array(t*i*4);const n=new Ua(e,{width:t,height:i,...s==null?void 0:s.resourceOptions});let o,a;return e instanceof Float32Array?(o=F.RGBA,a=Q.FLOAT):e instanceof Int32Array?(o=F.RGBA_INTEGER,a=Q.INT):e instanceof Uint32Array?(o=F.RGBA_INTEGER,a=Q.UNSIGNED_INT):e instanceof Int16Array?(o=F.RGBA_INTEGER,a=Q.SHORT):e instanceof Uint16Array?(o=F.RGBA_INTEGER,a=Q.UNSIGNED_SHORT):e instanceof Int8Array?(o=F.RGBA,a=Q.BYTE):(o=F.RGBA,a=Q.UNSIGNED_BYTE),n.internal=!0,new is(n,Object.assign({},NC,{type:a,format:o},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),$r[t]&&$r[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),$r[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=$r[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete $r[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete $r[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};qu.defaultOptions={mipmap:mr.POW2,anisotropicLevel:0,scaleMode:Sr.LINEAR,wrapMode:Qr.CLAMP,alphaMode:ht.UNPACK,target:fs.TEXTURE_2D,format:F.RGBA,type:Q.UNSIGNED_BYTE},qu._globalBatch=0;let le=qu;class Ku{constructor(){this.texArray=null,this.blend=0,this.type=ar.TRIANGLES,this.start=0,this.size=0,this.data=null}}let $C=0,ze=class Ty{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=$C++,this.disposeRunner=new Gt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?cr.ELEMENT_ARRAY_BUFFER:cr.ARRAY_BUFFER}get index(){return this.type===cr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Ty(e)}};class ia{constructor(e,t=0,i=!1,s=Q.FLOAT,n,o,a,l=1){this.buffer=e,this.size=t,this.normalized=i,this.type=s,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,i,s,n){return new ia(e,t,i,s,n)}}const UC={Float32Array,Uint32Array,Int32Array,Uint8Array};function HC(r,e){let t=0,i=0;const s={};for(let l=0;l<r.length;l++)i+=e[l],t+=r[l].length;const n=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=e[l],c=r[l],d=xy(c);s[d]||(s[d]=new UC[d](n)),o=s[d];for(let h=0;h<c.length;h++){const f=(h/u|0)*i+a,p=h%u;o[f+p]=c[h]}a+=u}return new Float32Array(n)}const Pf={5126:4,5123:2,5121:1};let GC=0;const zC={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ni{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=GC++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Gt("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,s=!1,n,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ze||(t instanceof Array&&(t=new Float32Array(t)),t=new ze(t));const u=e.split("|");if(u.length>1){for(let d=0;d<u.length;d++)this.addAttribute(u[d],t,i,s,n);return this}let c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new ia(c,i,s,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ze||(e instanceof Array&&(e=new Uint16Array(e)),e=new ze(e)),e.type=cr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],i=new ze;let s;for(s in this.attributes){const n=this.attributes[s],o=this.buffers[n.buffer];e.push(o.data),t.push(n.size*Pf[n.type]/4),n.buffer=0}for(i.data=HC(e,t),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ni;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ze(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new ia(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=cr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new ni,i=[],s=[],n=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new zC[xy(o.buffers[a].data)](s[a]),t.buffers[a]=new ze(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=cr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){c=d;break}for(const d in o.attributes){const h=o.attributes[d];(h.buffer|0)===c&&(l+=h.size*Pf[h.type]/4)}for(let d=0;d<e.length;d++){const h=e[d].indexBuffer.data;for(let f=0;f<h.length;f++)t.indexBuffer.data[f+u]+=a;a+=e[d].buffers[c].data.length/l,u+=h.length}}return t}}class Ay extends ni{constructor(e=!1){super(),this._buffer=new ze(null,e,!1),this._indexBuffer=new ze(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Q.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Q.FLOAT).addAttribute("aColor",this._buffer,4,!0,Q.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Q.FLOAT).addIndex(this._indexBuffer)}}const sa=Math.PI*2,jC=180/Math.PI,VC=Math.PI/180;var Ke=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Ke||{});class ye{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new ye(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}ye.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const no=[new ye,new ye,new ye,new ye];class ue{constructor(e=0,t=0,i=0,s=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(s),this.type=Ke.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ue(0,0,0,0)}clone(){return new ue(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const A=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=A)return!1;const C=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>C}const i=this.left,s=this.right,n=this.top,o=this.bottom;if(s<=i||o<=n)return!1;const a=no[0].set(e.left,e.top),l=no[1].set(e.left,e.bottom),u=no[2].set(e.right,e.top),c=no[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(t.a*t.d-t.b*t.c);if(d===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=i||Math.min(a.x,l.x,u.x,c.x)>=s||Math.max(a.y,l.y,u.y,c.y)<=n||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;const h=d*(l.y-a.y),f=d*(a.x-l.x),p=h*i+f*n,m=h*s+f*n,g=h*i+f*o,v=h*s+f*o;if(Math.max(p,m,g,v)<=h*a.x+f*a.y||Math.min(p,m,g,v)>=h*c.x+f*c.y)return!1;const _=d*(a.y-u.y),y=d*(u.x-a.x),b=_*i+y*n,w=_*s+y*n,S=_*i+y*o,x=_*s+y*o;return!(Math.max(b,w,S,x)<=_*a.x+y*a.y||Math.min(b,w,S,x)>=_*c.x+y*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=s,this.height=n-s,this}}ue.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ha{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=Ke.CIRC}clone(){return new Ha(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-e,n=this.y-t;return s*=s,n*=n,s+n<=i}getBounds(){return new ue(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Ha.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ga{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.width=i,this.height=s,this.type=Ke.ELIP}clone(){return new Ga(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,s=(t-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new ue(this.x-this.width,this.y-this.height,this.width,this.height)}}Ga.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ki{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let s=0,n=t.length;s<n;s++)i.push(t[s].x,t[s].y);t=i}this.points=t,this.type=Ke.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new ki(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let i=!1;const s=this.points.length/2;for(let n=0,o=s-1;n<s;o=n++){const a=this.points[n*2],l=this.points[n*2+1],u=this.points[o*2],c=this.points[o*2+1];l>t!=c>t&&e<(u-a)*((t-l)/(c-l))+a&&(i=!i)}return i}}ki.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class za{constructor(e=0,t=0,i=0,s=0,n=20){this.x=e,this.y=t,this.width=i,this.height=s,this.radius=n,this.type=Ke.RREC}clone(){return new za(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),n=t-(this.y+i);const o=i*i;if(s*s+n*n<=o||(s=e-(this.x+this.width-i),s*s+n*n<=o)||(n=t-(this.y+this.height-i),s*s+n*n<=o)||(s=e-(this.x+i),s*s+n*n<=o))return!0}return!1}}za.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Ce{constructor(e=1,t=0,i=0,s=1,n=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=s,this.tx=n,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,s,n,o){return this.a=e,this.b=t,this.c=i,this.d=s,this.tx=n,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new ye;const i=e.x,s=e.y;return t.x=this.a*i+this.c*s+this.tx,t.y=this.b*i+this.d*s+this.ty,t}applyInverse(e,t){t=t||new ye;const i=1/(this.a*this.d+this.c*-this.b),s=e.x,n=e.y;return t.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.a,n=this.c,o=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,s=this.c,n=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this}setTransform(e,t,i,s,n,o,a,l,u){return this.a=Math.cos(a+u)*n,this.b=Math.sin(a+u)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,s=this.c,n=this.d,o=e.pivot,a=-Math.atan2(-s,n),l=Math.atan2(i,t),u=Math.abs(a+l);return u<1e-5||Math.abs(sa-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(s*s+n*n),e.position.x=this.tx+(o.x*t+o.y*s),e.position.y=this.ty+(o.x*i+o.y*n),e}invert(){const e=this.a,t=this.b,i=this.c,s=this.d,n=this.tx,o=e*s-t*i;return this.a=s/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(e*this.ty-t*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ce;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Ce}static get TEMP_MATRIX(){return new Ce}}Ce.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const _i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],bi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],xi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],wi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Zu=[],Sy=[],oo=Math.sign;function WC(){for(let r=0;r<16;r++){const e=[];Zu.push(e);for(let t=0;t<16;t++){const i=oo(_i[r]*_i[t]+xi[r]*bi[t]),s=oo(bi[r]*_i[t]+wi[r]*bi[t]),n=oo(_i[r]*xi[t]+xi[r]*wi[t]),o=oo(bi[r]*xi[t]+wi[r]*wi[t]);for(let a=0;a<16;a++)if(_i[a]===i&&bi[a]===s&&xi[a]===n&&wi[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new Ce;e.set(_i[r],bi[r],xi[r],wi[r],0,0),Sy.push(e)}}WC();const Pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>_i[r],uY:r=>bi[r],vX:r=>xi[r],vY:r=>wi[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>Zu[r][e],sub:(r,e)=>Zu[r][Pe.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Pe.S:Pe.N:Math.abs(e)*2<=Math.abs(r)?r>0?Pe.E:Pe.W:e>0?r>0?Pe.SE:Pe.SW:r>0?Pe.NE:Pe.NW,matrixAppendRotationInv:(r,e,t=0,i=0)=>{const s=Sy[Pe.inv(e)];s.tx=t,s.ty=i,r.append(s)}};class Cr{constructor(e,t,i=0,s=0){this._x=i,this._y=s,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Cr(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Cr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Ju=class{constructor(){this.worldTransform=new Ce,this.localTransform=new Ce,this.position=new Cr(this.onChange,this,0,0),this.scale=new Cr(this.onChange,this,1,1),this.pivot=new Cr(this.onChange,this,0,0),this.skew=new Cr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};Ju.IDENTITY=new Ju;let wh=Ju;wh.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var XC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,YC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Rf(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}function Vl(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Ey(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Vl(2*e);case"bvec3":return Vl(3*e);case"bvec4":return Vl(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ys=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],qC={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},KC={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function ZC(r,e){var i;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const n=e[s];if(!n){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=r.uniforms[s];let a=!1;for(let l=0;l<ys.length;l++)if(ys[l].test(n,o)){t.push(ys[l].code(s,o)),a=!0;break}if(!a){const l=(n.size===1&&!n.isArray?qC:KC)[n.type].replace("location",`ud["${s}"].location`);t.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const Cy={};let Ji=Cy;function JC(){if(Ji===Cy||Ji!=null&&Ji.isContextLost()){const r=z.ADAPTER.createCanvas();let e;z.PREFER_ENV>=zi.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ji=e}return Ji}let ao;function QC(){if(!ao){ao=At.MEDIUM;const r=JC();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(ao=e.precision?At.HIGH:At.MEDIUM)}}return ao}function If(r,e){const t=r.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),i=r.getShaderInfoLog(e),s=i.split(`
`),n={},o=s.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!n[u]?(n[u]=!0,!0):!1),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function eP(r,e,t,i){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||If(r,t),r.getShaderParameter(i,r.COMPILE_STATUS)||If(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const tP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Py(r){return tP[r]}let lo=null;const Mf={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ry(r,e){if(!lo){const t=Object.keys(Mf);lo={};for(let i=0;i<t.length;++i){const s=t[i];lo[r[s]]=Mf[s]}}return lo[e]}function kf(r,e,t){if(r.substring(0,9)!=="precision"){let i=e;return e===At.HIGH&&t!==At.HIGH&&(i=At.MEDIUM),`precision ${i} float;
${r}`}else if(t!==At.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let $s;function rP(){if(typeof $s=="boolean")return $s;try{$s=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{$s=!1}return $s}let iP=0;const uo={},Qu=class ss{constructor(e,t,i="pixi-shader",s={}){this.extra={},this.id=iP++,this.vertexSrc=e||ss.defaultVertexSrc,this.fragmentSrc=t||ss.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),uo[i]?(uo[i]++,i+=`-${uo[i]}`):uo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=kf(this.vertexSrc,ss.defaultVertexPrecision,At.HIGH),this.fragmentSrc=kf(this.fragmentSrc,ss.defaultFragmentPrecision,QC())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return YC}static get defaultFragmentSrc(){return XC}static from(e,t,i){const s=e+t;let n=Af[s];return n||(Af[s]=n=new ss(e,t,i)),n}};Qu.defaultVertexPrecision=At.HIGH,Qu.defaultFragmentPrecision=Er.apple.device?At.HIGH:At.MEDIUM;let Pr=Qu,sP=0;class zt{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=sP++,this.static=!!t,this.ubo=!!i,e instanceof ze?(this.buffer=e,this.buffer.type=cr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ze(new Float32Array(1)),this.buffer.type=cr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(!this.ubo)this.uniforms[e]=new zt(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,i){return new zt(e,t,i)}static uboFrom(e,t){return new zt(e,t??!0,!0)}}class hr{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof zt?this.uniformGroup=t:this.uniformGroup=new zt(t):this.uniformGroup=new zt({}),this.disposeRunner=new Gt("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const s=t.uniforms[i];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const s=Pr.from(e,t);return new hr(s,i)}}class nP{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let n=0;n<e;n++)i[n]=n;this.defaultGroupCache[e]=zt.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Pr(this.vertexSrc,s)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ce,default:this.defaultGroupCache[e]};return new hr(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class ec{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function oP(){return!Er.apple.device}function aP(r){let e=!0;const t=z.ADAPTER.getNavigator();if(Er.tablet||Er.phone){if(Er.apple.device){const i=t.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(Er.android.device){const i=t.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?r:4}class ja{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var lP=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,uP=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const js=class Dt extends ja{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Ay,this.vertexSize=6,this.state=vr.for2d(),this.size=Dt.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??aP(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??oP(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return pe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return uP}static get defaultFragmentTemplate(){return lP}setShaderGenerator({vertex:e=Dt.defaultVertexSrc,fragment:t=Dt.defaultFragmentTemplate}={}){this.shaderGenerator=new nP(e,t)}contextChange(){const e=this.renderer.gl;z.PREFER_ENV===zi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Dt.defaultMaxTextures),this.maxTextures=FC(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Dt,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Ku);for(;t.length<s;)t.push(new ec);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=Dt._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++le._globalBatch,l=0,u=i[0],c=0;s.copyBoundTextures(n,t);for(let d=0;d<this._bufferSize;++d){const h=e[d];e[d]=null,h._batchEnabled!==a&&(u.count>=t&&(s.boundArray(u,n,a,t),this.buildDrawCalls(u,c,d),c=d,u=i[++l],++a),h._batchEnabled=a,h.touched=o,u.elements[u.count++]=h)}u.count>0&&(s.boundArray(u,n,a,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(let d=0;d<n.length;d++)n[d]=null;le._globalBatch=a}buildDrawCalls(e,t,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:o,vertexSize:a}=this,l=Dt._drawCallPool;let u=this._dcIndex,c=this._aIndex,d=this._iIndex,h=l[u];h.start=this._iIndex,h.texArray=e;for(let f=t;f<i;++f){const p=s[f],m=p._texture.baseTexture,g=_y[m.alphaMode?1:0][p.blendMode];s[f]=null,t<f&&h.blend!==g&&(h.size=d-h.start,t=f,h=l[++u],h.texArray=e,h.start=d),this.packInterleavedGeometry(p,n,o,c,d),c+=p.vertexData.length/2*a,d+=p.indices.length,h.blend=g}t<i&&(h.size=d-h.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;Dt.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,s=Dt._drawCallPool;let n=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:c,blend:d}=s[o];n!==a&&(n=a,this.bindAndClearTexArray(a)),this.state.blendMode=d,i.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Dt.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=ra(Math.ceil(e/8)),i=wf(t),s=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new Xu(s*this.vertexSize*4)),n}getIndexBuffer(e){const t=ra(Math.ceil(e/12)),i=wf(t),s=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(e,t,i,s,n){const{uint32View:o,float32View:a}=t,l=s/this.vertexSize,u=e.uvs,c=e.indices,d=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=Ee.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<d.length;m+=2)a[s++]=d[m],a[s++]=d[m+1],a[s++]=u[m],a[s++]=u[m+1],o[s++]=p,a[s++]=h;for(let m=0;m<c.length;m++)i[n++]=l+c[m]}};js.defaultBatchSize=4096,js.extension={name:"batch",type:H.RendererPlugin},js._drawCallPool=[],js._textureArrayPool=[];let Ti=js;K.add(Ti);var cP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,hP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const tc=class Vs extends hr{constructor(e,t,i){const s=Pr.from(e||Vs.defaultVertexSrc,t||Vs.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Vs.defaultResolution,this.multisample=Vs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new vr}apply(e,t,i,s,n){e.applyFilter(this,t,i,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return hP}static get defaultFragmentSrc(){return cP}};tc.defaultResolution=1,tc.defaultMultisample=$e.NONE;let lt=tc;class na{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ee(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:i,backgroundAlpha:s}=e,n=i??t;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}na.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},na.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"background"};K.add(na);class Iy{constructor(e){this.renderer=e,this.emptyRenderer=new ja(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let s=t-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,t,i,s){const{elements:n,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const c=n[u],d=c._batchLocation;if(d>=0&&d<s&&t[d]===c){o[u]=d;continue}for(;l<s;){const h=t[l];if(h&&h._batchEnabled===i&&h._batchLocation===l){l++;continue}o[u]=l,c._batchLocation=l,t[l]=c;break}}}destroy(){this.renderer=null}}Iy.extension={type:H.RendererSystem,name:"batch"};K.add(Iy);let Df=0;class oa{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Df++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Df++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(z.PREFER_ENV>=zi.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}oa.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},oa.extension={type:H.RendererSystem,name:"context"};K.add(oa);class rc{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Gt("disposeFramebuffer"),this.multisample=$e.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new le(null,{scaleMode:Sr.NEAREST,resolution:1,mipmap:mr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new le(null,{scaleMode:Sr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mr.OFF,format:F.DEPTH_COMPONENT,type:Q.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(e/n,t/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class My extends le{constructor(e={}){if(typeof e=="number"){const t=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];e={width:t,height:i,scaleMode:s,resolution:n}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=$e.NONE),super(null,e),this.mipmap=mr.OFF,this.valid=!0,this._clear=new Ee([0,0,0,0]),this.framebuffer=new rc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fr extends bn{constructor(e){const t=e,i=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,s=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(i,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){i===void 0&&!t.startsWith("data:")?e.crossOrigin=OC(t):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,t,i,s){const n=e.gl,o=t.realWidth,a=t.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ht.UNPACK),!this.noSubImage&&t.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,i.type,s):(i.width=o,i.height=a,n.texImage2D(t.target,0,i.internalFormat,t.format,i.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}dispose(){this.source=null}}class ky extends Fr{constructor(e,t){if(t=t||{},typeof e=="string"){const i=new Image;Fr.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>t(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ht.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=t._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Th{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const s=t.width,n=t.height;if(i){const o=e.width/2/s,a=e.height/2/n,l=e.x/s+o,u=e.y/n+a;i=Pe.add(i,Pe.NW),this.x0=l+o*Pe.uX(i),this.y0=u+a*Pe.uY(i),i=Pe.add(i,2),this.x1=l+o*Pe.uX(i),this.y1=u+a*Pe.uY(i),i=Pe.add(i,2),this.x2=l+o*Pe.uX(i),this.y2=u+a*Pe.uY(i),i=Pe.add(i,2),this.x3=l+o*Pe.uX(i),this.y3=u+a*Pe.uY(i)}else this.x0=e.x/s,this.y0=e.y/n,this.x1=(e.x+e.width)/s,this.y1=e.y/n,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/n,this.x3=e.x/s,this.y3=(e.y+e.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Th.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Of=new Th;function co(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class q extends $n{constructor(e,t,i,s,n,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ue(0,0,1,1)),e instanceof q&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=Of,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ye(o.x,o.y):new ye(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&Jt[t.url]&&q.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,q.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new q(this.baseTexture,!this.noFrame&&e,t,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===Of&&(this._uvs=new Th),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=z.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else if(e instanceof le){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Bi()}`,le.addToCache(e,e.cacheId)}n=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Bi()}`}n=e._pixiId}let o=Jt[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(e instanceof le)?(t.resolution||(t.resolution=Br(e)),o=new q(new le(e,t)),o.baseTexture.cacheId=n,le.addToCache(o.baseTexture,n),q.addToCache(o,n)):!o&&e instanceof le&&(o=new q(e),q.addToCache(o,n)),o}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),s=q.from(e,Object.assign({resourceOptions:i},t),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(e,t,i,s){return new q(le.fromBuffer(e,t,i,s))}static fromLoader(e,t,i,s){const n=new le(e,Object.assign({scaleMode:le.defaultOptions.scaleMode,resolution:Br(t)},s)),{resource:o}=n;o instanceof ky&&(o.url=t);const a=new q(n);return i||(i=t),le.addToCache(a.baseTexture,i),q.addToCache(a,i),i!==t&&(le.addToCache(a.baseTexture,t),q.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Jt[t]&&Jt[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Jt[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Jt[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Jt[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Jt[e.textureCacheIds[t]]===e&&delete Jt[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:s,height:n}=e,o=t+s>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${t} + ${s} = ${t+s} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return q._EMPTY||(q._EMPTY=new q(new le),co(q._EMPTY),co(q._EMPTY.baseTexture)),q._EMPTY}static get WHITE(){if(!q._WHITE){const e=z.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),q._WHITE=new q(le.from(e)),co(q._WHITE),co(q._WHITE.baseTexture)}return q._WHITE}}class Vi extends q{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const s=this.baseTexture.resolution,n=Math.round(e*s)/s,o=Math.round(t*s)/s;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Vi(new My(e))}}class Dy{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,i=$e.NONE){const s=new My(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new Vi(s)}getOptimalTexture(e,t,i=1,s=$e.NONE){let n;e=Math.max(Math.ceil(e*i-1e-6),1),t=Math.max(Math.ceil(t*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=ra(e),t=ra(t),n=((e&65535)<<16|t&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(e,t,s)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(e,t,i){const s=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||$e.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const i=this.texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const i=this.texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}Dy.SCREEN_KEY=-1;class dP extends ni{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Oy extends ni{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ze(this.vertices),this.uvBuffer=new ze(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+t.width/e.width,this.uvs[3]=s,this.uvs[4]=i+t.width/e.width,this.uvs[5]=s+t.height/e.height,this.uvs[6]=i,this.uvs[7]=s+t.height/e.height,i=t.x,s=t.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+t.width,this.vertices[3]=s,this.vertices[4]=i+t.width,this.vertices[5]=s+t.height,this.vertices[6]=i,this.vertices[7]=s+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class fP{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=$e.NONE,this.sourceFrame=new ue,this.destinationFrame=new ue,this.bindingSourceFrame=new ue,this.bindingDestinationFrame=new ue,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ho=[new ye,new ye,new ye,new ye],Wl=new Ce;class Ly{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Dy,this.statePool=[],this.quad=new dP,this.quadUv=new Oy,this.tempRect=new ue,this.activeState={},this.globalUniforms=new zt({outputFrame:new ue,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new fP,o=i.renderTexture;let a,l;if(o.current){const g=o.current;a=g.resolution,l=g.multisample}else a=i.resolution,l=i.multisample;let u=t[0].resolution||a,c=t[0].multisample??l,d=t[0].padding,h=t[0].autoFit,f=t[0].legacy??!0;for(let g=1;g<t.length;g++){const v=t[g];u=Math.min(u,v.resolution||a),c=Math.min(c,v.multisample??l),d=this.useMaxPadding?Math.max(d,v.padding):d+v.padding,h=h&&v.autoFit,f=f||(v.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(n),n.resolution=u,n.multisample=c,n.legacy=f,n.target=e,n.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),n.sourceFrame.pad(d);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(Wl.copyFrom(i.projection.transform).invert(),p),h?(n.sourceFrame.fit(p),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(p)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,u,c),n.filters=t,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=n.sourceFrame.width,m.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,m),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;const n=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(n[0]=t.destinationFrame.width,n[1]=t.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*t.resolution),o[1]=Math.round(n[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*n[2]-.5*o[2],a[3]=t.sourceFrame.height*n[3]-.5*o[3],t.legacy){const u=s.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,l.renderTexture,ir.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;let d=0;for(d=0;d<i.length-1;++d){d===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),i[d].apply(this,u,c,ir.CLEAR,t);const h=u;u=c,c=h}i[d].apply(this,u,l.renderTexture,ir.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=ir.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(t===ir.CLEAR||t===ir.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,s){const n=this.renderer;n.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ar.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ar.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=t._texture,o=e.set(s.width,0,0,s.height,i.x,i.y),a=t.worldTransform.copyTo(Ce.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,s=$e.NONE){return this.texturePool.getOptimalTexture(e,t,i,s)}getFilterTexture(e,t,i){if(typeof e=="number"){const n=e;e=t,t=n}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||$e.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=ho[0],s=ho[1],n=ho[2],o=ho[3];i.set(t.left,t.top),s.set(t.left,t.bottom),n.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(s,s),e.apply(n,n),e.apply(o,o);const a=Math.min(i.x,s.x,n.x,o.x),l=Math.min(i.y,s.y,n.y,o.y),u=Math.max(i.x,s.x,n.x,o.x),c=Math.max(i.y,s.y,n.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=c-l}roundFrame(e,t,i,s,n){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:l,d:u}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}n=n?Wl.copyFrom(n):Wl.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,e),e.ceil(t),this.transformAABB(n.invert(),e)}}}Ly.extension={type:H.RendererSystem,name:"filter"};K.add(Ly);class pP{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=$e.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const mP=new ue;class By{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new rc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ue,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;z.PREFER_ENV===zi.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=s=>t.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:s}=this;if(e){const n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,n.mipLevel=i),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,n.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>i,a=t.height>>i,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,s){const n=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==e||n.y!==t)&&(n.x=e,n.y=t,n.width=i,n.height=s,this.gl.viewport(e,t,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,s,n=Iu.COLOR|Iu.DEPTH){const{gl:o}=this;o.clearColor(e,t,i,s),o.clear(n)}initFramebuffer(e){const{gl:t}=this,i=new pP(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){t.bindRenderbuffer(t.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const s=e.colorTextures;let n=s.length;t.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,s=e.glFramebuffers[this.CONTEXT_UID],n=e.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=n[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,u,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,u,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=$e.NONE;if(e<=1||t===null)return i;for(let s=0;s<t.length;s++)if(t[s]<=e){i=t[s];break}return i===1&&(i=$e.NONE),i}blit(e,t,i){const{current:s,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const c=s.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new rc(s.width,s.height),l.blitFramebuffer.addColorTexture(0,c)),e=l.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=mP,t.width=s.width,t.height=s.height),i||(i=t);const u=t.width===i.width&&t.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(e);n>=0&&this.managedFramebuffers.splice(n,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,s=e.height,n=this.gl,o=t.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):e.depth?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):(a=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),t.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,t.multisample,l,i,s):n.renderbufferStorage(n.RENDERBUFFER,l,i,s),n.framebufferRenderbuffer(n.FRAMEBUFFER,a,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ue}destroy(){this.renderer=null}}By.extension={type:H.RendererSystem,name:"framebuffer"};K.add(By);const Xl={5126:4,5123:2,5121:1};class Fy{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;z.PREFER_ENV===zi.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=s=>i.bindVertexArrayOES(s),e.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),e.drawElementsInstanced=(s,n,o,a,l)=>i.drawElementsInstancedANGLE(s,n,o,a,l),e.drawArraysInstanced=(s,n,o,a)=>i.drawArraysInstancedANGLE(s,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const o=s[t.program.id]||this.initGeometryVao(e,t,n);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const s=e.buffers[i];t.update(s)}}checkCompatibility(e,t){const i=e.attributes,s=t.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(e,t){const i=e.attributes,s=t.attributeData,n=["g",e.id];for(const o in i)s[o]&&n.push(o,s[o].location);return n.join("-")}initGeometryVao(e,t,i=!0){const s=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[n]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[a.id]=c,c;const d=e.buffers,h=e.attributes,f={},p={};for(const m in d)f[m]=0,p[m]=0;for(const m in h)!h[m].size&&a.attributeData[m]?h[m].size=a.attributeData[m].size:h[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[m].buffer]+=h[m].size*Xl[h[m].type];for(const m in h){const g=h[m],v=g.size;g.stride===void 0&&(f[g.buffer]===v*Xl[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=v*Xl[g.type])}c=s.createVertexArray(),s.bindVertexArray(c);for(let m=0;m<d.length;m++){const g=d[m];o.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,s.bindVertexArray(null),o.unbind(cr.ARRAY_BUFFER),c}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<n.length;l++){const u=n[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&o.dispose(n[l],t))}if(!t){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);let l=null;for(const u in a){const c=a[u],d=o[c.buffer],h=d._glBuffers[s];if(t.attributeData[u]){l!==h&&(n.bind(d),l=h);const f=t.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,s){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,s||1):n.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(e,i,t||o.getSize(),s||1):n.drawArrays(e,i,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Fy.extension={type:H.RendererSystem,name:"geometry"};K.add(Fy);const Lf=new Ce;class Ny{constructor(e,t){this._texture=e,this.mapCoord=new Ce,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let s=0;s<e.length;s+=2){const n=e[s],o=e[s+1];t[s]=n*i.a+o*i.c+i.tx,t[s+1]=n*i.b+o*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=t.orig,n=t.trim;n&&(Lf.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Lf));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var gP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,yP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class vP extends lt{constructor(e,t,i){let s=null;typeof e!="string"&&t===void 0&&i===void 0&&(s=e,e=void 0,t=void 0,i=void 0),super(e||yP,t||gP,i),this.maskSprite=s,this.maskMatrix=new Ce}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,s){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ny(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,i,s))}}class _P{constructor(e=null){this.type=Ge.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=lt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ge.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class $y{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const n=this.maskDataPool.pop()||new _P;n.pooled=!0,n.maskObject=t,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Ge.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Ge.SCISSOR:this.renderer.scissor.push(i);break;case Ge.STENCIL:this.renderer.stencil.push(i);break;case Ge.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Ge.COLOR:this.pushColorMask(i);break}i.type===Ge.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Ge.SCISSOR:this.renderer.scissor.pop(t);break;case Ge.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Ge.SPRITE:this.popSpriteMask(t);break;case Ge.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Ge.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=Ge.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Ge.SCISSOR:e.type=Ge.STENCIL:e.type=Ge.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new vP])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=t;const n=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=n,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}$y.extension={type:H.RendererSystem,name:"mask"};K.add($y);class Uy{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==i&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Bf=new Ce,Ff=[],Hy=class Fo extends Uy{constructor(e){super(e),this.glConst=z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:s}=this,n=s.renderTexture,o=i.getBounds(!0,Ff.pop()??new ue);this.roundFrameToPixels(o,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:s,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fo.isMatrixRotated(t.worldTransform)||Fo.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,s,n){Fo.isMatrixRotated(n)||(n=n?Bf.copyFrom(n):Bf.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Ff.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Hy.extension={type:H.RendererSystem,name:"scissor"};let bP=Hy;K.add(bP);class Gy extends Uy{constructor(e){super(e),this.glConst=z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const n=e._colorMask;n!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(e._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(i._colorMask=s,t.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Gy.extension={type:H.RendererSystem,name:"stencil"};K.add(Gy);class zy{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return pe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}zy.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"_plugin"};K.add(zy);class jy{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ce,this.transform=null}update(e,t,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(e,t,i,s){const n=this.projectionMatrix,o=s?-1:1;n.identity(),n.a=1/t.width*2,n.d=o*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-o-t.y*n.d}setTransform(e){}destroy(){this.renderer=null}}jy.extension={type:H.RendererSystem,name:"projection"};K.add(jy);const xP=new wh,Nf=new ue;class Vy{constructor(e){this.renderer=e,this._tempMatrix=new Ce}generateTexture(e,t){const{region:i,...s}=t||{},n=(i==null?void 0:i.copyTo(Nf))||e.getLocalBounds(Nf,!0),o=s.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/o),n.height=Math.max(n.height,1/o),s.width=n.width,s.height=n.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=Vi.create(s);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=e.transform;return e.transform=xP,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}Vy.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"textureGenerator"};K.add(Vy);const gi=new ue,Us=new ue;class Wy{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ue,this.destinationFrame=new ue,this.viewportFrame=new ue}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,i){const s=this.renderer;this.current=e;let n,o,a;e?(n=e.baseTexture,a=n.resolution,t||(gi.width=e.frame.width,gi.height=e.frame.height,t=gi),i||(Us.x=e.frame.x,Us.y=e.frame.y,Us.width=t.width,Us.height=t.height,i=Us),o=n.framebuffer):(a=s.resolution,t||(gi.width=s._view.screen.width,gi.height=s._view.screen.height,t=gi),i||(i=gi,i.width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),e?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Ee.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:u,width:c,height:d}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,d)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Wy.extension={type:H.RendererSystem,name:"renderTexture"};K.add(Wy);class wP{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function TP(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=e.getActiveAttrib(r,s);if(n.name.startsWith("gl_"))continue;const o=Ry(e,n.type),a={type:o,name:n.name,size:Py(o),location:e.getAttribLocation(r,n.name)};t[n.name]=a}return t}function AP(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=e.getActiveUniform(r,s),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=Ry(e,n.type);t[o]={name:o,index:s,type:l,size:n.size,isArray:a,value:Ey(l,n.size)}}return t}function SP(r,e){var a;const t=Rf(r,r.VERTEX_SHADER,e.vertexSrc),i=Rf(r,r.FRAGMENT_SHADER,e.fragmentSrc),s=r.createProgram();r.attachShader(s,t),r.attachShader(s,i);const n=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(n&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||eP(r,s,t,i),e.attributeData=TP(s,r),e.uniformData=AP(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,c)=>u>c?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,r.bindAttribLocation(s,u,l[u]);r.linkProgram(s)}r.deleteShader(t),r.deleteShader(i);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:r.getUniformLocation(s,l),value:Ey(u.type,u.size)}}return new wP(s,o)}function EP(r,e,t,i,s){t.buffer.update(s)}const CP={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Xy={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function PP(r){const e=r.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let t=0,i=0,s=0;for(let n=0;n<e.length;n++){const o=e[n];if(t=Xy[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!==0&&i<16){const a=i%t%16;i+=a,s+=a}i+t>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=t,i=t):(o.offset=s,i+=t,s+=t)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function RP(r,e){const t=[];for(const i in r)e[i]&&t.push(e[i]);return t.sort((i,s)=>i.index-s.index),t}function IP(r,e){if(!r.autoManage)return{size:0,syncFunc:EP};const t=RP(r.uniforms,e),{uboElements:i,size:s}=PP(t),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let c=!1;for(let d=0;d<ys.length;d++){const h=ys[d];if(h.codeUbo&&h.test(a.data,l)){n.push(`offset = ${a.offset/4};`,ys[d].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const d=Py(a.data.type),h=Math.max(Xy[a.data.type]/16,1),f=d/h,p=(4-f%4)%4;n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const d=CP[a.data.type];n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${d};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let MP=0;const fo={textureCount:0,uboCount:0};class Yy{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=MP++}systemCheck(){if(!rP())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),t||(fo.textureCount=0,fo.uboCount=0,this.syncUniformGroup(e.uniformGroup,fo)),s}setUniforms(e){const t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=ZC(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,fo,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const n=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=IP(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const s=e.uniforms,n=[`${i}-`];for(const o in s)n.push(o),t[o]&&n.push(t[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,i=e.program,s=SP(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Yy.extension={type:H.RendererSystem,name:"shader"};K.add(Yy);class aa{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}aa.defaultOptions={hello:!1},aa.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"startup"};K.add(aa);function kP(r,e=[]){return e[re.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.ADD]=[r.ONE,r.ONE],e[re.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.NONE]=[0,0],e[re.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[re.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[re.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[re.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[re.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[re.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[re.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[re.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[re.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[re.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const DP=0,OP=1,LP=2,BP=3,FP=4,NP=5,qy=class ic{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=re.NONE,this._blendEq=!1,this.map=[],this.map[DP]=this.setBlend,this.map[OP]=this.setOffset,this.map[LP]=this.setCullFace,this.map[BP]=this.setDepthTest,this.map[FP]=this.setFrontFace,this.map[NP]=this.setDepthMask,this.checks=[],this.defaultState=new vr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=kP(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(ic.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(ic.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};qy.extension={type:H.RendererSystem,name:"state"};let $P=qy;K.add($P);class UP extends $n{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(s=>e.systems[s]),i=[...t,...Object.keys(e.systems).filter(s=>!t.includes(s))];for(const s of i)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Gt(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(s=>{const n=i.find(o=>this._systemsHash[o]===s);s[e.name](t[n])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Ws=class No{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=No.defaultMaxIdle,this.checkCountMax=No.defaultCheckCountMax,this.mode=No.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ph.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let s=0;s<t.length;s++){const n=t[s];n.resource&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};Ws.defaultMode=ph.AUTO,Ws.defaultMaxIdle=60*60,Ws.defaultCheckCountMax=60*10,Ws.extension={type:H.RendererSystem,name:"textureGC"};let Ai=Ws;K.add(Ai);class Yl{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Q.UNSIGNED_BYTE,this.internalFormat=F.RGBA,this.samplerType=0}}function HP(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:G.FLOAT,[r.RGBA]:G.FLOAT,[r.ALPHA]:G.FLOAT,[r.LUMINANCE]:G.FLOAT,[r.LUMINANCE_ALPHA]:G.FLOAT,[r.R8]:G.FLOAT,[r.R8_SNORM]:G.FLOAT,[r.RG8]:G.FLOAT,[r.RG8_SNORM]:G.FLOAT,[r.RGB8]:G.FLOAT,[r.RGB8_SNORM]:G.FLOAT,[r.RGB565]:G.FLOAT,[r.RGBA4]:G.FLOAT,[r.RGB5_A1]:G.FLOAT,[r.RGBA8]:G.FLOAT,[r.RGBA8_SNORM]:G.FLOAT,[r.RGB10_A2]:G.FLOAT,[r.RGB10_A2UI]:G.FLOAT,[r.SRGB8]:G.FLOAT,[r.SRGB8_ALPHA8]:G.FLOAT,[r.R16F]:G.FLOAT,[r.RG16F]:G.FLOAT,[r.RGB16F]:G.FLOAT,[r.RGBA16F]:G.FLOAT,[r.R32F]:G.FLOAT,[r.RG32F]:G.FLOAT,[r.RGB32F]:G.FLOAT,[r.RGBA32F]:G.FLOAT,[r.R11F_G11F_B10F]:G.FLOAT,[r.RGB9_E5]:G.FLOAT,[r.R8I]:G.INT,[r.R8UI]:G.UINT,[r.R16I]:G.INT,[r.R16UI]:G.UINT,[r.R32I]:G.INT,[r.R32UI]:G.UINT,[r.RG8I]:G.INT,[r.RG8UI]:G.UINT,[r.RG16I]:G.INT,[r.RG16UI]:G.UINT,[r.RG32I]:G.INT,[r.RG32UI]:G.UINT,[r.RGB8I]:G.INT,[r.RGB8UI]:G.UINT,[r.RGB16I]:G.INT,[r.RGB16UI]:G.UINT,[r.RGB32I]:G.INT,[r.RGB32UI]:G.UINT,[r.RGBA8I]:G.INT,[r.RGBA8UI]:G.UINT,[r.RGBA16I]:G.INT,[r.RGBA16UI]:G.UINT,[r.RGBA32I]:G.INT,[r.RGBA32UI]:G.UINT,[r.DEPTH_COMPONENT16]:G.FLOAT,[r.DEPTH_COMPONENT24]:G.FLOAT,[r.DEPTH_COMPONENT32F]:G.FLOAT,[r.DEPTH_STENCIL]:G.FLOAT,[r.DEPTH24_STENCIL8]:G.FLOAT,[r.DEPTH32F_STENCIL8]:G.FLOAT}:e={[r.RGB]:G.FLOAT,[r.RGBA]:G.FLOAT,[r.ALPHA]:G.FLOAT,[r.LUMINANCE]:G.FLOAT,[r.LUMINANCE_ALPHA]:G.FLOAT,[r.DEPTH_STENCIL]:G.FLOAT},e}function GP(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Q.UNSIGNED_BYTE]:{[F.RGBA]:r.RGBA8,[F.RGB]:r.RGB8,[F.RG]:r.RG8,[F.RED]:r.R8,[F.RGBA_INTEGER]:r.RGBA8UI,[F.RGB_INTEGER]:r.RGB8UI,[F.RG_INTEGER]:r.RG8UI,[F.RED_INTEGER]:r.R8UI,[F.ALPHA]:r.ALPHA,[F.LUMINANCE]:r.LUMINANCE,[F.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Q.BYTE]:{[F.RGBA]:r.RGBA8_SNORM,[F.RGB]:r.RGB8_SNORM,[F.RG]:r.RG8_SNORM,[F.RED]:r.R8_SNORM,[F.RGBA_INTEGER]:r.RGBA8I,[F.RGB_INTEGER]:r.RGB8I,[F.RG_INTEGER]:r.RG8I,[F.RED_INTEGER]:r.R8I},[Q.UNSIGNED_SHORT]:{[F.RGBA_INTEGER]:r.RGBA16UI,[F.RGB_INTEGER]:r.RGB16UI,[F.RG_INTEGER]:r.RG16UI,[F.RED_INTEGER]:r.R16UI,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Q.SHORT]:{[F.RGBA_INTEGER]:r.RGBA16I,[F.RGB_INTEGER]:r.RGB16I,[F.RG_INTEGER]:r.RG16I,[F.RED_INTEGER]:r.R16I},[Q.UNSIGNED_INT]:{[F.RGBA_INTEGER]:r.RGBA32UI,[F.RGB_INTEGER]:r.RGB32UI,[F.RG_INTEGER]:r.RG32UI,[F.RED_INTEGER]:r.R32UI,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Q.INT]:{[F.RGBA_INTEGER]:r.RGBA32I,[F.RGB_INTEGER]:r.RGB32I,[F.RG_INTEGER]:r.RG32I,[F.RED_INTEGER]:r.R32I},[Q.FLOAT]:{[F.RGBA]:r.RGBA32F,[F.RGB]:r.RGB32F,[F.RG]:r.RG32F,[F.RED]:r.R32F,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Q.HALF_FLOAT]:{[F.RGBA]:r.RGBA16F,[F.RGB]:r.RGB16F,[F.RG]:r.RG16F,[F.RED]:r.R16F},[Q.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:r.RGB565},[Q.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:r.RGBA4},[Q.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:r.RGB5_A1},[Q.UNSIGNED_INT_2_10_10_10_REV]:{[F.RGBA]:r.RGB10_A2,[F.RGBA_INTEGER]:r.RGB10_A2UI},[Q.UNSIGNED_INT_10F_11F_11F_REV]:{[F.RGB]:r.R11F_G11F_B10F},[Q.UNSIGNED_INT_5_9_9_9_REV]:{[F.RGB]:r.RGB9_E5},[Q.UNSIGNED_INT_24_8]:{[F.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Q.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[F.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Q.UNSIGNED_BYTE]:{[F.RGBA]:r.RGBA,[F.RGB]:r.RGB,[F.ALPHA]:r.ALPHA,[F.LUMINANCE]:r.LUMINANCE,[F.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Q.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:r.RGB},[Q.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:r.RGBA},[Q.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:r.RGBA}},e}class Ky{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new le,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=GP(e),this.samplerTypes=HP(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let s=0;s<t;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new Yl(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Yl(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,t=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=e-1;n>=0;--n){const o=t[n];o&&o._glTextures[s].samplerType!==G.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new Yl(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var i;t.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??G.FLOAT,this.webGLVersion===2&&e.type===Q.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var s;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),(s=e.resource)==null?void 0:s.upload(i,e,t))t.samplerType!==G.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,o=e.realHeight,a=i.gl;(t.width!==n||t.height!==o||t.dirtyId<0)&&(t.width=n,t.height=o,a.texImage2D(e.target,0,t.internalFormat,n,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const s=this.managedTextures.indexOf(e);s!==-1&&gs(this.managedTextures,s,1)}}updateTextureStyle(e){var i;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===mr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Qr.CLAMP:t.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==mr.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Sr.LINEAR){const n=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Ky.extension={type:H.RendererSystem,name:"texture"};K.add(Ky);class Zy{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:s}=this;t&&s.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:s}=this,n=t.createTransformFeedback();e._glTransformFeedbacks[s]=n,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),n}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&n.dispose(a,t))}i&&(t||s.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Zy.extension={type:H.RendererSystem,name:"transformFeedback"};K.add(Zy);class la{constructor(e){this.renderer=e}init(e){this.screen=new ue(0,0,e.width,e.height),this.element=e.view||z.ADAPTER.createCanvas(),this.resolution=e.resolution||z.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}la.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},la.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"_view"};K.add(la);z.PREFER_ENV=zi.WEBGL2;z.STRICT_TEXTURE_CACHE=!1;z.RENDER_OPTIONS={...oa.defaultOptions,...na.defaultOptions,...la.defaultOptions,...aa.defaultOptions};Object.defineProperties(z,{WRAP_MODE:{get(){return le.defaultOptions.wrapMode},set(r){pe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),le.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return le.defaultOptions.scaleMode},set(r){pe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),le.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return le.defaultOptions.mipmap},set(r){pe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),le.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return le.defaultOptions.anisotropicLevel},set(r){pe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),le.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return pe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),lt.defaultResolution},set(r){lt.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return pe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),lt.defaultMultisample},set(r){lt.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Ti.defaultMaxTextures},set(r){pe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ti.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Ti.defaultBatchSize},set(r){pe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ti.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ti.canUploadSameBuffer},set(r){pe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ti.canUploadSameBuffer=r}},GC_MODE:{get(){return Ai.defaultMode},set(r){pe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ai.defaultMode=r}},GC_MAX_IDLE:{get(){return Ai.defaultMaxIdle},set(r){pe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ai.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Ai.defaultCheckCountMax},set(r){pe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ai.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Pr.defaultVertexPrecision},set(r){pe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Pr.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Pr.defaultFragmentPrecision},set(r){pe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Pr.defaultFragmentPrecision=r}}});var Fi=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Fi||{});class ql{constructor(e,t=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=s}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Jy=class mt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ql(null,null,1/0),this.deltaMS=1/mt.targetFPMS,this.elapsedMS=1/mt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Fi.NORMAL){return this._addListener(new ql(e,t,i))}addOnce(e,t,i=Fi.NORMAL){return this._addListener(new ql(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*mt.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,mt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!mt._shared){const e=mt._shared=new mt;e.autoStart=!0,e._protected=!0}return mt._shared}static get system(){if(!mt._system){const e=mt._system=new mt;e.autoStart=!0,e._protected=!0}return mt._system}};Jy.targetFPMS=.06;let yt=Jy;Object.defineProperties(z,{TARGET_FPMS:{get(){return yt.targetFPMS},set(r){pe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),yt.targetFPMS=r}}});class Qy{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Fi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?yt.shared:new yt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Qy.extension=H.Application;K.add(Qy);const ev=[];K.handleByList(H.Renderer,ev);function zP(r){for(const e of ev)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var jP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,VP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const WP=jP,tv=VP;class rv{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=$e.HIGH?this.multisample=$e.HIGH:t>=$e.MEDIUM?this.multisample=$e.MEDIUM:t>=$e.LOW?this.multisample=$e.LOW:this.multisample=$e.NONE}destroy(){}}rv.extension={type:H.RendererSystem,name:"_multisample"};K.add(rv);class XP{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class iv{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[t]!==e){const n=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,n.buffer)}}bindBufferRange(e,t,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const o=e._glBuffers[n]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,o.buffer,i*256,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const n=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,n)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(t||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new XP(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}iv.extension={type:H.RendererSystem,name:"buffer"};K.add(iv);class sv{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let s,n,o,a;if(t&&(s=t.renderTexture,n=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(s||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),s&&(t.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}sv.extension={type:H.RendererSystem,name:"objectRenderer"};K.add(sv);const $o=class sc extends UP{constructor(e){super(),this.type=Ug.WEBGL,e=Object.assign({},z.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new zt({projectionMatrix:new Ce},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:sc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(pe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=sc.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:gC()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return pe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return pe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return pe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return pe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){pe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return pe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){pe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return pe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};$o.extension={type:H.Renderer,priority:1},$o.__plugins={},$o.__systems={};let Ah=$o;K.handleByMap(H.RendererPlugin,Ah.__plugins);K.handleByMap(H.RendererSystem,Ah.__systems);K.add(Ah);class nv extends bn{constructor(e,t){const{width:i,height:s}=t||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<e;n++){const o=new le;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof bn?this.addResourceAt(e[i],i):this.addResourceAt(wy(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:i}=this.items[0];return this.resize(t,i),this.update(),Promise.resolve(this)}),this._load}}class YP extends nv{constructor(e,t){const{width:i,height:s}=t||{};let n,o;Array.isArray(e)?(n=e,o=e.length):o=e,super(o,{width:i,height:s}),n&&this.initFromArray(n,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=fs.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:s,itemDirtyIds:n,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,t.format,i.type,null);for(let l=0;l<s;l++){const u=o[l];n[l]<u.dirtyId&&(n[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,i.type,u.resource.source))}return!0}}class qP extends Fr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ov=class Xs extends nv{constructor(e,t){const{width:i,height:s,autoLoad:n,linkBaseTexture:o}=t||{};if(e&&e.length!==Xs.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:s});for(let a=0;a<Xs.SIDES;a++)this.items[a].target=fs.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=fs.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=fs.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const s=this.itemDirtyIds;for(let n=0;n<Xs.SIDES;n++){const o=this.items[n];(s[n]<o.dirtyId||i.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,i),s[n]=o.dirtyId):s[n]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),s[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Xs.SIDES}};ov.SIDES=6;let KP=ov;class hs extends Fr{constructor(e,t){t=t||{};let i,s,n;typeof e=="string"?(i=hs.EMPTY,s=e,n=!0):(i=e,s=null,n=!1),super(i),this.url=s,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??n,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const i=await z.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ht.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),e(this)}catch(i){if(this.destroyed)return;t(i),this.onError.emit(i)}}),this._load)}upload(e,t,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return hs._EMPTY=hs._EMPTY??z.ADAPTER.createCanvas(0,0),hs._EMPTY}}const nc=class Uo extends Fr{constructor(e,t){t=t||{},super(z.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Uo.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Fr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),s=Math.round(s),n=Math.round(n);const o=this.source;o.width=s,o.height=n,o._pixiId=`canvas_${Bi()}`,o.getContext("2d").drawImage(e,0,0,t,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(e){const t=Uo.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Uo.SVG_XML.test(e)}};nc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,nc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let oc=nc;class ZP extends Fr{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const ac=class lc extends Fr{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");t.autoLoad!==!1&&i.setAttribute("preload","auto"),t.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),t.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),t.loop===!0&&i.setAttribute("loop",""),t.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];Fr.crossOrigin(i,s,t.crossorigin);for(let n=0;n<e.length;++n){const o=document.createElement("source");let{src:a,mime:l}=e[n];if(a=a||e[n],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),c=u.slice(u.lastIndexOf(".")+1);l=l||lc.MIME_TYPES[c]||`video/${c}`}o.src=a,l&&(o.type=l),i.appendChild(o)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=yt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,i)=>{this.valid?t(this):(this._resolve=t,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(yt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(yt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(yt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||lc.TYPES.includes(t)}};ac.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ac.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let av=ac;Yu.push(hs,ky,qP,av,ZP,oc,Ua,KP,YP);class ua{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ue.EMPTY:(e=e||new ue(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:s,c:n,d:o,tx:a,ty:l}=e,u=i*t.x+n*t.y+a,c=s*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,i=this.minY,s=this.maxX,n=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,this.minX=t,this.minY=i,this.maxX=s,this.maxY=n}addFrame(e,t,i,s,n){this.addFrameMatrix(e.worldTransform,t,i,s,n)}addFrameMatrix(e,t,i,s,n){const o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*t+l*i+c,v=a*t+u*i+d;h=g<h?g:h,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=o*s+l*i+c,v=a*s+u*i+d,h=g<h?g:h,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=o*t+l*n+c,v=a*t+u*n+d,h=g<h?g:h,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=o*s+l*n+c,v=a*s+u*n+d,h=g<h?g:h,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,t,i){let s=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<i;l+=2){const u=e[l],c=e[l+1];s=u<s?u:s,n=c<n?c:n,o=u>o?u:o,a=c>a?c:a}this.minX=s,this.minY=n,this.maxX=o,this.maxY=a}addVertices(e,t,i,s){this.addVerticesMatrix(e.worldTransform,t,i,s)}addVerticesMatrix(e,t,i,s,n=0,o=n){const a=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,h=e.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let v=i;v<s;v+=2){const _=t[v],y=t[v+1],b=a*_+u*y+d,w=c*y+l*_+h;f=Math.min(f,b-n),m=Math.max(m,b+n),p=Math.min(p,w-o),g=Math.max(g,w+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(e){const t=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>n?e.maxY:n}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>c?o:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>c?o:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,s,n,o){e-=n,t-=o,i+=n,s+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s}}class Ie extends $n{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new wh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ua,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const s=t[i];Object.defineProperty(Ie.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ue),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ue),e=this._localBoundsRect),this._localBounds||(this._localBounds=new ua);const t=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=s,this._bounds.updateID+=this._boundsID-n,o}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,s){return t&&(e=t.toGlobal(e,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,i=1,s=1,n=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new JP),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*jC}set angle(e){this.transform.rotation=e*VC}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class JP extends Ie{constructor(){super(...arguments),this.sortDirty=null}}Ie.prototype.displayObjectUpdateTransform=Ie.prototype.updateTransform;const QP=new Ce;function eR(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const lv=class uc extends Ie{constructor(){super(),this.children=[],this.sortableChildren=uc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e,this.onChildrenChange(i<s?i:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);gs(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,gs(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,gs(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,s=t,n=s-i;let o;if(n>0&&n<=s){o=this.children.splice(i,n);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(eR),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let s=0,n=this.children.length;s<n;++s){const o=this.children[s];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==uc.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(s?(s=QP.copyFrom(s),s.prepend(n)):s=n),i&&t.intersects(i,s))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}}renderAdvanced(e){var n,o,a;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const s=t&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Ge.NONE));if(s&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}s&&e.batch.flush(),i&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<i.length;++s)i[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};lv.defaultSortableChildren=!1;let Xt=lv;Xt.prototype.containerUpdateTransform=Xt.prototype.updateTransform;Object.defineProperties(z,{SORTABLE_CHILDREN:{get(){return Xt.defaultSortableChildren},set(r){pe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Xt.defaultSortableChildren=r}}});const Hs=new ye,tR=new Uint16Array([0,1,2,0,2,3]);class Os extends Xt{constructor(e){super(),this._anchor=new Cr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ee(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=re.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||q.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=tR,this.pluginName="batch",this.isSprite=!0,this._roundPixels=z.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=qr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=qr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,c=e.trim,d=e.orig,h=this._anchor;let f=0,p=0,m=0,g=0;if(c?(p=c.x-h._x*d.width,f=p+c.width,g=c.y-h._y*d.height,m=g+c.height):(p=-h._x*d.width,f=p+d.width,g=-h._y*d.height,m=g+d.height),u[0]=i*p+n*g+a,u[1]=o*g+s*p+l,u[2]=i*f+n*g+a,u[3]=o*g+s*f+l,u[4]=i*f+n*m+a,u[5]=o*m+s*f+l,u[6]=i*p+n*m+a,u[7]=o*m+s*p+l,this._roundPixels){const v=z.RESOLUTION;for(let _=0;_<u.length;++_)u[_]=Math.round(u[_]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,i=e.orig,s=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,u=n.d,c=n.tx,d=n.ty,h=-s._x*i.width,f=h+i.width,p=-s._y*i.height,m=p+i.height;if(t[0]=o*h+l*p+c,t[1]=u*p+a*h+d,t[2]=o*f+l*p+c,t[3]=u*p+a*f+d,t[4]=o*f+l*m+c,t[5]=u*m+a*f+d,t[6]=o*h+l*m+c,t[7]=u*m+a*h+d,this._roundPixels){const g=z.RESOLUTION;for(let v=0;v<t.length;++v)t[v]=Math.round(t[v]*g)/g}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new ua),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ue),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Hs);const t=this._texture.orig.width,i=this._texture.orig.height,s=-t*this.anchor.x;let n=0;return Hs.x>=s&&Hs.x<s+t&&(n=-i*this.anchor.y,Hs.y>=n&&Hs.y<n+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const i=e instanceof q?e:q.from(e,t);return new Os(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=qr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=qr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||q.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const uv=new Ce;Ie.prototype._cacheAsBitmap=!1;Ie.prototype._cacheData=null;Ie.prototype._cacheAsBitmapResolution=null;Ie.prototype._cacheAsBitmapMultisample=null;class rR{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ie.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new rR),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ie.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ie.prototype._initCachedDisplayObject=function(r){var h,f;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new ue,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;t.pad(p)}const i=this.cacheAsBitmapResolution||r.resolution;t.ceil(i),t.width=Math.max(t.width,1/i),t.height=Math.max(t.height,1/i);const s=r.renderTexture.current,n=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Vi.create({width:t.width,height:t.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${Bi()}`;this._cacheData.textureCacheId=u,le.addToCache(l.baseTexture,u),q.addToCache(l,u);const c=this.transform.localTransform.copyTo(uv).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(s,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new Os(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(t.x/t.width),d.anchor.y=-(t.y/t.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};Ie.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ie.prototype._initCachedDisplayObjectCanvas=function(r){var c;if((c=this._cacheData)!=null&&c.sprite)return;const e=this.getLocalBounds(new ue,!0),t=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,s=r._projTransform,n=this.cacheAsBitmapResolution||r.resolution;e.ceil(n),e.width=Math.max(e.width,1/n),e.height=Math.max(e.height,1/n);const o=Vi.create({width:e.width,height:e.height,resolution:n}),a=`cacheAsBitmap_${Bi()}`;this._cacheData.textureCacheId=a,le.addToCache(o.baseTexture,a),q.addToCache(o,a);const l=uv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new Os(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ie.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ie.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ie.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,le.removeFromCache(this._cacheData.textureCacheId),q.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ie.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ie.prototype.name=null;Xt.prototype.getChildByName=function(r,e){for(let t=0,i=this.children.length;t<i;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,i=this.children.length;t<i;t++){const s=this.children[t];if(!s.getChildByName)continue;const n=s.getChildByName(r,!0);if(n)return n}return null};Ie.prototype.getGlobalPosition=function(r=new ye,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var iR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class sR extends lt{constructor(e=1){super(WP,iR,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const nR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},oR=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function aR(r){const e=nR[r],t=e.length;let i=oR,s="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=n.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}const lR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function uR(r,e){const t=Math.ceil(r/2);let i=lR,s="",n;e?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),s+=a,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}class cc extends lt{constructor(e,t=8,i=4,s=lt.defaultResolution,n=5){const o=uR(n,e),a=aR(n);super(o,a),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=i,this.blur=t}apply(e,t,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/t.width):this.uniforms.strength=1/i.height*(i.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,i,s);else{const n=e.getFilterTexture(),o=e.renderer;let a=t,l=n;this.state.blend=!1,e.applyFilter(this,a,l,ir.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,ir.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,s),e.returnFilterTexture(n)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class cR extends lt{constructor(e=8,t=4,i=lt.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new cc(!0,e,t,i,s),this.blurYFilter=new cc(!1,e,t,i,s),this.resolution=i,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,i,s){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,ir.CLEAR),this.blurYFilter.apply(e,a,i,s),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,i,s):this.blurXFilter.apply(e,t,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var hR=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class hc extends lt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(tv,hR,e),this.alpha=1}_loadMatrix(e,t=!1){let i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}tint(e,t){const[i,s,n]=Ee.shared.setValue(e).toArray(),o=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const i=Math.cos(e),s=Math.sin(e),n=Math.sqrt,o=1/3,a=n(o),l=i+(1-i)*o,u=o*(1-i)-a*s,c=o*(1-i)+a*s,d=o*(1-i)+a*s,h=i+o*(1-i),f=o*(1-i)-a*s,p=o*(1-i)-a*s,m=o*(1-i)+a*s,g=i+o*(1-i),v=[l,u,c,0,0,d,h,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(v,t)}contrast(e,t){const i=(e||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,t)}saturate(e=0,t){const i=e*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,i,s,n){e=e||.2,t=t||.15,i=i||16770432,s=s||3375104;const o=Ee.shared,[a,l,u]=o.setValue(i).toArray(),[c,d,h]=o.setValue(s).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,c,d,h,t,0,a-c,l-d,u-h,0,0];this._loadMatrix(f,n)}night(e,t){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,t)}predator(e,t){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}hc.prototype.grayscale=hc.prototype.greyscale;var dR=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,fR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class pR extends lt{constructor(e,t){const i=new Ce;e.renderable=!1,super(fR,dR,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,t==null&&(t=20),this.scale=new ye(t,t)}apply(e,t,i,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),e.applyFilter(this,t,i,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var mR=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,gR=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class yR extends lt{constructor(){super(gR,mR)}}var vR=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class _R extends lt{constructor(e=.5,t=Math.random()){super(tv,vR,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const $f={AlphaFilter:sR,BlurFilter:cR,BlurFilterPass:cc,ColorMatrixFilter:hc,DisplacementFilter:pR,FXAAFilter:yR,NoiseFilter:_R};Object.entries($f).forEach(([r,e])=>{Object.defineProperty($f,r,{get(){return pe("7.1.0",`filters.${r} has moved to ${r}`),e}})});class bR{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(yt.system.add(this.tickerUpdate,this,Fi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(yt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Wr=new bR;class zn{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=zn.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ye,this.page=new ye,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ca extends zn{constructor(){super(...arguments),this.client=new ye,this.movement=new ye,this.offset=new ye,this.global=new ye,this.screen=new ye}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,s,n,o,a,l,u,c,d,h,f,p,m){throw new Error("Method not implemented.")}}class Ot extends ca{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class vs extends ca{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}vs.DOM_DELTA_PIXEL=0,vs.DOM_DELTA_LINE=1,vs.DOM_DELTA_PAGE=2;const xR=2048,wR=new ye,Kl=new ye;class TR{constructor(e){this.dispatch=new $n,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,s=t.length;i<s;i++)t[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Wr.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,wR.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(t)?t:[t];for(let n=i.length-1;n>=0;n--)s.forEach(o=>{e.currentTarget=i[n],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let i=0;i<xR&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,s,n,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Wr.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let d=c.length-1;d>=0;d--){const h=c[d],f=this.hitTestMoveRecursive(h,this._isInteractive(t)?t:h.eventMode,i,s,n,o||n(e,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(e,i)&&s(e,i)?u?[e]:[]:null}hitTestRecursive(e,t,i,s,n){if(this._interactivePrune(e)||n(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Wr.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const c=l[u],d=this.hitTestRecursive(c,this._isInteractive(t)?t:c.eventMode,i,s,n);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&s(e,i)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var i;if(e.hitArea&&(e.worldTransform.applyInverse(t,Kl),!e.hitArea.contains(Kl.x,Kl.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var n,o;t=t??e.type;const i=`on${t}`;(o=(n=e.currentTarget)[i])==null||o.call(n,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,u;if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&n!==t.target){const c=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,c,n);if(this.dispatchEvent(d,"pointerout"),i&&this.dispatchEvent(d,"mouseout"),!t.composedPath().includes(n)){const h=this.createPointerEvent(e,"pointerleave",n);for(h.eventPhase=h.AT_TARGET;h.target&&!t.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(d)}if(n!==t.target){const c=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(t,c);this.dispatchEvent(d,"pointerover"),i&&this.dispatchEvent(d,"mouseover");let h=n==null?void 0:n.parent;for(;h&&h!==this.rootTarget.parent&&h!==t.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==n&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=t.target)==null?void 0:u.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(e){if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),n=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(e,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[e.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=s.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Ot)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof vs)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const s=this.allocateEvent(Ot);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){const t=this.allocateEvent(vs);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(Ot);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Ot&&t instanceof Ot&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof ca&&t instanceof ca&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,n=i.length;s<n&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(t,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}}const AR=1,SR={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},dc=class fc{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new TR(null),Wr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ot(null),this.rootWheelEvent=new vs(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...fc.defaultEventFeatures},{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,fc._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){const n=t[i],o=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Wr.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let n=0,o=s.length;n<o;n++){const a=this.bootstrapEvent(this.rootPointerEvent,s[n]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Wr.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Wr.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Wr.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*n,e.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=AR),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=SR[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};dc.extension={name:"events",type:[H.RendererSystem,H.CanvasRendererSystem]},dc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let pc=dc;K.add(pc);function Uf(r){return r==="dynamic"||r==="static"}const ER={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Uf(pc.defaultEventMode)},set interactive(r){pe("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??pc.defaultEventMode},set eventMode(r){this._internalInteractive=Uf(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,n=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=i?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,l=this;s&&s.addEventListener("abort",()=>{l.off(r,a,o)}),n?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;r=i?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,s)},dispatchEvent(r){if(!(r instanceof zn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ie.mixin(ER);const CR={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ie.mixin(CR);const PR=9,po=100,RR=0,IR=0,Hf=2,Gf=1,MR=-1e3,kR=-1e3,DR=2;class cv{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Er.tablet||Er.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${po}px`,t.style.height=`${po}px`,t.style.position="absolute",t.style.top=`${RR}px`,t.style.left=`${IR}px`,t.style.zIndex=Hf.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${Gf}px`,e.style.height=`${Gf}px`,e.style.position="absolute",e.style.top=`${MR}px`,e.style.left=`${kR}px`,e.style.zIndex=DR.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}update(){const e=performance.now();if(Er.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=s/o*l,c=n/a*l;let d=this.div;d.style.left=`${t}px`,d.style.top=`${i}px`,d.style.width=`${o}px`,d.style.height=`${a}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,gs(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{d=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(d.style.left=`${(m.tx+p.x*m.a)*u}px`,d.style.top=`${(m.ty+p.y*m.d)*c}px`,d.style.width=`${p.width*m.a*u}px`,d.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),d.style.left=`${p.x*u}px`,d.style.top=`${p.y*c}px`,d.style.width=`${p.width*u}px`,d.style.height=`${p.height*c}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${po}px`,t.style.height=`${po}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Hf.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:i}=e.target,s=this.renderer.events.rootBoundary,n=Object.assign(new zn(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>s.dispatchEvent(n,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===PR&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}cv.extension={name:"accessibility",type:[H.RendererPlugin,H.CanvasRendererPlugin]};K.add(cv);const hv=class mc{constructor(e){this.stage=new Xt,e=Object.assign({forceCanvas:!1},e),this.renderer=zP(e),mc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const i=mc._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};hv._plugins=[];let OR=hv;K.handleByList(H.Application,OR._plugins);class dv{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;t=s,i=n}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}dv.extension=H.Application;K.add(dv);const zf={loader:H.LoadParser,resolver:H.ResolveParser,cache:H.CacheParser,detection:H.DetectionParser};K.handle(H.Asset,r=>{const e=r.ref;Object.entries(zf).filter(([t])=>!!e[t]).forEach(([t,i])=>K.add(Object.assign(e[t],{extension:e[t].extension??i})))},r=>{const e=r.ref;Object.keys(zf).filter(t=>!!e[t]).forEach(t=>K.remove(e[t]))});class LR{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ls(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function di(r,e){const t=r.split("?")[0],i=Ye.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const Ft=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(i=>typeof i=="string"||t?e(i):i):r),gc=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function fv(r,e,t,i,s){const n=e[t];for(let o=0;o<n.length;o++){const a=n[o];t<e.length-1?fv(r.replace(i[t],a),e,t+1,i,s):s.push(r.replace(i[t],a))}}function BR(r){const e=/\{(.*?)\}/g,t=r.match(e),i=[];if(t){const s=[];t.forEach(n=>{const o=n.substring(1,n.length-1).split(",");s.push(o)}),fv(r,s,0,t,i)}else i.push(r);return i}const ha=r=>!Array.isArray(r);class FR{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=Ft(e);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){s=l.getCacheableAssets(i,t);break}}s||(s={},i.forEach(a=>{s[a]=t}));const n=Object.keys(s),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{const l=s?s[a]:t;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),t instanceof q){const a=t;i.forEach(l=>{a.baseTexture!==q.EMPTY.baseTexture&&le.addToCache(a.baseTexture,l),q.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Pi=new FR;class NR{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let s=null,n=null;if(t.loadParser&&(n=this._parserHash[t.loadParser],n||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!n){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,t,this))){n=u;break}}if(!n)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(e,t,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,s,t,this))&&(s=await u.parse(s,t,this)||s,i.parser=u)}return s})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const s={},n=ha(e),o=Ft(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const c=Ye.toAbsolute(u.src);if(!s[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),s[u.src]=await this.promiseCache[c].promise,t&&t(++i/a)}catch(d){throw delete this.promiseCache[c],delete s[u.src],new Error(`[Loader.load] Failed to load ${c}.
${d}`)}});return await Promise.all(l),n?s[o[0].src]:s}async unload(e){const t=Ft(e,i=>({alias:[i],src:i})).map(async i=>{var o,a;const s=Ye.toAbsolute(i.src),n=this.promiseCache[s];if(n){const l=await n.promise;delete this.promiseCache[s],(a=(o=n.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var qt=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(qt||{});const $R=".json",UR="application/json",HR={extension:{type:H.LoadParser,priority:qt.Low},name:"loadJson",test(r){return Ls(r,UR)||di(r,$R)},async load(r){return await(await z.ADAPTER.fetch(r)).json()}};K.add(HR);const GR=".txt",zR="text/plain",jR={name:"loadTxt",extension:{type:H.LoadParser,priority:qt.Low},test(r){return Ls(r,zR)||di(r,GR)},async load(r){return await(await z.ADAPTER.fetch(r)).text()}};K.add(jR);const VR=["normal","bold","100","200","300","400","500","600","700","800","900"],WR=[".ttf",".otf",".woff",".woff2"],XR=["font/ttf","font/otf","font/woff","font/woff2"],YR=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function qR(r){const e=Ye.extname(r),t=Ye.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=t.length>0;for(const n of t)if(!n.match(YR)){i=!1;break}let s=t.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const KR=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ZR(r){return KR.test(r)?r:encodeURI(r)}const JR={extension:{type:H.LoadParser,priority:qt.Low},name:"loadWebFont",test(r){return Ls(r,XR)||di(r,WR)},async load(r,e){var i,s,n;const t=z.ADAPTER.getFontFaceSet();if(t){const o=[],a=((i=e.data)==null?void 0:i.family)??qR(r),l=((n=(s=e.data)==null?void 0:s.weights)==null?void 0:n.filter(c=>VR.includes(c)))??["normal"],u=e.data??{};for(let c=0;c<l.length;c++){const d=l[c],h=new FontFace(a,`url(${ZR(r)})`,{...u,weight:d});await h.load(),t.add(h),o.push(h)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>z.ADAPTER.getFontFaceSet().delete(e))}};K.add(JR);const QR=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let _s=null,yc=class{constructor(){_s||(_s=URL.createObjectURL(new Blob([QR],{type:"application/javascript"}))),this.worker=new Worker(_s)}};yc.revokeObjectURL=function(){_s&&(URL.revokeObjectURL(_s),_s=null)};const e2=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let bs=null;class pv{constructor(){bs||(bs=URL.createObjectURL(new Blob([e2],{type:"application/javascript"}))),this.worker=new Worker(bs)}}pv.revokeObjectURL=function(){bs&&(URL.revokeObjectURL(bs),bs=null)};let jf=0,Zl;class t2{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new yc;t.addEventListener("message",i=>{t.terminate(),yc.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Zl===void 0&&(Zl=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Zl&&(this._createdWorkers++,e=new pv().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((s,n)=>{this.queue.push({id:e,arguments:t,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),i=t.id;this.resolveHash[jf]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:jf++,id:i})}}const Vf=new t2;function jn(r,e,t){r.resource.internal=!0;const i=new q(r),s=()=>{delete e.promiseCache[t],Pi.has(t)&&Pi.remove(t)};return i.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const r2=[".jpeg",".jpg",".png",".webp",".avif"],i2=["image/jpeg","image/png","image/webp","image/avif"];async function s2(r){const e=await z.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Va={name:"loadTextures",extension:{type:H.LoadParser,priority:qt.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ls(r,i2)||di(r,r2)},async load(r,e,t){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;i?this.config.preferWorkers&&await Vf.isImageBitmapSupported()?s=await Vf.loadImageBitmap(r):s=await s2(r):s=await new Promise((l,u)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=r,c.complete?l(c):(c.onload=()=>l(c),c.onerror=d=>u(d))});const n={...e.data};n.resolution??(n.resolution=Br(r)),i&&((a=n.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const o=new le(s,n);return o.resource.src=r,jn(o,t,r)},unload(r){r.destroy(!0)}};K.add(Va);const n2=".svg",o2="image/svg+xml",a2={extension:{type:H.LoadParser,priority:qt.High},name:"loadSVG",test(r){return Ls(r,o2)||di(r,n2)},async testParse(r){return oc.test(r)},async parse(r,e,t){var n;const i=new oc(r,(n=e==null?void 0:e.data)==null?void 0:n.resourceOptions);await i.load();const s=new le(i,{resolution:Br(r),...e==null?void 0:e.data});return s.resource.src=e.src,jn(s,t,e.src)},async load(r,e){return(await z.ADAPTER.fetch(r)).text()},unload:Va.unload};K.add(a2);const l2=[".mp4",".m4v",".webm",".ogv"],u2=["video/mp4","video/webm","video/ogg"],c2={name:"loadVideo",extension:{type:H.LoadParser,priority:qt.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return Ls(r,u2)||di(r,l2)},async load(r,e,t){var o;let i;const s=await(await z.ADAPTER.fetch(r)).blob(),n=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new av(n,a);await l.load();const u=new le(l,{alphaMode:await mC(),resolution:Br(r),...e==null?void 0:e.data});u.resource.src=r,i=jn(u,t,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(a){throw URL.revokeObjectURL(n),a}return i},unload(r){r.destroy(!0)}};K.add(c2);class h2{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,name:i,src:s,srcs:n}=e;return Ft(t||i||s||n,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];Array.isArray(t)?t.forEach(s=>{const n=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));i.push(...l),a=[...o,...l]}this.add({...s,alias:a,src:n})}):Object.keys(t).forEach(s=>{const n=[s,this._createBundleAssetId(e,s)];if(typeof t[s]=="string")this.add({alias:n,src:t[s]});else if(Array.isArray(t[s]))this.add({alias:n,src:t[s]});else{const o=t[s],a=o.src??o.srcs;this.add({...o,alias:n,src:Array.isArray(a)?a:[a]})}i.push(...n)}),this._bundles[e]=i}add(e,t,i,s,n){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(pe("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:i,format:s,loadParser:n})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Ft(o).forEach(l=>{const{src:u,srcs:c}=l;let{data:d,format:h,loadParser:f}=l;const p=Ft(u||c).map(v=>typeof v=="string"?BR(v):Array.isArray(v)?v:[v]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const g=[];p.forEach(v=>{v.forEach(_=>{let y={};if(typeof _!="object"){y.src=_;for(let b=0;b<this._parsers.length;b++){const w=this._parsers[b];if(w.test(_)){y=w.parse(_);break}}}else d=_.data??d,h=_.format??h,f=_.loadParser??f,y={...y,..._};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this.buildResolvedAsset(y,{aliases:m,data:d,format:h,loadParser:f}),g.push(y)})}),m.forEach(v=>{this._assetMap[v]=g})})}resolveBundle(e){const t=ha(e);e=Ft(e);const i={};return e.forEach(s=>{const n=this._bundles[s];if(n){const o=this.resolve(n),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(s,l)]=u}i[s]=a}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const s in t)i[s]=t[s].src;return i}return t.src}resolve(e){const t=ha(e);e=Ft(e);const i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s];const o=n[0],a=this._getPreferredOrder(n);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const c=n.filter(d=>d[l]?d[l]===u:!1);c.length&&(n=c)})}),this._resolverHash[s]=n[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:i,data:s,loadParser:n,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Ye.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=n??e.loadParser,e.format=o??e.format??Ye.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class d2{constructor(){this._detections=[],this._initialized=!1,this.resolver=new h2,this.loader=new NR,this.cache=Pi,this._backgroundLoader=new LR(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var n,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((n=e.texturePreference)==null?void 0:n.resolution)??1,i=typeof t=="number"?[t]:t,s=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,i,s,n){this.resolver.add(e,t,i,s,n)}async load(e,t){this._initialized||await this.init();const i=ha(e),s=Ft(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),n=this.resolver.resolve(s),o=await this._mapLoadToResolve(n,t);return i?o[s[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const s=this.resolver.resolveBundle(e),n={},o=Object.keys(s);let a=0,l=0;const u=()=>{t==null||t(++a/l)},c=o.map(d=>{const h=s[d];return l+=Object.keys(h).length,this._mapLoadToResolve(h,u).then(f=>{n[d]=f})});return await Promise.all(c),i?n[e[0]]:n}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Pi.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=Pi.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const n=await this.loader.load(i,t);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=n[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[s[l]]=u,Pi.set(c,u)}),o}async unload(e){this._initialized||await this.init();const t=Ft(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Ft(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{Pi.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,s)=>t.indexOf(i)===s),t}get detections(){return this._detections}get preferWorkers(){return Va.config.preferWorkers}set preferWorkers(e){pe("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const mo=new d2;K.handleByList(H.LoadParser,mo.loader.parsers).handleByList(H.ResolveParser,mo.resolver.parsers).handleByList(H.CacheParser,mo.cache.parsers).handleByList(H.DetectionParser,mo.detections);const f2={extension:H.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof q),getCacheableAssets:(r,e)=>{const t={};return r.forEach(i=>{e.forEach((s,n)=>{t[i+(n===0?"":n+1)]=s})}),t}};K.add(f2);async function mv(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const p2={extension:{type:H.DetectionParser,priority:1},test:async()=>mv("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};K.add(p2);const m2={extension:{type:H.DetectionParser,priority:0},test:async()=>mv("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};K.add(m2);const Wf=["png","jpg","jpeg"],g2={extension:{type:H.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...Wf],remove:async r=>r.filter(e=>!Wf.includes(e))};K.add(g2);const y2="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Sh(r){return y2?!1:document.createElement("video").canPlayType(r)!==""}const v2={extension:{type:H.DetectionParser,priority:0},test:async()=>Sh("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};K.add(v2);const _2={extension:{type:H.DetectionParser,priority:0},test:async()=>Sh("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};K.add(_2);const b2={extension:{type:H.DetectionParser,priority:0},test:async()=>Sh("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};K.add(b2);const x2={extension:H.ResolveParser,test:Va.test,parse:r=>{var e;return{resolution:parseFloat(((e=z.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:Ye.extname(r).slice(1),src:r}}};K.add(x2);var qe=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(qe||{});const da={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Qt,ns;function Xf(){ns={bptc:Qt.getExtension("EXT_texture_compression_bptc"),astc:Qt.getExtension("WEBGL_compressed_texture_astc"),etc:Qt.getExtension("WEBGL_compressed_texture_etc"),s3tc:Qt.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Qt.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Qt.getExtension("WEBGL_compressed_texture_pvrtc")||Qt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Qt.getExtension("WEBGL_compressed_texture_etc1"),atc:Qt.getExtension("WEBGL_compressed_texture_atc")}}const w2={extension:{type:H.DetectionParser,priority:2},test:async()=>{const r=z.ADAPTER.createCanvas().getContext("webgl");return r?(Qt=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{ns||Xf();const e=[];for(const t in ns)ns[t]&&e.push(t);return[...e,...r]},remove:async r=>(ns||Xf(),r.filter(e=>!(e in ns)))};K.add(w2);class T2 extends Ua{constructor(e,t={width:1,height:1,autoLoad:!0}){let i,s;typeof e=="string"?(i=e,s=new Uint8Array):(i=null,s=e),super(s,t),this.origin=i,this.buffer=s?new Xu(s):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Xu(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Di extends T2{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=Di._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||Di._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,i){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let n=0,o=this.levels;n<o;n++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:c}=this._levelBuffers[n];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,l,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=Di._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,i,s,n,o,a){const l=new Array(i);let u=e.byteOffset,c=o,d=a,h=c+s-1&~(s-1),f=d+n-1&~(n-1),p=h*f*da[t];for(let m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:h,levelHeight:i>1?d:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,d=d>>1||1,h=c+s-1&~(s-1),f=d+n-1&~(n-1),p=h*f*da[t];return l}}const Jl=4,go=124,A2=32,Yf=20,S2=542327876,yo={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},E2={FOURCC:2},vo={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},C2=1,P2=2,R2=4,I2=64,M2=512,k2=131072,D2=827611204,O2=861165636,L2=894720068,B2=808540228,F2=4,N2={[D2]:qe.COMPRESSED_RGBA_S3TC_DXT1_EXT,[O2]:qe.COMPRESSED_RGBA_S3TC_DXT3_EXT,[L2]:qe.COMPRESSED_RGBA_S3TC_DXT5_EXT},$2={70:qe.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:qe.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:qe.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:qe.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:qe.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:qe.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:qe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:qe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:qe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:qe.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:qe.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:qe.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:qe.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function U2(r){const e=new Uint32Array(r);if(e[0]!==S2)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,go/Uint32Array.BYTES_PER_ELEMENT),i=t[yo.HEIGHT],s=t[yo.WIDTH],n=t[yo.MIPMAP_COUNT],o=new Uint32Array(r,yo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,A2/Uint32Array.BYTES_PER_ELEMENT),a=o[C2];if(a&R2){const l=o[E2.FOURCC];if(l!==B2){const _=N2[l],y=Jl+go,b=new Uint8Array(r,y);return[new Di(b,{format:_,width:s,height:i,levels:n})]}const u=Jl+go,c=new Uint32Array(e.buffer,u,Yf/Uint32Array.BYTES_PER_ELEMENT),d=c[vo.DXGI_FORMAT],h=c[vo.RESOURCE_DIMENSION],f=c[vo.MISC_FLAG],p=c[vo.ARRAY_SIZE],m=$2[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===F2)throw new Error("DDSParser does not support cubemap textures");if(h===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,v=Jl+go+Yf;if(p===1)g.push(new Uint8Array(r,v));else{const _=da[m];let y=0,b=s,w=i;for(let x=0;x<n;x++){const A=Math.max(1,b+3&-4),C=Math.max(1,w+3&-4),E=A*C*_;y+=E,b=b>>>1,w=w>>>1}let S=v;for(let x=0;x<p;x++)g.push(new Uint8Array(r,S,y)),S+=y}return g.map(_=>new Di(_,{format:m,width:s,height:i,levels:n}))}throw a&I2?new Error("DDSParser does not support uncompressed texture data."):a&M2?new Error("DDSParser does not supported YUV uncompressed texture data."):a&k2?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&P2?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const qf=[171,75,84,88,32,49,49,187,13,10,26,10],H2=67305985,Mt={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},vc=64,Kf={[Q.UNSIGNED_BYTE]:1,[Q.UNSIGNED_SHORT]:2,[Q.INT]:4,[Q.UNSIGNED_INT]:4,[Q.FLOAT]:4,[Q.HALF_FLOAT]:8},G2={[F.RGBA]:4,[F.RGB]:3,[F.RG]:2,[F.RED]:1,[F.LUMINANCE]:1,[F.LUMINANCE_ALPHA]:2,[F.ALPHA]:1},z2={[Q.UNSIGNED_SHORT_4_4_4_4]:2,[Q.UNSIGNED_SHORT_5_5_5_1]:2,[Q.UNSIGNED_SHORT_5_6_5]:2};function j2(r,e,t=!1){const i=new DataView(e);if(!V2(r,i))return null;const s=i.getUint32(Mt.ENDIANNESS,!0)===H2,n=i.getUint32(Mt.GL_TYPE,s),o=i.getUint32(Mt.GL_FORMAT,s),a=i.getUint32(Mt.GL_INTERNAL_FORMAT,s),l=i.getUint32(Mt.PIXEL_WIDTH,s),u=i.getUint32(Mt.PIXEL_HEIGHT,s)||1,c=i.getUint32(Mt.PIXEL_DEPTH,s)||1,d=i.getUint32(Mt.NUMBER_OF_ARRAY_ELEMENTS,s)||1,h=i.getUint32(Mt.NUMBER_OF_FACES,s),f=i.getUint32(Mt.NUMBER_OF_MIPMAP_LEVELS,s),p=i.getUint32(Mt.BYTES_OF_KEY_VALUE_DATA,s);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,v=l+3&-4,_=u+3&-4,y=new Array(d);let b=l*u;n===0&&(b=v*_);let w;if(n!==0?Kf[n]?w=Kf[n]*G2[o]:w=z2[n]:w=da[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=t?X2(i,p,s):null;let x=b*w,A=l,C=u,E=v,D=_,M=vc+p;for(let T=0;T<f;T++){const P=i.getUint32(M,s);let L=M+4;for(let j=0;j<d;j++){let $=y[j];$||($=y[j]=new Array(f)),$[T]={levelID:T,levelWidth:f>1||n!==0?A:E,levelHeight:f>1||n!==0?C:D,levelBuffer:new Uint8Array(e,L,x)},L+=x}M+=P+4,M=M%4!==0?M+4-M%4:M,A=A>>1||1,C=C>>1||1,E=A+m-1&-4,D=C+g-1&-4,x=E*D*w}return n!==0?{uncompressed:y.map(T=>{let P=T[0].levelBuffer,L=!1;return n===Q.FLOAT?P=new Float32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4):n===Q.UNSIGNED_INT?(L=!0,P=new Uint32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)):n===Q.INT&&(L=!0,P=new Int32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)),{resource:new Ua(P,{width:T[0].levelWidth,height:T[0].levelHeight}),type:n,format:L?W2(o):o}}),kvData:S}:{compressed:y.map(T=>new Di(null,{format:a,width:l,height:u,levels:f,levelBuffers:T})),kvData:S}}function V2(r,e){for(let t=0;t<qf.length;t++)if(e.getUint8(t)!==qf[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function W2(r){switch(r){case F.RGBA:return F.RGBA_INTEGER;case F.RGB:return F.RGB_INTEGER;case F.RG:return F.RG_INTEGER;case F.RED:return F.RED_INTEGER;default:return r}}function X2(r,e,t){const i=new Map;let s=0;for(;s<e;){const n=r.getUint32(vc+s,t),o=vc+s+4,a=3-(n+3)%4;if(n===0||n>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),c=new DataView(r.buffer,o+l+1,n-l-1);i.set(u,c),s+=4+n+a}return i}const Y2={extension:{type:H.LoadParser,priority:qt.High},name:"loadDDS",test(r){return di(r,".dds")},async load(r,e,t){const i=await(await z.ADAPTER.fetch(r)).arrayBuffer(),s=U2(i).map(n=>{const o=new le(n,{mipmap:mr.OFF,alphaMode:ht.NO_PREMULTIPLIED_ALPHA,resolution:Br(r),...e.data});return jn(o,t,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};K.add(Y2);const q2={extension:{type:H.LoadParser,priority:qt.High},name:"loadKTX",test(r){return di(r,".ktx")},async load(r,e,t){const i=await(await z.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:n,kvData:o}=j2(r,i),a=s??n,l={mipmap:mr.OFF,alphaMode:ht.NO_PREMULTIPLIED_ALPHA,resolution:Br(r),...e.data},u=a.map(c=>{a===n&&Object.assign(l,{type:c.type,format:c.format});const d=c.resource??c,h=new le(d,l);return h.ktxKeyValueData=o,jn(h,t,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};K.add(q2);const K2=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Z2={extension:H.ResolveParser,test:r=>{const e=Ye.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var i,s;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const n=e.pop();if(K2.includes(n))return{resolution:parseFloat(((i=z.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:n,src:r}}return{resolution:parseFloat(((s=z.RETINA_PREFIX.exec(r))==null?void 0:s[1])??"1"),format:t,src:r}}};K.add(Z2);const _o=new ue,J2=4,gv=class Ys{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,i,s){const n=new Image;return n.src=await this.base64(e,t,i,s),n}async base64(e,t,i,s){const n=this.canvas(e,s);if(n.toBlob!==void 0)return new Promise((o,a)=>{n.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},t,i)});if(n.toDataURL!==void 0)return n.toDataURL(t,i);if(n.convertToBlob!==void 0){const o=await n.convertToBlob({type:t,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&Ys._flipY(i,s,n),a&&Ys._unpremultiplyAlpha(i);const l=new MC(s,n,1),u=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&Ys._flipY(i,s,n),a&&Ys._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,o=!1,a,l=!1;e&&(e instanceof Vi?a=e:(a=i.generateTexture(e,{region:t,resolution:i.resolution,multisample:i.multisample}),l=!0,t&&(_o.width=t.width,_o.height=t.height,t=_o)));const u=i.gl;if(a){if(s=a.baseTexture.resolution,t=t??a.frame,n=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===F.RGBA,!l){i.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else s=i.resolution,t||(t=_o,t.width=i.width/s,t.height=i.height/s),n=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const c=Math.max(Math.round(t.width*s),1),d=Math.max(Math.round(t.height*s),1),h=new Uint8Array(J2*c*d);return u.readPixels(Math.round(t.x*s),Math.round(t.y*s),c,d,u.RGBA,u.UNSIGNED_BYTE,h),l&&(a==null||a.destroy(!0)),{pixels:h,width:c,height:d,flipY:n,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,i){const s=t<<2,n=i>>1,o=new Uint8Array(s);for(let a=0;a<n;a++){const l=a*s,u=(i-a-1)*s;o.set(e.subarray(l,l+s)),e.copyWithin(l,u,u+s),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const s=e[i+3];if(s!==0){const n=255.001/s;e[i]=e[i]*n+.5,e[i+1]=e[i+1]*n+.5,e[i+2]=e[i+2]*n+.5}}}};gv.extension={name:"extract",type:H.RendererSystem};let Q2=gv;K.add(Q2);const fa={build(r){const e=r.points;let t,i,s,n,o,a;if(r.type===Ke.CIRC){const p=r.shape;t=p.x,i=p.y,o=a=p.radius,s=n=0}else if(r.type===Ke.ELIP){const p=r.shape;t=p.x,i=p.y,o=p.width,a=p.height,s=n=0}else{const p=r.shape,m=p.width/2,g=p.height/2;t=p.x+m,i=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),s=m-o,n=g-a}if(!(o>=0&&a>=0&&s>=0&&n>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(s?4:0)+(n?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+s,e[1]=e[3]=i+n,e[2]=e[4]=t-s,e[5]=e[7]=i-n;return}let c=0,d=l*4+(s?2:0)+2,h=d,f=u;{const p=s+o,m=n,g=t+p,v=t-p,_=i+m;if(e[c++]=g,e[c++]=_,e[--d]=_,e[--d]=v,n){const y=i-m;e[h++]=v,e[h++]=y,e[--f]=y,e[--f]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=s+Math.cos(m)*o,v=n+Math.sin(m)*a,_=t+g,y=t-g,b=i+v,w=i-v;e[c++]=_,e[c++]=b,e[--d]=b,e[--d]=y,e[h++]=y,e[h++]=w,e[--f]=w,e[--f]=_}{const p=s,m=n+a,g=t+p,v=t-p,_=i+m,y=i-m;e[c++]=g,e[c++]=_,e[--f]=y,e[--f]=g,s&&(e[c++]=v,e[c++]=_,e[--f]=y,e[--f]=v)}},triangulate(r,e){const t=r.points,i=e.points,s=e.indices;if(t.length===0)return;let n=i.length/2;const o=n;let a,l;if(r.type!==Ke.RREC){const c=r.shape;a=c.x,l=c.y}else{const c=r.shape;a=c.x+c.width/2,l=c.y+c.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),n++,i.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)i.push(t[c],t[c+1]),s.push(n++,o,n);s.push(o+1,o,n)}};function Zf(r,e=!1){const t=r.length;if(t<6)return;let i=0;for(let s=0,n=r[t-2],o=r[t-1];s<t;s+=2){const a=r[s],l=r[s+1];i+=(a-n)*(l+o),n=a,o=l}if(!e&&i>0||e&&i<=0){const s=t/2;for(let n=s+s%2;n<t;n+=2){const o=t-n-2,a=t-n-1,l=n,u=n+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const yv={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const i=r.holes,s=e.points,n=e.indices;if(t.length>=6){Zf(t,!1);const o=[];for(let u=0;u<i.length;u++){const c=i[u];Zf(c.points,!0),o.push(t.length/2),t=t.concat(c.points)}const a=aA(t,o,2);if(!a)return;const l=s.length/2;for(let u=0;u<a.length;u+=3)n.push(a[u]+l),n.push(a[u+1]+l),n.push(a[u+2]+l);for(let u=0;u<t.length;u++)s.push(t[u])}}},eI={build(r){const e=r.shape,t=e.x,i=e.y,s=e.width,n=e.height,o=r.points;o.length=0,s>=0&&n>=0&&o.push(t,i,t+s,i,t+s,i+n,t,i+n)},triangulate(r,e){const t=r.points,i=e.points;if(t.length===0)return;const s=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},tI={build(r){fa.build(r)},triangulate(r,e){fa.triangulate(r,e)}};var Tt=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Tt||{}),Kr=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Kr||{});const Ss={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class Jf{static curveTo(e,t,i,s,n,o){const a=o[o.length-2],l=o[o.length-1]-t,u=a-e,c=s-t,d=i-e,h=Math.abs(l*d-u*c);if(h<1e-8||n===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const f=l*l+u*u,p=c*c+d*d,m=l*c+u*d,g=n*Math.sqrt(f)/h,v=n*Math.sqrt(p)/h,_=g*m/f,y=v*m/p,b=g*d+v*u,w=g*c+v*l,S=u*(v+_),x=l*(v+_),A=d*(g+y),C=c*(g+y),E=Math.atan2(x-w,S-b),D=Math.atan2(C-w,A-b);return{cx:b+e,cy:w+t,radius:n,startAngle:E,endAngle:D,anticlockwise:u*c>d*l}}static arc(e,t,i,s,n,o,a,l,u){const c=a-o,d=Ss._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/sa)*40),h=c/(d*2),f=h*2,p=Math.cos(h),m=Math.sin(h),g=d-1,v=g%1/g;for(let _=0;_<=g;++_){const y=_+v*_,b=h+o+f*y,w=Math.cos(b),S=-Math.sin(b);u.push((p*w+m*S)*n+i,(p*-S+m*w)*n+s)}}}class rI{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Eh{static curveLength(e,t,i,s,n,o,a,l){let u=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,b=e,w=t;for(let S=1;S<=10;++S)c=S/10,d=c*c,h=d*c,f=1-c,p=f*f,m=p*f,g=m*e+3*p*c*i+3*f*d*n+h*a,v=m*t+3*p*c*s+3*f*d*o+h*l,_=b-g,y=w-v,b=g,w=v,u+=Math.sqrt(_*_+y*y);return u}static curveTo(e,t,i,s,n,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const c=Ss._segmentsCount(Eh.curveLength(l,u,e,t,i,s,n,o));let d=0,h=0,f=0,p=0,m=0;a.push(l,u);for(let g=1,v=0;g<=c;++g)v=g/c,d=1-v,h=d*d,f=h*d,p=v*v,m=p*v,a.push(f*l+3*h*v*e+3*d*p*i+m*n,f*u+3*h*v*t+3*d*p*s+m*o)}}function Qf(r,e,t,i,s,n,o,a){const l=r-t*s,u=e-i*s,c=r+t*n,d=e+i*n;let h,f;o?(h=i,f=-t):(h=-i,f=t);const p=l+h,m=u+f,g=c+h,v=d+f;return a.push(p,m,g,v),2}function yi(r,e,t,i,s,n,o,a){const l=t-r,u=i-e;let c=Math.atan2(l,u),d=Math.atan2(s-r,n-e);a&&c<d?c+=Math.PI*2:!a&&c>d&&(d+=Math.PI*2);let h=c;const f=d-c,p=Math.abs(f),m=Math.sqrt(l*l+u*u),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,v=f/g;if(h+=v,a){o.push(r,e,t,i);for(let _=1,y=h;_<g;_++,y+=v)o.push(r,e,r+Math.sin(y)*m,e+Math.cos(y)*m);o.push(r,e,s,n)}else{o.push(t,i,r,e);for(let _=1,y=h;_<g;_++,y+=v)o.push(r+Math.sin(y)*m,e+Math.cos(y)*m,r,e);o.push(s,n,r,e)}return g*2}function iI(r,e){const t=r.shape;let i=r.points||t.points.slice();const s=e.closePointEps;if(i.length===0)return;const n=r.lineStyle,o=new ye(i[0],i[1]),a=new ye(i[i.length-2],i[i.length-1]),l=t.type!==Ke.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const $=(o.x+a.x)*.5,W=(a.y+o.y)*.5;i.unshift($,W),i.push($,W)}const c=e.points,d=i.length/2;let h=i.length;const f=c.length/2,p=n.width/2,m=p*p,g=n.miterLimit*n.miterLimit;let v=i[0],_=i[1],y=i[2],b=i[3],w=0,S=0,x=-(_-b),A=v-y,C=0,E=0,D=Math.sqrt(x*x+A*A);x/=D,A/=D,x*=p,A*=p;const M=n.alignment,T=(1-M)*2,P=M*2;l||(n.cap===Kr.ROUND?h+=yi(v-x*(T-P)*.5,_-A*(T-P)*.5,v-x*T,_-A*T,v+x*P,_+A*P,c,!0)+2:n.cap===Kr.SQUARE&&(h+=Qf(v,_,x,A,T,P,!0,c))),c.push(v-x*T,_-A*T,v+x*P,_+A*P);for(let $=1;$<d-1;++$){v=i[($-1)*2],_=i[($-1)*2+1],y=i[$*2],b=i[$*2+1],w=i[($+1)*2],S=i[($+1)*2+1],x=-(_-b),A=v-y,D=Math.sqrt(x*x+A*A),x/=D,A/=D,x*=p,A*=p,C=-(b-S),E=y-w,D=Math.sqrt(C*C+E*E),C/=D,E/=D,C*=p,E*=p;const W=y-v,ne=_-b,O=y-w,B=S-b,oe=W*O+ne*B,ce=ne*O-B*W,fe=ce<0;if(Math.abs(ce)<.001*Math.abs(oe)){c.push(y-x*T,b-A*T,y+x*P,b+A*P),oe>=0&&(n.join===Tt.ROUND?h+=yi(y,b,y-x*T,b-A*T,y-C*T,b-E*T,c,!1)+4:h+=2,c.push(y-C*P,b-E*P,y+C*T,b+E*T));continue}const Ae=(-x+v)*(-A+b)-(-x+y)*(-A+_),Se=(-C+w)*(-E+b)-(-C+y)*(-E+S),Fe=(W*Se-O*Ae)/ce,je=(B*Ae-ne*Se)/ce,ot=(Fe-y)*(Fe-y)+(je-b)*(je-b),Ue=y+(Fe-y)*T,Te=b+(je-b)*T,Me=y-(Fe-y)*P,Oe=b-(je-b)*P,bt=Math.min(W*W+ne*ne,O*O+B*B),xt=fe?T:P,pi=bt+xt*xt*m,il=ot<=pi;let Yi=n.join;if(Yi===Tt.MITER&&ot/m>g&&(Yi=Tt.BEVEL),il)switch(Yi){case Tt.MITER:{c.push(Ue,Te,Me,Oe);break}case Tt.BEVEL:{fe?c.push(Ue,Te,y+x*P,b+A*P,Ue,Te,y+C*P,b+E*P):c.push(y-x*T,b-A*T,Me,Oe,y-C*T,b-E*T,Me,Oe),h+=2;break}case Tt.ROUND:{fe?(c.push(Ue,Te,y+x*P,b+A*P),h+=yi(y,b,y+x*P,b+A*P,y+C*P,b+E*P,c,!0)+4,c.push(Ue,Te,y+C*P,b+E*P)):(c.push(y-x*T,b-A*T,Me,Oe),h+=yi(y,b,y-x*T,b-A*T,y-C*T,b-E*T,c,!1)+4,c.push(y-C*T,b-E*T,Me,Oe));break}}else{switch(c.push(y-x*T,b-A*T,y+x*P,b+A*P),Yi){case Tt.MITER:{fe?c.push(Me,Oe,Me,Oe):c.push(Ue,Te,Ue,Te),h+=2;break}case Tt.ROUND:{fe?h+=yi(y,b,y+x*P,b+A*P,y+C*P,b+E*P,c,!0)+2:h+=yi(y,b,y-x*T,b-A*T,y-C*T,b-E*T,c,!1)+2;break}}c.push(y-C*T,b-E*T,y+C*P,b+E*P),h+=2}}v=i[(d-2)*2],_=i[(d-2)*2+1],y=i[(d-1)*2],b=i[(d-1)*2+1],x=-(_-b),A=v-y,D=Math.sqrt(x*x+A*A),x/=D,A/=D,x*=p,A*=p,c.push(y-x*T,b-A*T,y+x*P,b+A*P),l||(n.cap===Kr.ROUND?h+=yi(y-x*(T-P)*.5,b-A*(T-P)*.5,y-x*T,b-A*T,y+x*P,b+A*P,c,!1)+2:n.cap===Kr.SQUARE&&(h+=Qf(y,b,x,A,T,P,!1,c)));const L=e.indices,j=Ss.epsilon*Ss.epsilon;for(let $=f;$<h+f-2;++$)v=c[$*2],_=c[$*2+1],y=c[($+1)*2],b=c[($+1)*2+1],w=c[($+2)*2],S=c[($+2)*2+1],!(Math.abs(v*(b-S)+y*(S-_)+w*(_-b))<j)&&L.push($,$+1,$+2)}function sI(r,e){let t=0;const i=r.shape,s=r.points||i.points,n=i.type!==Ke.POLY||i.closeStroke;if(s.length===0)return;const o=e.points,a=e.indices,l=s.length/2,u=o.length/2;let c=u;for(o.push(s[0],s[1]),t=1;t<l;t++)o.push(s[t*2],s[t*2+1]),a.push(c,c+1),c++;n&&a.push(c,u)}function ep(r,e){r.lineStyle.native?sI(r,e):iI(r,e)}class Ch{static curveLength(e,t,i,s,n,o){const a=e-2*i+n,l=t-2*s+o,u=2*i-2*e,c=2*s-2*t,d=4*(a*a+l*l),h=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(d+h+f),m=Math.sqrt(d),g=2*d*m,v=2*Math.sqrt(f),_=h/m;return(g*p+m*h*(p-v)+(4*f*d-h*h)*Math.log((2*m+_+p)/(_+v)))/(4*g)}static curveTo(e,t,i,s,n){const o=n[n.length-2],a=n[n.length-1],l=Ss._segmentsCount(Ch.curveLength(o,a,e,t,i,s));let u=0,c=0;for(let d=1;d<=l;++d){const h=d/l;u=o+(e-o)*h,c=a+(t-a)*h,n.push(u+(e+(i-e)*h-u)*h,c+(t+(s-t)*h-c)*h)}}}const Ql={[Ke.POLY]:yv,[Ke.CIRC]:fa,[Ke.ELIP]:fa,[Ke.RECT]:eI,[Ke.RREC]:tI},tp=[],bo=[];class pa{constructor(e,t=null,i=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=s,this.type=e.type}clone(){return new pa(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Qi=new ye,vv=class _v extends Ay{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ua,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),bo.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),tp.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,s=null){const n=new pa(e,t,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new pa(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const s=t[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Qi):Qi.copyFrom(e),s.shape.contains(Qi.x,Qi.y))){let n=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(Qi.x,Qi.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const u=t[l],c=u.fillStyle,d=u.lineStyle;Ql[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||d.visible)&&this.processHoles(u.holes);for(let h=0;h<2;h++){const f=h===0?c:d;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Qr.REPEAT,h===0?this.processFill(u):this.processLine(u);const v=this.points.length/2-g;v!==0&&(i&&!this._compareStyles(s,f)&&(i.end(m,g),i=null),i||(i=tp.pop()||new rI,i.begin(f,m,g),this.batches.push(i),s=f),this.addUvs(this.points,e,f.texture,g,v,f.matrix))}}const n=this.indices.length,o=this.points.length/2;if(i&&i.end(n,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const s=e[t];for(let n=0;n<s.size;n++){const o=s.start+n;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<_v.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++le._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),bo.push(this.drawCalls[d]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let s=bo.pop();s||(s=new Ku,s.texArray=new ec),s.texArray.count=0,s.start=0,s.size=0,s.type=ar.TRIANGLES;let n=0,o=null,a=0,l=!1,u=ar.TRIANGLES,c=0;this.drawCalls.push(s);for(let d=0;d<this.batches.length;d++){const h=this.batches[d],f=8,p=h.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?ar.LINES:ar.TRIANGLES,o=null,n=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(n===f&&(e++,n=0,s.size>0&&(s=bo.pop(),s||(s=new Ku,s.texArray=new ec),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=u),m.touched=1,m._batchEnabled=e,m._batchLocation=n,m.wrapMode=Qr.REPEAT,s.texArray.elements[s.texArray.count++]=m,n++)),s.size+=h.size,c+=h.size,a=m._batchLocation,this.addColors(t,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(i,a,h.attribSize,h.attribStart)}le._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(e.length*3*4),o=new Float32Array(n),a=new Uint32Array(n);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=t[u*2],o[l++]=t[u*2+1],a[l++]=i[u],o[l++]=s[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?yv.triangulate(e,this):Ql[e.type].triangulate(e,this)}processLine(e){ep(e,this);for(let t=0;t<e.holes.length;t++)ep(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];Ql[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const s=e[i*2],n=e[i*2+1];e[i*2]=t.a*s+t.c*n+t.tx,e[i*2+1]=t.b*s+t.d*n+t.ty}}addColors(e,t,i,s,n=0){const o=Ee.shared.setValue(t).toLittleEndianNumber(),a=Ee.shared.setValue(o).toPremultiplied(i);e.length=Math.max(e.length,n+s);for(let l=0;l<s;l++)e[n+l]=a}addTextureIds(e,t,i,s=0){e.length=Math.max(e.length,s+i);for(let n=0;n<i;n++)e[s+n]=t}addUvs(e,t,i,s,n,o=null){let a=0;const l=t.length,u=i.frame;for(;a<n;){let d=e[(s+a)*2],h=e[(s+a)*2+1];if(o){const f=o.a*d+o.c*h+o.tx;h=o.b*d+o.d*h+o.ty,d=f}a++,t.push(d/u.width,h/u.height)}const c=i.baseTexture;(u.width<c.width||u.height<c.height)&&this.adjustUvs(t,i,l,n)}adjustUvs(e,t,i,s){const n=t.baseTexture,o=1e-6,a=i+s*2,l=t.frame,u=l.width/n.width,c=l.height/n.height;let d=l.x/l.width,h=l.y/l.height,f=Math.floor(e[i]+o),p=Math.floor(e[i+1]+o);for(let m=i+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));d-=f,h-=p;for(let m=i;m<a;m+=2)e[m]=(e[m]+d)*u,e[m+1]=(e[m+1]+h)*c}};vv.BATCHABLE_SIZE=100;let nI=vv;class Wa{constructor(){this.color=16777215,this.alpha=1,this.texture=q.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Wa;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=q.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Ph extends Wa{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Kr.BUTT,this.join=Tt.MITER,this.miterLimit=10}clone(){const e=new Ph;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Kr.BUTT,this.join=Tt.MITER,this.miterLimit=10}}const eu={},_c=class Ho extends Xt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Wa,this._lineStyle=new Ph,this._matrix=null,this._holeMode=!1,this.state=vr.for2d(),this._geometry=e||new nI,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ee(16777215),this.blendMode=re.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ho(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,s=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:s,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:q.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Kr.BUTT,join:Tt.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ki,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ki,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Ch.curveTo(e,t,i,s,n),this}bezierCurveTo(e,t,i,s,n,o){return this._initCurve(),Eh.curveTo(e,t,i,s,n,o,this.currentPath.points),this}arcTo(e,t,i,s,n){this._initCurve(e,t);const o=this.currentPath.points,a=Jf.curveTo(e,t,i,s,n,o);if(a){const{cx:l,cy:u,radius:c,startAngle:d,endAngle:h,anticlockwise:f}=a;this.arc(l,u,c,d,h,f)}return this}arc(e,t,i,s,n,o=!1){if(s===n)return this;if(!o&&n<=s?n+=sa:o&&s<=n&&(s+=sa),n-s===0)return this;const a=e+Math.cos(s)*i,l=t+Math.sin(s)*i,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const d=Math.abs(c[c.length-2]-a),h=Math.abs(c[c.length-1]-l);d<u&&h<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Jf.arc(a,l,e,t,i,s,n,o,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:q.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Ee.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:q.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,s){return this.drawShape(new ue(e,t,i,s))}drawRoundedRect(e,t,i,s,n){return this.drawShape(new za(e,t,i,s,n))}drawCircle(e,t,i){return this.drawShape(new Ha(e,t,i))}drawEllipse(e,t,i,s){return this.drawShape(new Ga(e,t,i,s))}drawPolygon(...e){let t,i=!0;const s=e[0];s.points?(i=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new ki(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ke.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let s=0;s<i;s++){const n=e.batches[s],o=n.style.color,a=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),c={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:Ee.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,s=this.worldAlpha,n=t.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Ee.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:i,type:s,size:n,start:o}=t,a=i.count;for(let l=0;l<a;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(s,n,o)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!eu[i]){const{maxTextures:s}=e.plugins[i],n=new Int32Array(s);for(let l=0;l<s;l++)n[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ce,default:zt.from({uSamplers:n},!0)},a=e.plugins[i]._shader.program;eu[i]=new hr(a,o)}t=eu[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:s,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,s,n)}containsPoint(e){return this.worldTransform.applyInverse(e,Ho._TEMP_POINT),this._geometry.containsPoint(Ho._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ee.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,o=t.d,a=t.tx,l=t.ty,u=this._geometry.points,c=this.vertexData;let d=0;for(let h=0;h<u.length;h+=2){const f=u[h],p=u[h+1];c[d++]=i*f+n*p+a,c[d++]=o*p+s*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};_c.curves=Ss,_c._TEMP_POINT=new ye;let bv=_c;class oI{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const tu=new ye,rp=new ki,xv=class wv extends Xt{constructor(e,t,i,s=ar.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||vr.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=z.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ar.TRIANGLES&&t.length<wv.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const s=this.transform.worldTransform,n=s.a,o=s.b,a=s.c,l=s.d,u=s.tx,c=s.ty,d=this.vertexData;for(let h=0;h<d.length/2;h++){const f=t[h*2],p=t[h*2+1];d[h*2]=n*f+a*p+u,d[h*2+1]=o*f+l*p+c}if(this._roundPixels){const h=z.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*h)/h}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new oI(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,tu);const t=this.geometry.getBuffer("aVertexPosition").data,i=rp.points,s=this.geometry.getIndex().data,n=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<n;a+=o){const l=s[a]*2,u=s[a+1]*2,c=s[a+2]*2;if(i[0]=t[l],i[1]=t[l+1],i[2]=t[u],i[3]=t[u+1],i[4]=t[c],i[5]=t[c+1],rp.contains(tu.x,tu.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};xv.BATCHABLE_SIZE=100;let ip=xv;class aI extends ni{constructor(e,t,i){super();const s=new ze(e),n=new ze(t,!0),o=new ze(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,Q.FLOAT).addAttribute("aTextureCoord",n,2,!1,Q.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var lI=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,uI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class sp extends hr{constructor(e,t){const i={uSampler:e,alpha:1,uTextureMatrix:Ce.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(i,t.uniforms),super(t.program||Pr.from(uI,lI),i),this._colorDirty=!1,this.uvMatrix=new Ny(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new Ee(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Ee.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class np{constructor(e,t,i){this.geometry=new ni,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let n=e[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||Q.FLOAT,offset:n.offset},t[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new ze(RC(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ze(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new ze(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Q.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Q.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,i){for(let s=0;s<this.dynamicProperties.length;s++){const n=this.dynamicProperties[s];n.uploadFunction(e,t,i,n.type===Q.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,i){for(let s=0;s<this.staticProperties.length;s++){const n=this.staticProperties[s];n.uploadFunction(e,t,i,n.type===Q.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var cI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,hI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Tv extends ja{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ce,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Q.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=hr.from(hI,cI,{}),this.state=vr.for2d()}render(e){const t=e.children,i=e._maxSize,s=e._batchSize,n=this.renderer;let o=t.length;if(o===0)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=by(e.blendMode,u),n.state.set(this.state);const c=n.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Ee.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<o;f+=s,p+=1){let m=o-f;m>s&&(m=s),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const g=a[p];g.uploadDynamic(t,f,m);const v=e._bufferUpdateIDs[p]||0;h=h||g._updateID<v,h&&(g._updateID=e._updateID,g.uploadStatic(t,f,m)),n.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],i=e._maxSize,s=e._batchSize,n=e._properties;for(let o=0;o<i;o+=s)t.push(new np(this.properties,n,s));return t}_generateOneMoreBuffer(e){const t=e._batchSize,i=e._properties;return new np(this.properties,i,t)}uploadVertices(e,t,i,s,n,o){let a=0,l=0,u=0,c=0;for(let d=0;d<i;++d){const h=e[t+d],f=h._texture,p=h.scale.x,m=h.scale.y,g=f.trim,v=f.orig;g?(l=g.x-h.anchor.x*v.width,a=l+g.width,c=g.y-h.anchor.y*v.height,u=c+g.height):(a=v.width*(1-h.anchor.x),l=v.width*-h.anchor.x,u=v.height*(1-h.anchor.y),c=v.height*-h.anchor.y),s[o]=l*p,s[o+1]=c*m,s[o+n]=a*p,s[o+n+1]=c*m,s[o+n*2]=a*p,s[o+n*2+1]=u*m,s[o+n*3]=l*p,s[o+n*3+1]=u*m,o+=n*4}}uploadPosition(e,t,i,s,n,o){for(let a=0;a<i;a++){const l=e[t+a].position;s[o]=l.x,s[o+1]=l.y,s[o+n]=l.x,s[o+n+1]=l.y,s[o+n*2]=l.x,s[o+n*2+1]=l.y,s[o+n*3]=l.x,s[o+n*3+1]=l.y,o+=n*4}}uploadRotation(e,t,i,s,n,o){for(let a=0;a<i;a++){const l=e[t+a].rotation;s[o]=l,s[o+n]=l,s[o+n*2]=l,s[o+n*3]=l,o+=n*4}}uploadUvs(e,t,i,s,n,o){for(let a=0;a<i;++a){const l=e[t+a]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+n]=l.x1,s[o+n+1]=l.y1,s[o+n*2]=l.x2,s[o+n*2+1]=l.y2,s[o+n*3]=l.x3,s[o+n*3+1]=l.y3,o+=n*4):(s[o]=0,s[o+1]=0,s[o+n]=0,s[o+n+1]=0,s[o+n*2]=0,s[o+n*2+1]=0,s[o+n*3]=0,s[o+n*3+1]=0,o+=n*4)}}uploadTint(e,t,i,s,n,o){for(let a=0;a<i;++a){const l=e[t+a],u=Ee.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[o]=u,s[o+n]=u,s[o+n*2]=u,s[o+n*3]=u,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Tv.extension={name:"particle",type:H.RendererPlugin};K.add(Tv);var Xa=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Xa||{});const xo={willReadFrequently:!0},er=class Z{static get experimentalLetterSpacingSupported(){let e=Z._experimentalLetterSpacingSupported;if(e!==void 0){const t=z.ADAPTER.getCanvasRenderingContext2D().prototype;e=Z._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,n,o,a,l,u){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,i,s=Z._canvas){i=i??t.wordWrap;const n=t.toFontString(),o=Z.measureFont(n);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=s.getContext("2d",xo);a.font=n;const l=(i?Z.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=Z._measureText(l[p],t.letterSpacing,a);u[p]=m,c=Math.max(c,m)}let d=c+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);const h=t.lineHeight||o.fontSize+t.strokeThickness;let f=Math.max(h,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(h+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new Z(e,t,d,f,l,u,h+t.leading,c,o)}static _measureText(e,t,i){let s=!1;Z.experimentalLetterSpacingSupported&&(Z.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(s?n-=t:n+=(Z.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=Z._canvas){const s=i.getContext("2d",xo);let n=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=t,d=Z.collapseSpaces(c),h=Z.collapseNewlines(c);let f=!d;const p=t.wordWrapWidth+u,m=Z.tokenize(e);for(let g=0;g<m.length;g++){let v=m[g];if(Z.isNewline(v)){if(!h){a+=Z.addLine(o),f=!d,o="",n=0;continue}v=" "}if(d){const y=Z.isBreakingSpace(v),b=Z.isBreakingSpace(o[o.length-1]);if(y&&b)continue}const _=Z.getFromCache(v,u,l,s);if(_>p)if(o!==""&&(a+=Z.addLine(o),o="",n=0),Z.canBreakWords(v,t.breakWords)){const y=Z.wordWrapSplit(v);for(let b=0;b<y.length;b++){let w=y[b],S=w,x=1;for(;y[b+x];){const C=y[b+x];if(!Z.canBreakChars(S,C,v,b,t.breakWords))w+=C;else break;S=C,x++}b+=x-1;const A=Z.getFromCache(w,u,l,s);A+n>p&&(a+=Z.addLine(o),f=!1,o="",n=0),o+=w,n+=A}}else{o.length>0&&(a+=Z.addLine(o),o="",n=0);const y=g===m.length-1;a+=Z.addLine(v,!y),f=!1,o="",n=0}else _+n>p&&(f=!1,a+=Z.addLine(o),o="",n=0),(o.length>0||!Z.isBreakingSpace(v)||f)&&(o+=v,n+=_)}return a+=Z.addLine(o,!1),a}static addLine(e,t=!0){return e=Z.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,s){let n=i[e];return typeof n!="number"&&(n=Z._measureText(e,t,s)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!Z.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Z._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Z._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const n=e[s],o=e[s+1];if(Z.isBreakingSpace(n,o)||Z.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,n){return!0}static wordWrapSplit(e){return Z.graphemeSegmenter(e)}static measureFont(e){if(Z._fonts[e])return Z._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=Z._canvas,s=Z._context;s.font=e;const n=Z.METRICS_STRING+Z.BASELINE_SYMBOL,o=Math.ceil(s.measureText(n).width);let a=Math.ceil(s.measureText(Z.BASELINE_SYMBOL).width);const l=Math.ceil(Z.HEIGHT_MULTIPLIER*a);if(a=a*Z.BASELINE_MULTIPLIER|0,o===0||l===0)return Z._fonts[e]=t,t;i.width=o,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,o,l),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,a);const u=s.getImageData(0,0,o,l).data,c=u.length,d=o*4;let h=0,f=0,p=!1;for(h=0;h<a;++h){for(let m=0;m<d;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f+=d;else break}for(t.ascent=a-h,f=c-d,p=!1,h=l;h>a;--h){for(let m=0;m<d;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f-=d;else break}return t.descent=h-a,t.fontSize=t.ascent+t.descent,Z._fonts[e]=t,t}static clearMetrics(e=""){e?delete Z._fonts[e]:Z._fonts={}}static get _canvas(){var e;if(!Z.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if((e=i.getContext("2d",xo))!=null&&e.measureText)return Z.__canvas=i,i;t=z.ADAPTER.createCanvas()}catch{t=z.ADAPTER.createCanvas()}t.width=t.height=10,Z.__canvas=t}return Z.__canvas}static get _context(){return Z.__context||(Z.__context=Z._canvas.getContext("2d",xo)),Z.__context}};er.METRICS_STRING="|ÉqÅ",er.BASELINE_SYMBOL="M",er.BASELINE_MULTIPLIER=1.4,er.HEIGHT_MULTIPLIER=2,er.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),er.experimentalLetterSpacing=!1,er._fonts={},er._newlines=[10,13],er._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Vr=er;const dI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Av=class qs{constructor(e){this.styleID=0,this.reset(),iu(this,e,e)}clone(){const e={};return iu(e,this,qs.defaultStyle),new qs(e)}reset(){iu(this,qs.defaultStyle,qs.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=ru(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=ru(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){fI(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=ru(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!dI.includes(s)&&(s=`"${s}"`),t[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};Av.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Xa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let oi=Av;function ru(r){const e=Ee.shared,t=i=>{const s=e.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function fI(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function iu(r,e,t){for(const i in t)Array.isArray(e[i])?r[i]=e[i].slice():r[i]=e[i]}const pI={texture:!0,children:!1,baseTexture:!0},Sv=class bc extends Os{constructor(e,t,i){let s=!1;i||(i=z.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=q.from(i);n.orig=new ue,n.trim=new ue,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=bc.defaultResolution??z.RESOLUTION,this._autoResolution=bc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Vr.experimentalLetterSpacing}static set experimentalLetterSpacing(e){pe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Vr.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,s=Vr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,o=s.height,a=s.lines,l=s.lineHeight,u=s.lineWidths,c=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let h,f;const p=t.dropShadow?2:1;for(let m=0;m<p;++m){const g=t.dropShadow&&m===0,v=g?Math.ceil(Math.max(1,o)+t.padding*2):0,_=v*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const b=t.dropShadowColor,w=t.dropShadowBlur*this._resolution,S=t.dropShadowDistance*this._resolution;i.shadowColor=Ee.shared.setValue(b).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=w,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*S,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*S+_}else i.fillStyle=this._generateFillStyle(t,a,s),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let y=(l-d.fontSize)/2;l-d.fontSize<0&&(y=0);for(let b=0;b<a.length;b++)h=t.strokeThickness/2,f=t.strokeThickness/2+b*l+d.ascent+y,t.align==="right"?h+=c-u[b]:t.align==="center"&&(h+=(c-u[b])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[b],h+t.padding,f+t.padding-v,!0),t.fill&&this.drawLetterSpacing(a[b],h+t.padding,f+t.padding-v)}this.updateTexture()}drawLetterSpacing(e,t,i,s=!1){const n=this._style.letterSpacing;let o=!1;if(Vr.experimentalLetterSpacingSupported&&(Vr.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){s?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=Vr.graphemeSegmenter(e);let u=this.context.measureText(e).width,c=0;for(let d=0;d<l.length;++d){const h=l[d];s?this.context.strokeText(h,a,i):this.context.fillText(h,a,i);let f="";for(let p=d+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=u-c+n,u=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=DC(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,i=this._style,s=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,c=s.slice(),d=e.fillGradientStops.slice();if(!d.length){const h=c.length+1;for(let f=1;f<h;++f)d.push(f/h)}if(c.unshift(s[0]),d.unshift(0),c.push(s[s.length-1]),d.push(1),e.fillGradientType===Xa.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,a,l/2,u+a);const h=i.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const p=i.lineHeight*(f-1)+h,m=i.lineHeight*f;let g=m;f>0&&p>m&&(g=(m+p)/2);const v=m+h,_=i.lineHeight*(f+1);let y=v;f+1<t.length&&_<v&&(y=(v+_)/2);const b=(y-g)/u;for(let w=0;w<c.length;w++){let S=0;typeof d[w]=="number"?S=d[w]:S=w/c.length;let x=Math.min(1,Math.max(0,g/u+S*b));x=Number(x.toFixed(5)),n.addColorStop(x,c[w])}}}else{n=this.context.createLinearGradient(a,u/2,l+a,u/2);const h=c.length+1;let f=1;for(let p=0;p<c.length;p++){let m;typeof d[p]=="number"?m=d[p]:m=f/h,n.addColorStop(m,c[p]),f++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},pI,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=qr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=qr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof oi?this._style=e:this._style=new oi(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Sv.defaultAutoResolution=!0;let Ev=Sv;class mI{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function gI(r,e){var i;let t=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof q){const n=r._textures[s].baseTexture;e.includes(n)||(e.push(n),t=!0)}}return t}function yI(r,e){if(r.baseTexture instanceof le){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function vI(r,e){if(r._texture&&r._texture instanceof q){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function _I(r,e){return e instanceof Ev?(e.updateText(!0),!0):!1}function bI(r,e){if(e instanceof oi){const t=e.toFontString();return Vr.measureFont(t),!0}return!1}function xI(r,e){if(r instanceof Ev){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function wI(r,e){return r instanceof oi?(e.includes(r)||e.push(r),!0):!1}const Cv=class Pv{constructor(e){this.limiter=new mI(Pv.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(xI),this.registerFindHook(wI),this.registerFindHook(gI),this.registerFindHook(yI),this.registerFindHook(vI),this.registerUploadHook(_I),this.registerUploadHook(bI)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,yt.system.addOnce(this.tick,this,Fi.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)yt.system.addOnce(this.tick,this,Fi.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Xt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&yt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Cv.uploadsPerFrame=4;let xc=Cv;Object.defineProperties(z,{UPLOADS_PER_FRAME:{get(){return xc.uploadsPerFrame},set(r){pe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),xc.uploadsPerFrame=r}}});function Rv(r,e){return e instanceof le?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function TI(r,e){if(!(e instanceof bv))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:i}=t;for(let s=0;s<i.length;s++){const{texture:n}=i[s].style;n&&Rv(r,n.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function AI(r,e){return r instanceof bv?(e.push(r),!0):!1}class Iv extends xc{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(AI),this.registerUploadHook(Rv),this.registerUploadHook(TI)}}Iv.extension={name:"prepare",type:H.RendererSystem};K.add(Iv);var SI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,EI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,CI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,op=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,PI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const wo=new Ce;class Mv extends ja{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Oy,this.state=vr.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=hr.from(op,PI,t),this.shader=e.context.webGLVersion>1?hr.from(EI,SI,t):hr.from(op,CI,t)}render(e){const t=this.renderer,i=this.quad;let s=i.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const n=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-o,s[2]=s[4]=1-n,s[5]=s[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,d=e.uvMatrix;let h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[t.CONTEXT_UID]?h=l.wrapMode!==Qr.CLAMP:l.wrapMode===Qr.CLAMP&&(l.wrapMode=Qr.REPEAT));const f=h?this.simpleShader:this.shader,p=a.width,m=a.height,g=e._width,v=e._height;wo.set(c.a*p/g,c.b*p/v,c.c*m/g,c.d*m/v,c.tx/g,c.ty/v),wo.invert(),h?wo.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=wo.toArray(!0),f.uniforms.uColor=Ee.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(i),this.state.blendMode=by(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Mv.extension={name:"tilingSprite",type:H.RendererPlugin};K.add(Mv);const kv=class Ks{constructor(e,t,i){this.linkedSheets=[],(e instanceof le||e instanceof q)&&(e={texture:e,data:t,resolutionFilename:i});const{texture:s,data:n,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=s instanceof q?s:null,this.baseTexture=s instanceof le?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=Br(e,null);return i===null&&(i=typeof t=="number"?t:parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ks.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Ks.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],o=n.frame;if(o){let a=null,l=null;const u=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new ue(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n.rotated?a=new ue(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new ue(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new ue(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new q(this.baseTexture,a,c,l,n.rotated?2:0,n.anchor,n.borders),q.addToCache(this.textures[s],this.cachePrefix+s.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ks.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ks.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};kv.BATCH_SIZE=1e3;let ap=kv;const RI=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Dv(r,e,t){const i={};if(r.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[`${e.cachePrefix}${s}`]=e.textures[s]}),!t){const s=Ye.dirname(r[0]);e.linkedSheets.forEach((n,o)=>{Object.assign(i,Dv([`${s}/${e.data.meta.related_multi_packs[o]}`],n,!0))})}return i}const II={extension:H.Asset,cache:{test:r=>r instanceof ap,getCacheableAssets:(r,e)=>Dv(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&RI.includes(i)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=z.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:H.LoadParser,priority:qt.Normal},async testParse(r,e){return Ye.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var c,d;const{texture:i,imageFilename:s,cachePrefix:n}=(e==null?void 0:e.data)??{};let o=Ye.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const h=gc(o+(s??r.meta.image),e.src);a=(await t.load([h]))[h]}const l=new ap({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:n});await l.parse();const u=(c=r==null?void 0:r.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(u)){const h=[];for(const p of u){if(typeof p!="string")continue;let m=o+p;(d=e.data)!=null&&d.ignoreMultiPack||(m=gc(m,e.src),h.push(t.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(h);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(m=>m!==p))})}return l},unload(r){r.destroy(!0)}}};K.add(II);class ma{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Go{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in t){const o=t[n].match(/^[a-z]+/gm)[0],a=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const c=a[u].split("="),d=c[0],h=c[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[d]=p}i[o].push(l)}const s=new ma;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}class wc{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new ma,i=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),n=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)t.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<s.length;u++)t.common.push({lineHeight:parseInt(s[u].getAttribute("lineHeight"),10)});for(let u=0;u<n.length;u++)t.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(let u=0;u<o.length;u++){const c=o[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class Tc{static test(e){return typeof e=="string"&&e.includes("<font>")?wc.test(z.ADAPTER.parseXML(e)):!1}static parse(e){return wc.parse(z.ADAPTER.parseXML(e))}}const su=[Go,wc,Tc];function MI(r){for(let e=0;e<su.length;e++)if(su[e].test(r))return su[e];return null}function kI(r,e,t,i,s,n){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=r.width/i-l-u*2,d=r.height/i-l-u*2,h=o.slice(),f=t.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),t.fillGradientType===Xa.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,d+u);let p=0;const m=(n.fontProperties.fontSize+t.strokeThickness)/d;for(let g=0;g<s.length;g++){const v=n.lineHeight*g;for(let _=0;_<h.length;_++){let y=0;typeof f[_]=="number"?y=f[_]:y=_/h.length;const b=v/d+y*m;let w=Math.max(p,b);w=Math.min(w,1),a.addColorStop(w,h[_]),p=w}}}else{a=e.createLinearGradient(u,d/2,c+u,d/2);const p=h.length+1;let m=1;for(let g=0;g<h.length;g++){let v;typeof f[g]=="number"?v=f[g]:v=m/p,a.addColorStop(v,h[g]),m++}}return a}function DI(r,e,t,i,s,n,o){const a=t.text,l=t.fontProperties;e.translate(i,s),e.scale(n,n);const u=o.strokeThickness/2,c=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=kI(r,e,o,n,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,h=o.dropShadowBlur*n,f=o.dropShadowDistance*n;e.shadowColor=Ee.shared.setValue(d).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,c+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function zo(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function Ov(r){return Array.from?Array.from(r):r.split("")}function OI(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,i=r.length;t<i;t++){const s=r[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const n=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...Ov(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Ur=class tr{constructor(e,t,i){var c;const[s]=e.info,[n]=e.common,[o]=e.page,[a]=e.distanceField,l=Br(o.file),u={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=u;for(let d=0;d<e.page.length;d++){const{id:h,file:f}=e.page[d];u[h]=t instanceof Array?t[d]:t[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[h].baseTexture.alphaMode=ht.NO_PREMULTIPLIED_ALPHA,u[h].baseTexture.mipmap=mr.OFF)}for(let d=0;d<e.char.length;d++){const{id:h,page:f}=e.char[d];let{x:p,y:m,width:g,height:v,xoffset:_,yoffset:y,xadvance:b}=e.char[d];p/=l,m/=l,g/=l,v/=l,_/=l,y/=l,b/=l;const w=new ue(p+u[f].frame.x/l,m+u[f].frame.y/l,g,v);this.chars[h]={xOffset:_,yOffset:y,xAdvance:b,kerning:{},texture:new q(u[f].baseTexture,w),page:f}}for(let d=0;d<e.kerning.length;d++){let{first:h,second:f,amount:p}=e.kerning[d];h/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[h]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((c=a==null?void 0:a.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let s;if(e instanceof ma)s=e;else{const o=MI(e);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(e)}t instanceof q&&(t=[t]);const n=new tr(s,t,i);return tr.available[n.font]=n,n}static uninstall(e){const t=tr.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete tr.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},tr.defaultOptions,i),c=OI(s),d=t instanceof oi?t:new oi(t),h=a,f=new ma;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p=0,m=0,g,v,_,y=0;const b=[];for(let S=0;S<c.length;S++){g||(g=z.ADAPTER.createCanvas(),g.width=a,g.height=l,v=g.getContext("2d"),_=new le(g,{resolution:o,...u}),b.push(new q(_)),f.page.push({id:b.length-1,file:""}));const x=c[S],A=Vr.measureText(x,d,!1,g),C=A.width,E=Math.ceil(A.height),D=Math.ceil((d.fontStyle==="italic"?2:1)*C);if(m>=l-E*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${x}')`);--S,g=null,v=null,_=null,m=0,p=0,y=0;continue}if(y=Math.max(E+A.fontProperties.descent,y),D*o+p>=h){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${x}')`);--S,m+=y*o,m=Math.ceil(m),p=0,y=0;continue}DI(g,v,A,p,m,o,d);const M=zo(A.text);f.char.push({id:M,page:b.length-1,x:p/o,y:m/o,width:D,height:E,xoffset:0,yoffset:0,xadvance:C-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),p+=(D+2*n)*o,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let S=0,x=c.length;S<x;S++){const A=c[S];for(let C=0;C<x;C++){const E=c[C],D=v.measureText(A).width,M=v.measureText(E).width,T=v.measureText(A+E).width-(D+M);T&&f.kerning.push({first:zo(A),second:zo(E),amount:T})}}const w=new tr(f,b,!0);return tr.available[e]!==void 0&&tr.uninstall(e),tr.available[e]=w,w}};Ur.ALPHA=[["a","z"],["A","Z"]," "],Ur.NUMERIC=[["0","9"]],Ur.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Ur.ASCII=[[" ","~"]],Ur.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ur.ALPHANUMERIC},Ur.available={};let Hr=Ur;var LI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,BI=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const lp=[],up=[],cp=[],FI=class Lv extends Xt{constructor(e,t={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},Lv.styleDefaults,t);if(!Hr.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Ee(s),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Cr(()=>{this.dirty=!0},this,0,0),this._roundPixels=z.ROUND_PIXELS,this.dirty=!0,this._resolution=z.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var D;const e=Hr.available[this._fontName],t=this.fontSize,i=t/e.size,s=new ye,n=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=Ov(l),c=this._maxWidth*e.size/t,d=e.distanceFieldType==="none"?lp:up;let h=null,f=0,p=0,m=0,g=-1,v=0,_=0,y=0,b=0;for(let M=0;M<u.length;M++){const T=u[M],P=zo(T);if(/(?:\s)/.test(T)&&(g=M,v=f,b++),T==="\r"||T===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++_,s.x=0,s.y+=e.lineHeight,h=null,b=0;continue}const L=e.chars[P];if(!L)continue;h&&L.kerning[h]&&(s.x+=L.kerning[h]);const j=cp.pop()||{texture:q.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ye};j.texture=L.texture,j.line=m,j.charCode=P,j.position.x=Math.round(s.x+L.xOffset+this._letterSpacing/2),j.position.y=Math.round(s.y+L.yOffset),j.prevSpaces=b,n.push(j),f=j.position.x+Math.max(L.xAdvance-L.xOffset,L.texture.orig.width),s.x+=L.xAdvance+this._letterSpacing,y=Math.max(y,L.yOffset+L.texture.height),h=P,g!==-1&&c>0&&s.x>c&&(++_,gs(n,1+g-_,1+M-g),M=g,g=-1,o.push(v),a.push(n.length>0?n[n.length-1].prevSpaces:0),p=Math.max(p,v),m++,s.x=0,s.y+=e.lineHeight,h=null,b=0)}const w=u[u.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(f=v),o.push(f),p=Math.max(p,f),a.push(-1));const S=[];for(let M=0;M<=m;M++){let T=0;this._align==="right"?T=p-o[M]:this._align==="center"?T=(p-o[M])/2:this._align==="justify"&&(T=a[M]<0?0:(p-o[M])/a[M]),S.push(T)}const x=n.length,A={},C=[],E=this._activePagesMeshData;d.push(...E);for(let M=0;M<x;M++){const T=n[M].texture,P=T.baseTexture.uid;if(!A[P]){let L=d.pop();if(!L){const $=new aI;let W,ne;e.distanceFieldType==="none"?(W=new sp(q.EMPTY),ne=re.NORMAL):(W=new sp(q.EMPTY,{program:Pr.from(BI,LI),uniforms:{uFWidth:0}}),ne=re.NORMAL_NPM);const O=new ip($,W);O.blendMode=ne,L={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:O,vertices:null,uvs:null,indices:null}}L.index=0,L.indexCount=0,L.vertexCount=0,L.uvsCount=0,L.total=0;const{_textureCache:j}=this;j[P]=j[P]||new q(T.baseTexture),L.mesh.texture=j[P],L.mesh.tint=this._tintColor.value,C.push(L),A[P]=L}A[P].total++}for(let M=0;M<E.length;M++)C.includes(E[M])||this.removeChild(E[M].mesh);for(let M=0;M<C.length;M++)C[M].mesh.parent!==this&&this.addChild(C[M].mesh);this._activePagesMeshData=C;for(const M in A){const T=A[M],P=T.total;if(!(((D=T.indices)==null?void 0:D.length)>6*P)||T.vertices.length<ip.BATCHABLE_SIZE*2)T.vertices=new Float32Array(4*2*P),T.uvs=new Float32Array(4*2*P),T.indices=new Uint16Array(6*P);else{const L=T.total,j=T.vertices;for(let $=L*4*2;$<j.length;$++)j[$]=0}T.mesh.size=6*P}for(let M=0;M<x;M++){const T=n[M];let P=T.position.x+S[T.line]*(this._align==="justify"?T.prevSpaces:1);this._roundPixels&&(P=Math.round(P));const L=P*i,j=T.position.y*i,$=T.texture,W=A[$.baseTexture.uid],ne=$.frame,O=$._uvs,B=W.index++;W.indices[B*6+0]=0+B*4,W.indices[B*6+1]=1+B*4,W.indices[B*6+2]=2+B*4,W.indices[B*6+3]=0+B*4,W.indices[B*6+4]=2+B*4,W.indices[B*6+5]=3+B*4,W.vertices[B*8+0]=L,W.vertices[B*8+1]=j,W.vertices[B*8+2]=L+ne.width*i,W.vertices[B*8+3]=j,W.vertices[B*8+4]=L+ne.width*i,W.vertices[B*8+5]=j+ne.height*i,W.vertices[B*8+6]=L,W.vertices[B*8+7]=j+ne.height*i,W.uvs[B*8+0]=O.x0,W.uvs[B*8+1]=O.y0,W.uvs[B*8+2]=O.x1,W.uvs[B*8+3]=O.y1,W.uvs[B*8+4]=O.x2,W.uvs[B*8+5]=O.y2,W.uvs[B*8+6]=O.x3,W.uvs[B*8+7]=O.y3}this._textWidth=p*i,this._textHeight=(s.y+e.lineHeight)*i;for(const M in A){const T=A[M];if(this.anchor.x!==0||this.anchor.y!==0){let $=0;const W=this._textWidth*this.anchor.x,ne=this._textHeight*this.anchor.y;for(let O=0;O<T.total;O++)T.vertices[$++]-=W,T.vertices[$++]-=ne,T.vertices[$++]-=W,T.vertices[$++]-=ne,T.vertices[$++]-=W,T.vertices[$++]-=ne,T.vertices[$++]-=W,T.vertices[$++]-=ne}this._maxLineHeight=y*i;const P=T.mesh.geometry.getBuffer("aVertexPosition"),L=T.mesh.geometry.getBuffer("aTextureCoord"),j=T.mesh.geometry.getIndex();P.data=T.vertices,L.data=T.uvs,j.data=T.indices,P.update(),L.update(),j.update()}for(let M=0;M<n.length;M++)cp.push(n[M]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:s}=Hr.available[this._fontName];if(i!=="none"){const{a:n,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(n*n+o*o),c=Math.sqrt(a*a+l*l),d=(Math.abs(u)+Math.abs(c))/2,h=this.fontSize/s,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=d*t*h*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Hr.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Hr.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Hr.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,i=Hr.available[this._fontName].distanceFieldType==="none"?lp:up;i.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=q.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};FI.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const NI=[".xml",".fnt"],$I={extension:{type:H.LoadParser,priority:qt.Normal},name:"loadBitmapFont",test(r){return NI.includes(Ye.extname(r).toLowerCase())},async testParse(r){return Go.test(r)||Tc.test(r)},async parse(r,e,t){const i=Go.test(r)?Go.parse(r):Tc.parse(r),{src:s}=e,{page:n}=i,o=[];for(let u=0;u<n.length;++u){const c=n[u].file;let d=Ye.join(Ye.dirname(s),c);d=gc(d,s),o.push(d)}const a=await t.load(o),l=o.map(u=>a[u]);return Hr.install(i,l,!0)},async load(r,e){return(await z.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};K.add($I);const Ac=class os extends oi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new os(Object.keys(os.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete os.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=os;if(i[e]){const s=i[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return z.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((n,o)=>{const a=URL.createObjectURL(s),l=new FileReader;l.onload=()=>n([a,l.result]),l.onerror=o,l.readAsDataURL(s)})).then(async([s,n])=>{const o=Object.assign({family:Ye.basename(e,Ye.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=CC(e)),typeof e=="number"?EC(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,os.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=z.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Ac.availableFonts={},Ac.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let nu=Ac;const To=class as extends Os{constructor(e="",t={}){super(q.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,s=q.from(i,{scaleMode:z.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new ue,s.trim=new ue,this.texture=s;const n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),u=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=as.defaultMaxWidth,this.maxHeight=as.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=as.defaultAutoResolution,this._resolution=as.defaultResolution??z.RESOLUTION,this.text=e,this.style=t}measureText(e){var c,d;const{text:t,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=n;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(s)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:o}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{s.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:s}=this,{padding:n}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=i.width/s,t.trim.height=t._frame.height=i.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,s,n,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},as.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=qr(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=qr(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof nu?(this.ownsStyle=!1,this._style=e):e instanceof oi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=nu.from(e)):(this.ownsStyle=!0,this._style=new nu(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};To.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},To.defaultMaxWidth=2024,To.defaultMaxHeight=2024,To.defaultAutoResolution=!0;const UI=ee({__name:"App",setup(r){const{switchCharacter:e,switchSkin:t,captureFrame:i,toggleLive2DVisibility:s,isLive2DHide:n}=NT();return xe(n,o=>(o?UT:$T)()),(o,a)=>(R(),N(Be,null,[a[4]||(a[4]=k("div",{id:"live2d"},[k("div",{id:"live2d-tips"}),k("canvas",{id:"live2d-canvas"})],-1)),k("div",{id:"live2d-tools",class:we(I(n)?"hide":"show")},[k("span",{id:"live2d-tool-quit",class:"live2d-tool hide-live2d",onClick:a[0]||(a[0]=l=>I(s)())},de(I(n)?"Show":"Hide"),1),k("span",{id:"live2d-tool-switch-model",class:"live2d-tool",style:{"--live2d-tool-bg":"#c3a6cb"},onClick:a[1]||(a[1]=l=>I(e)())}," Tia "),k("span",{id:"live2d-tool-switch-texture",class:"live2d-tool",style:{"--live2d-tool-bg":"#16a"},onClick:a[2]||(a[2]=l=>I(t)())}," Switch "),k("span",{id:"live2d-tool-photo",class:"live2d-tool",style:{"--live2d-tool-bg":"orange"},onClick:a[3]||(a[3]=l=>I(i)())}," Save ")],2)],64))}}),HI=li(UI,[["__scopeId","data-v-09c8249c"]]),GI=[{component:HI,props:{}}],zI=ee({__name:"ValaxyAddons",setup(r){return(e,t)=>(R(!0),N(Be,null,Ui(I(GI),({component:i,props:s},n)=>(R(),ae(f_(i),pn({ref_for:!0},s,{key:n}),null,16))),128))}}),jI={class:"progress-circle-container",viewBox:"0 0 100 100"},VI=["stroke-dasharray","stroke-dashoffset"],hp=48,WI=ee({__name:"YunBackToTop",setup(r){const{show:e,percentage:t,backToTop:i}=Xw({offset:100}),s=2*hp*Math.PI,n=U(()=>{const o=(1-t.value)*s;return o<0?0:o});return(o,a)=>(R(),N("a",{href:"#",class:we(["back-to-top yun-icon-btn bg-$va-c-bg-soft shadow-md",I(e)&&"show"]),onClick:a[0]||(a[0]=(...l)=>I(i)&&I(i)(...l))},[a[1]||(a[1]=k("div",{class:"size-8","i-ri-arrow-up-s-line":""},null,-1)),(R(),N("svg",jI,[k("circle",{"stroke-dasharray":`${s} ${s}`,"stroke-dashoffset":n.value,stroke:"currentColor","stroke-width":"2","stroke-linecap":"round",class:"progress-circle",cx:"50",cy:"50",r:hp,fill:"none"},null,8,VI)]))],2))}}),XI={},YI={class:"yun-page-loading",absolute:"","left-0":"","right-0":"","bottom-0":"","top-0":"",flex:"",justify:"center","items-center":"","z-10":"",bg:"$va-c-bg"};function qI(r,e){return R(),N("div",YI,e[0]||(e[0]=[k("div",{class:"spinner"},null,-1)]))}const KI=li(XI,[["render",qI],["__scopeId","data-v-673bc094"]]),ZI={class:"yun-bg"},JI=ee({__name:"YunBg",setup(r){const e=Or(),t=ci();if(typeof t.value.bg_image.url<"u"){const i=xu("--yun-bg-img-opacity");t.value.bg_image.opacity&&(i.value=t.value.bg_image.opacity.toString()||"1");const s=U(()=>e.isDark?t.value.bg_image.dark:t.value.bg_image.url),n=xu("--yun-bg-img");xe(()=>s.value,()=>{n.value=`url('${s.value}')`},{immediate:!0})}return(i,s)=>(R(),N("div",ZI))}});var Bv={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Rh={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},QI=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ga={CSS:{},springs:{}};function lr(r,e,t){return Math.min(Math.max(r,e),t)}function nn(r,e){return r.indexOf(e)>-1}function ou(r,e){return r.apply(null,e)}var te={arr:function(r){return Array.isArray(r)},obj:function(r){return nn(Object.prototype.toString.call(r),"Object")},pth:function(r){return te.obj(r)&&r.hasOwnProperty("totalLength")},svg:function(r){return r instanceof SVGElement},inp:function(r){return r instanceof HTMLInputElement},dom:function(r){return r.nodeType||te.svg(r)},str:function(r){return typeof r=="string"},fnc:function(r){return typeof r=="function"},und:function(r){return typeof r>"u"},nil:function(r){return te.und(r)||r===null},hex:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)},rgb:function(r){return/^rgb/.test(r)},hsl:function(r){return/^hsl/.test(r)},col:function(r){return te.hex(r)||te.rgb(r)||te.hsl(r)},key:function(r){return!Bv.hasOwnProperty(r)&&!Rh.hasOwnProperty(r)&&r!=="targets"&&r!=="keyframes"}};function Fv(r){var e=/\(([^)]+)\)/.exec(r);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function Nv(r,e){var t=Fv(r),i=lr(te.und(t[0])?1:t[0],.1,100),s=lr(te.und(t[1])?100:t[1],.1,100),n=lr(te.und(t[2])?10:t[2],.1,100),o=lr(te.und(t[3])?0:t[3],.1,100),a=Math.sqrt(s/i),l=n/(2*Math.sqrt(s*i)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*a+-o)/u:-o+a;function h(p){var m=e?e*p/1e3:p;return l<1?m=Math.exp(-m*l*a)*(c*Math.cos(u*m)+d*Math.sin(u*m)):m=(c+d*m)*Math.exp(-m*a),p===0||p===1?p:1-m}function f(){var p=ga.springs[r];if(p)return p;for(var m=1/6,g=0,v=0;;)if(g+=m,h(g)===1){if(v++,v>=16)break}else v=0;var _=g*m*1e3;return ga.springs[r]=_,_}return e?h:f}function eM(r){return r===void 0&&(r=10),function(e){return Math.ceil(lr(e,1e-6,1)*r)*(1/r)}}var tM=function(){var r=11,e=1/(r-1);function t(c,d){return 1-3*d+3*c}function i(c,d){return 3*d-6*c}function s(c){return 3*c}function n(c,d,h){return((t(d,h)*c+i(d,h))*c+s(d))*c}function o(c,d,h){return 3*t(d,h)*c*c+2*i(d,h)*c+s(d)}function a(c,d,h,f,p){var m,g,v=0;do g=d+(h-d)/2,m=n(g,f,p)-c,m>0?h=g:d=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(c,d,h,f){for(var p=0;p<4;++p){var m=o(d,h,f);if(m===0)return d;var g=n(d,h,f)-c;d-=g/m}return d}function u(c,d,h,f){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var p=new Float32Array(r);if(c!==d||h!==f)for(var m=0;m<r;++m)p[m]=n(m*e,c,h);function g(v){for(var _=0,y=1,b=r-1;y!==b&&p[y]<=v;++y)_+=e;--y;var w=(v-p[y])/(p[y+1]-p[y]),S=_+w*e,x=o(S,c,h);return x>=.001?l(v,S,c,h):x===0?S:a(v,_,_+e,c,h)}return function(v){return c===d&&h===f||v===0||v===1?v:n(g(v),d,f)}}return u}(),$v=function(){var r={linear:function(){return function(i){return i}}},e={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var s,n=4;i<((s=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((s*3-2)/22-i,2)}},Elastic:function(i,s){i===void 0&&(i=1),s===void 0&&(s=.5);var n=lr(i,1,10),o=lr(s,.1,2);return function(a){return a===0||a===1?a:-n*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/o)}}},t=["Quad","Cubic","Quart","Quint"];return t.forEach(function(i,s){e[i]=function(){return function(n){return Math.pow(n,s+2)}}}),Object.keys(e).forEach(function(i){var s=e[i];r["easeIn"+i]=s,r["easeOut"+i]=function(n,o){return function(a){return 1-s(n,o)(1-a)}},r["easeInOut"+i]=function(n,o){return function(a){return a<.5?s(n,o)(a*2)/2:1-s(n,o)(a*-2+2)/2}},r["easeOutIn"+i]=function(n,o){return function(a){return a<.5?(1-s(n,o)(1-a*2))/2:(s(n,o)(a*2-1)+1)/2}}}),r}();function Ih(r,e){if(te.fnc(r))return r;var t=r.split("(")[0],i=$v[t],s=Fv(r);switch(t){case"spring":return Nv(r,e);case"cubicBezier":return ou(tM,s);case"steps":return ou(eM,s);default:return ou(i,s)}}function Uv(r){try{var e=document.querySelectorAll(r);return e}catch{return}}function Ya(r,e){for(var t=r.length,i=arguments.length>=2?arguments[1]:void 0,s=[],n=0;n<t;n++)if(n in r){var o=r[n];e.call(i,o,n,r)&&s.push(o)}return s}function qa(r){return r.reduce(function(e,t){return e.concat(te.arr(t)?qa(t):t)},[])}function dp(r){return te.arr(r)?r:(te.str(r)&&(r=Uv(r)||r),r instanceof NodeList||r instanceof HTMLCollection?[].slice.call(r):[r])}function Mh(r,e){return r.some(function(t){return t===e})}function kh(r){var e={};for(var t in r)e[t]=r[t];return e}function Sc(r,e){var t=kh(r);for(var i in r)t[i]=e.hasOwnProperty(i)?e[i]:r[i];return t}function Ka(r,e){var t=kh(r);for(var i in e)t[i]=te.und(r[i])?e[i]:r[i];return t}function rM(r){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(r);return e?"rgba("+e[1]+",1)":r}function iM(r){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=r.replace(e,function(a,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),s=parseInt(i[1],16),n=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+s+","+n+","+o+",1)"}function sM(r){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(r),t=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,s=parseInt(e[3],10)/100,n=e[4]||1;function o(h,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(f-h)*6*p:p<1/2?f:p<2/3?h+(f-h)*(2/3-p)*6:h}var a,l,u;if(i==0)a=l=u=s;else{var c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;a=o(d,c,t+1/3),l=o(d,c,t),u=o(d,c,t-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+n+")"}function nM(r){if(te.rgb(r))return rM(r);if(te.hex(r))return iM(r);if(te.hsl(r))return sM(r)}function Ir(r){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(r);if(e)return e[1]}function oM(r){if(nn(r,"translate")||r==="perspective")return"px";if(nn(r,"rotate")||nn(r,"skew"))return"deg"}function Ec(r,e){return te.fnc(r)?r(e.target,e.id,e.total):r}function ur(r,e){return r.getAttribute(e)}function Dh(r,e,t){var i=Ir(e);if(Mh([t,"deg","rad","turn"],i))return e;var s=ga.CSS[e+t];if(!te.und(s))return s;var n=100,o=document.createElement(r.tagName),a=r.parentNode&&r.parentNode!==document?r.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=n+t;var l=n/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(e);return ga.CSS[e+t]=u,u}function Hv(r,e,t){if(e in r.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=r.style[e]||getComputedStyle(r).getPropertyValue(i)||"0";return t?Dh(r,s,t):s}}function Oh(r,e){if(te.dom(r)&&!te.inp(r)&&(!te.nil(ur(r,e))||te.svg(r)&&r[e]))return"attribute";if(te.dom(r)&&Mh(QI,e))return"transform";if(te.dom(r)&&e!=="transform"&&Hv(r,e))return"css";if(r[e]!=null)return"object"}function Gv(r){if(te.dom(r)){for(var e=r.style.transform||"",t=/(\w+)\(([^)]*)\)/g,i=new Map,s;s=t.exec(e);)i.set(s[1],s[2]);return i}}function aM(r,e,t,i){var s=nn(e,"scale")?1:0+oM(e),n=Gv(r).get(e)||s;return t&&(t.transforms.list.set(e,n),t.transforms.last=e),i?Dh(r,n,i):n}function Lh(r,e,t,i){switch(Oh(r,e)){case"transform":return aM(r,e,i,t);case"css":return Hv(r,e,t);case"attribute":return ur(r,e);default:return r[e]||0}}function Bh(r,e){var t=/^(\*=|\+=|-=)/.exec(r);if(!t)return r;var i=Ir(r)||0,s=parseFloat(e),n=parseFloat(r.replace(t[0],""));switch(t[0][0]){case"+":return s+n+i;case"-":return s-n+i;case"*":return s*n+i}}function zv(r,e){if(te.col(r))return nM(r);if(/\s/g.test(r))return r;var t=Ir(r),i=t?r.substr(0,r.length-t.length):r;return e?i+e:i}function Fh(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function lM(r){return Math.PI*2*ur(r,"r")}function uM(r){return ur(r,"width")*2+ur(r,"height")*2}function cM(r){return Fh({x:ur(r,"x1"),y:ur(r,"y1")},{x:ur(r,"x2"),y:ur(r,"y2")})}function jv(r){for(var e=r.points,t=0,i,s=0;s<e.numberOfItems;s++){var n=e.getItem(s);s>0&&(t+=Fh(i,n)),i=n}return t}function hM(r){var e=r.points;return jv(r)+Fh(e.getItem(e.numberOfItems-1),e.getItem(0))}function Vv(r){if(r.getTotalLength)return r.getTotalLength();switch(r.tagName.toLowerCase()){case"circle":return lM(r);case"rect":return uM(r);case"line":return cM(r);case"polyline":return jv(r);case"polygon":return hM(r)}}function dM(r){var e=Vv(r);return r.setAttribute("stroke-dasharray",e),e}function fM(r){for(var e=r.parentNode;te.svg(e)&&te.svg(e.parentNode);)e=e.parentNode;return e}function Wv(r,e){var t=e||{},i=t.el||fM(r),s=i.getBoundingClientRect(),n=ur(i,"viewBox"),o=s.width,a=s.height,l=t.viewBox||(n?n.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function pM(r,e){var t=te.str(r)?Uv(r)[0]:r,i=e||100;return function(s){return{property:s,el:t,svg:Wv(t),totalLength:Vv(t)*(i/100)}}}function mM(r,e,t){function i(c){c===void 0&&(c=0);var d=e+c>=1?e+c:0;return r.el.getPointAtLength(d)}var s=Wv(r.el,r.svg),n=i(),o=i(-1),a=i(1),l=t?1:s.w/s.vW,u=t?1:s.h/s.vH;switch(r.property){case"x":return(n.x-s.x)*l;case"y":return(n.y-s.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function fp(r,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=zv(te.pth(r)?r.totalLength:r,e)+"";return{original:i,numbers:i.match(t)?i.match(t).map(Number):[0],strings:te.str(r)||e?i.split(t):[]}}function Nh(r){var e=r?qa(te.arr(r)?r.map(dp):dp(r)):[];return Ya(e,function(t,i,s){return s.indexOf(t)===i})}function Xv(r){var e=Nh(r);return e.map(function(t,i){return{target:t,id:i,total:e.length,transforms:{list:Gv(t)}}})}function gM(r,e){var t=kh(e);if(/^spring/.test(t.easing)&&(t.duration=Nv(t.easing)),te.arr(r)){var i=r.length,s=i===2&&!te.obj(r[0]);s?r={value:r}:te.fnc(e.duration)||(t.duration=e.duration/i)}var n=te.arr(r)?r:[r];return n.map(function(o,a){var l=te.obj(o)&&!te.pth(o)?o:{value:o};return te.und(l.delay)&&(l.delay=a?0:e.delay),te.und(l.endDelay)&&(l.endDelay=a===n.length-1?e.endDelay:0),l}).map(function(o){return Ka(o,t)})}function yM(r){for(var e=Ya(qa(r.map(function(n){return Object.keys(n)})),function(n){return te.key(n)}).reduce(function(n,o){return n.indexOf(o)<0&&n.push(o),n},[]),t={},i=function(n){var o=e[n];t[o]=r.map(function(a){var l={};for(var u in a)te.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},s=0;s<e.length;s++)i(s);return t}function vM(r,e){var t=[],i=e.keyframes;i&&(e=Ka(yM(i),e));for(var s in e)te.key(s)&&t.push({name:s,tweens:gM(e[s],r)});return t}function _M(r,e){var t={};for(var i in r){var s=Ec(r[i],e);te.arr(s)&&(s=s.map(function(n){return Ec(n,e)}),s.length===1&&(s=s[0])),t[i]=s}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function bM(r,e){var t;return r.tweens.map(function(i){var s=_M(i,e),n=s.value,o=te.arr(n)?n[1]:n,a=Ir(o),l=Lh(e.target,r.name,a,e),u=t?t.to.original:l,c=te.arr(n)?n[0]:u,d=Ir(c)||Ir(l),h=a||d;return te.und(o)&&(o=u),s.from=fp(c,h),s.to=fp(Bh(o,c),h),s.start=t?t.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=Ih(s.easing,s.duration),s.isPath=te.pth(n),s.isPathTargetInsideSVG=s.isPath&&te.svg(e.target),s.isColor=te.col(s.from.original),s.isColor&&(s.round=1),t=s,s})}var Yv={css:function(r,e,t){return r.style[e]=t},attribute:function(r,e,t){return r.setAttribute(e,t)},object:function(r,e,t){return r[e]=t},transform:function(r,e,t,i,s){if(i.list.set(e,t),e===i.last||s){var n="";i.list.forEach(function(o,a){n+=a+"("+o+") "}),r.style.transform=n}}};function qv(r,e){var t=Xv(r);t.forEach(function(i){for(var s in e){var n=Ec(e[s],i),o=i.target,a=Ir(n),l=Lh(o,s,a,i),u=a||Ir(l),c=Bh(zv(n,u),l),d=Oh(o,s);Yv[d](o,s,c,i.transforms,!0)}})}function xM(r,e){var t=Oh(r.target,e.name);if(t){var i=bM(e,r),s=i[i.length-1];return{type:t,property:e.name,animatable:r,tweens:i,duration:s.end,delay:i[0].delay,endDelay:s.endDelay}}}function wM(r,e){return Ya(qa(r.map(function(t){return e.map(function(i){return xM(t,i)})})),function(t){return!te.und(t)})}function Kv(r,e){var t=r.length,i=function(n){return n.timelineOffset?n.timelineOffset:0},s={};return s.duration=t?Math.max.apply(Math,r.map(function(n){return i(n)+n.duration})):e.duration,s.delay=t?Math.min.apply(Math,r.map(function(n){return i(n)+n.delay})):e.delay,s.endDelay=t?s.duration-Math.max.apply(Math,r.map(function(n){return i(n)+n.duration-n.endDelay})):e.endDelay,s}var pp=0;function TM(r){var e=Sc(Bv,r),t=Sc(Rh,r),i=vM(t,r),s=Xv(r.targets),n=wM(s,i),o=Kv(n,t),a=pp;return pp++,Ka(e,{id:a,children:[],animatables:s,animations:n,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Nt=[],Zv=function(){var r;function e(){!r&&(!mp()||!ve.suspendWhenDocumentHidden)&&Nt.length>0&&(r=requestAnimationFrame(t))}function t(s){for(var n=Nt.length,o=0;o<n;){var a=Nt[o];a.paused?(Nt.splice(o,1),n--):(a.tick(s),o++)}r=o>0?requestAnimationFrame(t):void 0}function i(){ve.suspendWhenDocumentHidden&&(mp()?r=cancelAnimationFrame(r):(Nt.forEach(function(s){return s._onDocumentVisibility()}),Zv()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),e}();function mp(){return!!document&&document.hidden}function ve(r){r===void 0&&(r={});var e=0,t=0,i=0,s,n=0,o=null;function a(_){var y=window.Promise&&new Promise(function(b){return o=b});return _.finished=y,y}var l=TM(r);a(l);function u(){var _=l.direction;_!=="alternate"&&(l.direction=_!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(y){return y.reversed=l.reversed})}function c(_){return l.reversed?l.duration-_:_}function d(){e=0,t=c(l.currentTime)*(1/ve.speed)}function h(_,y){y&&y.seek(_-y.timelineOffset)}function f(_){if(l.reversePlayback)for(var b=n;b--;)h(_,s[b]);else for(var y=0;y<n;y++)h(_,s[y])}function p(_){for(var y=0,b=l.animations,w=b.length;y<w;){var S=b[y],x=S.animatable,A=S.tweens,C=A.length-1,E=A[C];C&&(E=Ya(A,function(Se){return _<Se.end})[0]||E);for(var D=lr(_-E.start-E.delay,0,E.duration)/E.duration,M=isNaN(D)?1:E.easing(D),T=E.to.strings,P=E.round,L=[],j=E.to.numbers.length,$=void 0,W=0;W<j;W++){var ne=void 0,O=E.to.numbers[W],B=E.from.numbers[W]||0;E.isPath?ne=mM(E.value,M*O,E.isPathTargetInsideSVG):ne=B+M*(O-B),P&&(E.isColor&&W>2||(ne=Math.round(ne*P)/P)),L.push(ne)}var oe=T.length;if(!oe)$=L[0];else{$=T[0];for(var ce=0;ce<oe;ce++){T[ce];var fe=T[ce+1],Ae=L[ce];isNaN(Ae)||(fe?$+=Ae+fe:$+=Ae+" ")}}Yv[S.type](x.target,S.property,$,x.transforms),S.currentValue=$,y++}}function m(_){l[_]&&!l.passThrough&&l[_](l)}function g(){l.remaining&&l.remaining!==!0&&l.remaining--}function v(_){var y=l.duration,b=l.delay,w=y-l.endDelay,S=c(_);l.progress=lr(S/y*100,0,100),l.reversePlayback=S<l.currentTime,s&&f(S),!l.began&&l.currentTime>0&&(l.began=!0,m("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,m("loopBegin")),S<=b&&l.currentTime!==0&&p(0),(S>=w&&l.currentTime!==y||!y)&&p(y),S>b&&S<w?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,m("changeBegin")),m("change"),p(S)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,m("changeComplete")),l.currentTime=lr(S,0,y),l.began&&m("update"),_>=y&&(t=0,g(),l.remaining?(e=i,m("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,m("loopComplete"),m("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var _=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=_==="reverse",l.remaining=l.loop,s=l.children,n=s.length;for(var y=n;y--;)l.children[y].reset();(l.reversed&&l.loop!==!0||_==="alternate"&&l.loop===1)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(_,y){return qv(_,y),l},l.tick=function(_){i=_,e||(e=i),v((i+(t-e))*ve.speed)},l.seek=function(_){v(c(_))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Nt.push(l),d(),Zv())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(_){var y=Nh(_);Jv(y,l)},l.reset(),l.autoplay&&l.play(),l}function gp(r,e){for(var t=e.length;t--;)Mh(r,e[t].animatable.target)&&e.splice(t,1)}function Jv(r,e){var t=e.animations,i=e.children;gp(r,t);for(var s=i.length;s--;){var n=i[s],o=n.animations;gp(r,o),!o.length&&!n.children.length&&i.splice(s,1)}!t.length&&!i.length&&e.pause()}function AM(r){for(var e=Nh(r),t=Nt.length;t--;){var i=Nt[t];Jv(e,i)}}function SM(r,e){e===void 0&&(e={});var t=e.direction||"normal",i=e.easing?Ih(e.easing):null,s=e.grid,n=e.axis,o=e.from||0,a=o==="first",l=o==="center",u=o==="last",c=te.arr(r),d=parseFloat(c?r[0]:r),h=c?parseFloat(r[1]):0,f=Ir(c?r[1]:r)||0,p=e.start||0+(c?d:0),m=[],g=0;return function(v,_,y){if(a&&(o=0),l&&(o=(y-1)/2),u&&(o=y-1),!m.length){for(var b=0;b<y;b++){if(!s)m.push(Math.abs(o-b));else{var w=l?(s[0]-1)/2:o%s[0],S=l?(s[1]-1)/2:Math.floor(o/s[0]),x=b%s[0],A=Math.floor(b/s[0]),C=w-x,E=S-A,D=Math.sqrt(C*C+E*E);n==="x"&&(D=-C),n==="y"&&(D=-E),m.push(D)}g=Math.max.apply(Math,m)}i&&(m=m.map(function(T){return i(T/g)*g})),t==="reverse"&&(m=m.map(function(T){return n?T<0?T*-1:-T:Math.abs(g-T)}))}var M=c?(h-d)/g:d;return p+M*(Math.round(m[_]*100)/100)+f}}function EM(r){r===void 0&&(r={});var e=ve(r);return e.duration=0,e.add=function(t,i){var s=Nt.indexOf(e),n=e.children;s>-1&&Nt.splice(s,1);function o(h){h.passThrough=!0}for(var a=0;a<n.length;a++)o(n[a]);var l=Ka(t,Sc(Rh,r));l.targets=l.targets||r.targets;var u=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=te.und(i)?u:Bh(i,u),o(e),e.seek(l.timelineOffset);var c=ve(l);o(c),n.push(c);var d=Kv(n,r);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}ve.version="3.2.1";ve.speed=1;ve.suspendWhenDocumentHidden=!0;ve.running=Nt;ve.remove=AM;ve.get=Lh;ve.set=qv;ve.convertPx=Dh;ve.path=pM;ve.setDashoffset=dM;ve.stagger=SM;ve.timeline=EM;ve.easing=Ih;ve.penner=$v;ve.random=function(r,e){return Math.floor(Math.random()*(e-r+1))+r};function CM(r){const e="clientX"in r?r.clientX:r.touches[0]?r.touches[0].clientX:r.changedTouches[0].clientX,t="clientY"in r?r.clientY:r.touches[0]?r.touches[0].clientY:r.changedTouches[0].clientY;return{x:e,y:t}}function yp(r,e=window.innerWidth,t=window.innerHeight){r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`}function PM(r){const{selector:e="canvas.fireworks",numberOfParticles:t=20,circleRadius:i={min:10,max:20},diffuseRadius:s={min:50,max:100},orbitRadius:n={min:50,max:100},animeDuration:o={min:900,max:1500}}=r,a=r.colors&&r.colors.length>0?r.colors:["#66A7DD","#3E83E1","#214EC2"],l=document.querySelector(e),u=l.getContext("2d");if(!u)return;function c(g){const v=ve.random(0,360)*Math.PI/180,_=ve.random(s.min,s.max),y=[-1,1][ve.random(0,1)]*_;return{x:g.x+y*Math.cos(v),y:g.y+y*Math.sin(v)}}function d(g,v){const _=new Le(a[ve.random(0,a.length-1)]);_.setAlpha(ve.random(.2,.8));const y={x:g,y:v,color:_.toRgbString(),radius:ve.random(i.min,i.max),endPos:c({x:g,y:v}),draw:()=>{}};return y.draw=function(){u&&(u.beginPath(),u.arc(y.x,y.y,y.radius,0,2*Math.PI,!0),u.fillStyle=y.color,u.fill())},y}function h(g,v){const _={x:g,y:v,color:"#000",radius:.1,alpha:.5,lineWidth:6,draw(){}};return _.draw=()=>{u&&(u.globalAlpha=_.alpha,u.beginPath(),u.arc(_.x,_.y,_.radius,0,2*Math.PI,!0),u.lineWidth=_.lineWidth,u.strokeStyle=_.color,u.stroke(),u.globalAlpha=1)},_}function f(g){for(let v=0;v<g.animatables.length;v++)g.animatables[v].target.draw()}function p(g){const{x:v,y:_}=g,y=h(v,_),b=[];for(let w=0;w<t;w++)b.push(d(v,_));ve.timeline().add({targets:b,x(w){return w.endPos.x},y(w){return w.endPos.y},radius:.1,duration:ve.random(o.min,o.max),easing:"easeOutExpo",update:f}).add({targets:y,radius:ve.random(n.min,n.max),lineWidth:0,alpha:{value:0,easing:"linear",duration:ve.random(600,800)},duration:ve.random(1200,1800),easing:"easeOutExpo",update:f},0)}const m=ve({duration:Number.POSITIVE_INFINITY,update:()=>{u.clearRect(0,0,l.width,l.height)}});document.addEventListener("mousedown",g=>{m.play();const v=CM(g),_=l.getBoundingClientRect();p({x:v.x-_.left,y:v.y-_.top})},!1),yp(l),window.addEventListener("resize",()=>{yp(l)},!1)}const RM={class:"fireworks"},IM=ee({__name:"YunFireworks",setup(r){const e=oh();return Yt(()=>{PM({selector:"canvas.fireworks",colors:e.value.fireworks.colors})}),(t,i)=>(R(),N("canvas",RM))}}),MM=["title"],$h=ee({__name:"YunToggleLocale",setup(r){const{t:e,locale:t}=st(),{toggleLocales:i}=jx();return(s,n)=>(R(),N("button",{class:"yun-icon-btn",title:I(e)("button.toggle_langs"),style:{color:"var(--va-c-text)"},onClick:n[0]||(n[0]=(...o)=>I(i)&&I(i)(...o))},[k("div",{"i-ri-translate":"",class:we(["transition transform",I(t)==="en"?"rotate-y-180":""])},null,2)],8,MM))}}),kM=["title"],Uh=ee({__name:"YunToggleDark",props:{transition:{type:Boolean}},setup(r){const e=r,t=Or(),{t:i}=st(),s=U(()=>t.isDark?i("button.toggle_light"):i("button.toggle_dark")),n=U(()=>({color:t.isDark?"":"#f1cb64"}));function o(a){e.transition?t.toggleDarkWithTransition(a):t.toggleDark()}return(a,l)=>(R(),N("button",{class:"yun-icon-btn",title:s.value,style:Zr(n.value),onMousedown:p_(()=>{},["prevent"]),onClick:o},l[0]||(l[0]=[k("div",{i:"ri-sun-line dark:ri-moon-line"},null,-1)]),44,kM))}}),Qv=ee({__name:"YunConfig",setup(r){const e=Or();return(t,i)=>{const s=Uh,n=$h;return R(),N("div",null,[X(s),I(e).showToggleLocale?(R(),ae(n,{key:0})):J("v-if",!0)])}}}),DM={class:"site-nav","text-xl":"","mt-6":""},OM={class:"count"},LM={class:"count"},BM={class:"count"},FM=ee({__name:"YunSidebarNav",setup(r){const{t:e}=st(),t=Ma(),i=ci(),s=dg(),n=Ig();return(o,a)=>{const l=it("RouterLink"),u=Nn;return R(),N("nav",DM,[X(l,{class:"site-link-item yun-icon-btn",to:"/",title:I(e)("menu.home")},{default:_e(()=>a[0]||(a[0]=[k("div",{"i-ri-home-4-line":""},null,-1)])),_:1},8,["title"]),X(l,{class:"site-link-item",to:"/archives/",title:I(e)("menu.archives")},{default:_e(()=>[a[1]||(a[1]=k("div",{class:"icon","i-ri-archive-line":""},null,-1)),k("span",OM,de(I(t).postList.length),1)]),_:1},8,["title"]),X(l,{class:"site-link-item",to:"/categories/",title:I(e)("menu.categories")},{default:_e(()=>[a[2]||(a[2]=k("div",{class:"icon","i-ri-folder-2-line":""},null,-1)),k("span",LM,de(Array.from(I(s).children).length),1)]),_:1},8,["title"]),X(l,{class:"site-link-item",to:"/tags/",title:I(e)("menu.tags")},{default:_e(()=>[a[3]||(a[3]=k("div",{class:"icon","i-ri-price-tag-3-line":""},null,-1)),k("span",BM,de(Array.from(I(n)).length),1)]),_:1},8,["title"]),X(u,{class:"site-link-item yun-icon-btn",to:I(i).menu.custom.url,title:I(e)(I(i).menu.custom.title)},{default:_e(()=>[k("div",{class:we(I(i).menu.custom.icon)},null,2)]),_:1},8,["to","title"])])}}}),NM={class:"sidebar-panel",p:"2"},$M=ee({__name:"YunOverview",setup(r){return(e,t)=>{const i=fh,s=FM,n=dh,o=hh,a=Qv;return R(),N(Be,null,[k("div",NM,[X(i),X(s),t[0]||(t[0]=k("hr",{m:"t-4 b-2",op:"20"},null,-1)),X(n),t[1]||(t[1]=k("hr",{m:"y-2",op:"20"},null,-1)),X(o),t[2]||(t[2]=k("br",null,null,-1))]),X(a)],64)}}}),UM={key:0,class:"sidebar-nav",m:"t-6"},HM={key:2},GM=ee({__name:"YunStratoSidebar",props:{showHamburger:{type:Boolean}},setup(r){const e=_t(),t=V(!1);return(i,s)=>{const n=kg,o=$M;return R(),N(Be,null,[J(' class="md:hidden"  '),X(n,{show:I(e).leftSidebar.isOpen,onClick:s[0]||(s[0]=a=>I(e).leftSidebar.toggle())},null,8,["show"]),J(` <ValaxyHamburger
    :active="yunStore.leftSidebar.isOpen"
    class="menu-btn sidebar-toggle yun-icon-btn leading-4 fixed left-0.8rem top-0.6rem"
    inline-flex cursor="pointer" z="$yun-z-menu-btn"
    :class="showHamburger ? '' : 'md:hidden'"
    @click="yunStore.leftSidebar.toggle()"
  /> `),k("aside",{id:"yun-left-sidebar",class:we(["va-card transition yun-sidebar fixed inset-y-0 left-0 overflow-y-auto",{open:I(e).leftSidebar.isOpen,"md:translate-x-0":!i.showHamburger}]),text:"center",bg:"$yun-sidebar-bg-color contain no-repeat",z:"$yun-z-left-sidebar"},[i.$slots.default?(R(),N("div",UM,[k("button",{m:"x-4",class:we(["sidebar-nav-item yun-icon-btn",t.value&&"active"]),onClick:s[1]||(s[1]=a=>t.value=!0)},s[3]||(s[3]=[k("div",{"i-ri-passport-line":""},null,-1)]),2),k("button",{m:"x-4",class:we(["sidebar-nav-item yun-icon-btn",!t.value&&"active"]),onClick:s[2]||(s[2]=a=>t.value=!1)},s[4]||(s[4]=[k("div",{"i-ri-list-ordered":""},null,-1)]),2)])):J("v-if",!0),t.value||!i.$slots.default?(R(),N("div",{key:1,class:we(i.$slots.default&&"-mt-4")},[X(o)],2)):(R(),N("div",HM,[rt(i.$slots,"default")]))],2)],64)}}}),zM={class:"flex-center"},jM=ee({__name:"YunFullscreenMenu",setup(r){const e=_t(),t=V(),i=Or();return(s,n)=>{const o=fh,a=Lg,l=Og,u=dh,c=hh,d=Qv;return R(),ae(Hi,{name:I(i).isMobile?"slide-down":"slide-left"},{default:_e(()=>[I(e).fullscreenMenu.isOpen?(R(),N("div",{key:0,ref_key:"fullscreenMenuRef",ref:t,p:"t-12 md:t-20",class:"yun-fullscreen-menu fixed left-0 right-0 bottom-0 top-0 bg-$va-c-bg-soft z-$yun-z-fullscreen-menu overflow-auto max-w-md shadow-2xl"},[J(` <div v-if="app.isMobile" class="flex-center gap-2">
        <YunToggleDark transition />
        <YunToggleLocale v-if="app.showToggleLocale" />
      </div> `),J(" <YunFullscreenMenuList /> "),X(o,{class:"text-center"}),X(a,{class:"my-2 op-20"}),X(l),X(a,{class:"my-2 op-20"}),X(u),X(a,{class:"my-2 op-20"}),X(c),I(e).size.isLg?J("v-if",!0):(R(),ae(a,{key:0,class:"my-2 op-20"})),k("div",zM,[X(d)])],512)):J("v-if",!0)]),_:1},8,["name"])}}}),VM={class:"yun-search-input-container flex-center",w:"full"},WM=["placeholder"],XM={key:0,class:"flex-center",w:"full",py:"4"},YM={key:1,overflow:"auto",flex:"~",w:"full",class:"justify-center"},qM={class:"yun-fuse-result-container max-w-3xl",flex:"~ col",w:"full"},KM={font:"medium"},ZM={text:"sm",font:"light",opacity:"80"},JM={class:"flex justify-between op-50","text-xs":"",mt:"1",font:"light"},QM={flex:"~ gap-1"},ek={class:"text-right w-4"},tk=ee({__name:"YunFuseSearch",props:{open:{type:Boolean}},emits:["close"],setup(r,{emit:e}){const t=r,i=e,s=V(""),n=Ux(yr?document.documentElement:null),{t:o}=st(),{results:a,fetchFuseListData:l}=Vw(s),u=V(),c=V();return Ex(u),xe(()=>t.open,()=>{t.open&&l()}),(d,h)=>{const f=Nn;return R(),ae(Hi,{name:"fade",onEnter:h[2]||(h[2]=p=>n.value=!0),onAfterLeave:h[3]||(h[3]=p=>n.value=!1)},{default:_e(()=>[d.open?(R(),N("div",{key:0,ref_key:"searchContainer",ref:c,class:"yun-popup yun-search-popup yun-fuse-search flex-center pointer-events-auto",flex:"col",justify:"start","pt-12":""},[k("div",VM,[Ta(k("input",{ref_key:"searchInputRef",ref:u,"onUpdate:modelValue":h[0]||(h[0]=p=>s.value=p),class:"yun-search-input",placeholder:I(o)("search.placeholder")},null,8,WM),[[m_,s.value]])]),s.value?(R(),N("div",XM,de(I(o)("search.hits",I(a).length||0)),1)):J("v-if",!0),I(a).length>0?(R(),N("div",YM,[k("div",qM,[(R(!0),N(Be,null,Ui(I(a),p=>(R(),ae(f,{key:p.item.title,to:p.item.link,class:"yun-fuse-result-item text-$va-c-text hover:text-$va-c-bg hover:bg-$va-c-text-dark hover:bg-opacity-100 text-left p-2",flex:"~ col",onClick:h[1]||(h[1]=m=>i("close"))},{default:_e(()=>[k("h3",KM,de(p.item.title),1),k("span",ZM,de(p.item.excerpt),1),k("div",JM,[k("span",null,de(p.item.link),1),k("span",QM,[h[4]||(h[4]=k("span",null,"Score Index:",-1)),k("div",ek,de(p.refIndex),1)])])]),_:2},1032,["to"]))),128)),h[5]||(h[5]=k("div",{class:"flex op-30 justify-end text-xs p-4"}," Search by Local ",-1))])])):J("v-if",!0)],512)):J("v-if",!0)]),_:1})}}}),rk=["title"],ik={key:0,"i-ri-search-line":"","op-80":"",hover:"op-100"},sk={key:1,text:"!2xl","i-ri-close-line":""},nk=ee({__name:"YunSearchBtn",props:{open:{type:Boolean,default:!1}},emits:["close","open"],setup(r,{emit:e}){const t=r,i=e,{t:s}=st();function n(){t.open?i("close"):i("open")}return(o,a)=>(R(),N("button",{class:"yun-search-btn yun-icon-btn popup-trigger rounded-none! size-12 inline-flex justify-center items-center",text:"xl $va-c-text",title:I(s)("menu.search"),onClick:n},[o.open?(R(),N("div",sk)):(R(),N("div",ik))],8,rk))}}),e0=ee({__name:"YunSearchTrigger",setup(r){const e=nt(),t=U(()=>e.value.search.type==="algolia"),i=U(()=>e.value.search.type==="fuse"),s=V(!1);function n(){s.value=!s.value}const o=V();Yt(()=>{i.value&&a1("k",n)});function a(){s.value=!0,t.value&&(o.value.load(),o.value.dispatchEvent())}function l(){s.value=!1}const u=t.value?g_(()=>Ne(()=>import("./YunAlgoliaSearch.BfN_XM8p.js"),__vite__mapDeps([49,2,3,43,6,5,7,8,9]))):()=>null;return(c,d)=>{const h=nk,f=tk;return R(),N(Be,null,[X(h,{open:s.value&&!t.value,onOpen:a,onClose:l},null,8,["open"]),t.value?(R(),ae(I(u),{key:0,ref_key:"algoliaRef",ref:o,open:s.value,onClose:l},null,8,["open"])):i.value?(R(),ae(f,{key:1,open:s.value,onClose:l},null,8,["open"])):J("v-if",!0)],64)}}}),ok={key:0,flex:"~ col",class:"nav-menu-post-title text-xs font-bold flex items-center gap-1 lt-sm:max-w-40"},ak={class:"gap-1",flex:"~"},lk={class:"truncate"},uk={key:0,class:"font-light op-80"},ck={key:1,class:"font-light truncate"},t0=ee({__name:"YunNavMenuTitle",setup(r){const e=_t(),t=Gi(),i=nt(),s=Nr(),n=V(!1),o=U(()=>s.path==="/"?!1:e.isStrato?e.scrollY<10:!n.value);xe(()=>e.scrollY,()=>{e.isNimbo&&(n.value=e.scrollY>200)});const a=Nc();function l(){n.value||a.push("/")}return(u,c)=>{const d=y_("motion");return Ta((R(),N("div",{flex:"~ center col h-full",class:we({"cursor-pointer":!n.value}),initial:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{duration:400,delay:1200}},onClick:l},[I(t).title&&n.value?(R(),N("div",ok,[k("div",ak,[k("div",{class:we(["size-4",I(t).icon||"i-ri-article-line"])},null,2),k("span",lk,de(I(t).title),1)]),I(t).subtitle?(R(),N("span",uk,de(I(t).subtitle),1)):J("v-if",!0)])):J("v-if",!0),o.value?(R(),N("span",ck,de(I(i).title),1)):J("v-if",!0)],2)),[[d]])}}}),r0=ee({__name:"YunNavMenuItem",props:{icon:{},to:{}},setup(r){return(e,t)=>{const i=Nn;return R(),ae(i,{class:"size-12 inline-flex-center cursor-pointer z-$yun-z-nav-menu text-$va-c-text",hover:"bg-white/80 dark:bg-black/80 op-100","op-80":"",to:e.to},{default:_e(()=>[k("div",{class:we(["size-6",e.icon])},null,2)]),_:1},8,["to"])}}}),hk=["aria-expanded"],i0=ee({__name:"ValaxyHamburger",props:{active:{type:Boolean}},setup(r){return(e,t)=>(R(),N("button",{type:"button",class:we(["vt-hamburger",{"is-active":e.active}]),"aria-label":"mobile navigation","aria-expanded":e.active},t[0]||(t[0]=[k("span",{class:"vt-hamburger-container"},[k("span",{class:"vt-hamburger-top"}),k("span",{class:"vt-hamburger-middle"}),k("span",{class:"vt-hamburger-bottom"})],-1)]),10,hk))}}),dk={class:"inline-flex justify-start items-center flex-1"},fk={class:"flex flex-1 flex-center"},pk={class:"inline-flex-center justify-end items-center flex-1"},mk=ee({__name:"YunNimboNavMenu",setup(r){const e=_t(),t=nt(),i=ci(),s=V(!1),n=Nr();Yt(()=>{n.meta.layout==="home"?setTimeout(()=>{s.value=!0},600):s.value=!0});const o=V(!1);xe(()=>e.scrollY,()=>{e.scrollY>10?o.value=!0:o.value=!1});const a=Or();return(l,u)=>{const c=i0,d=r0,h=t0,f=$h,p=Uh,m=e0;return R(),ae(Hi,{"enter-active-class":"animate-fade-in"},{default:_e(()=>[s.value?(R(),N("div",{key:0,class:we(["yun-nav-menu z-$yun-z-nav-menu fixed bg-transparent",{play:o.value}])},[J("  "),k("div",dk,[I(e).size.isLg?J("v-if",!0):(R(),ae(c,{key:0,active:I(e).fullscreenMenu.isOpen,class:"menu-btn sidebar-toggle leading-4 size-12","inline-flex":"",cursor:"pointer",hover:"bg-white/80 dark:bg-black/80",z:"$yun-z-menu-btn",onClick:u[0]||(u[0]=g=>I(e).fullscreenMenu.toggle())},null,8,["active"])),X(d,{icon:"i-ri-home-4-line",to:"/"}),I(e).size.isLg?(R(),N(Be,{key:1},[X(d,{icon:"i-ri-article-line",to:"/posts/",title:"博客文章"}),(R(!0),N(Be,null,Ui(I(i).pages,(g,v)=>(R(),ae(d,{key:v,icon:g.icon,to:g.url,title:g.name},null,8,["icon","to","title"]))),128))],64)):J("v-if",!0)]),k("div",fk,[X(h)]),k("div",pk,[J(` <template v-if="!app.isMobile && themeConfig.nav">
          <template v-for="item in themeConfig.nav" :key="item.text">
            <AppLink
              v-if="'link' in item"
              :to="item.link"
              class="menu-btn inline-flex-center p-2 transition text-$va-c-text"
              inline-flex cursor="pointer"
              hover="bg-white/80 dark:bg-black/80"
              z="$yun-z-menu-btn"
            >
              {{ item.text }}
            </AppLink>
            <template v-else-if="'items' in item" />
          </template>
        </template> `),I(e).size.isSm&&I(a).showToggleLocale?(R(),ae(f,{key:0,class:"rounded-none!"})):J("v-if",!0),X(p,{class:"rounded-none!",transition:""}),I(t).search.enable?(R(),ae(m,{key:1})):J("v-if",!0)])],2)):J("v-if",!0)]),_:1})}}}),gk=li(mk,[["__scopeId","data-v-ebfdc2e7"]]),yk={class:"fixed left-0 top-0",z:"$yun-z-left-sidebar-menu"},vk={class:"flex flex-1 flex-center"},_k={class:"inline-flex flex-1 justify-end items-center"},bk=ee({__name:"YunStratoNavMenu",setup(r){const e=_t(),t=nt(),i=V(!1),s=Nr();Yt(()=>{s.meta.layout==="home"?setTimeout(()=>{i.value=!0},600):i.value=!0});const n=V(!1);xe(()=>e.scrollY,()=>{e.scrollY>10?n.value=!0:n.value=!1});const o=Or(),a=U(()=>o.isMobile?!0:s.meta.layout==="home");return(l,u)=>{const c=i0,d=r0,h=t0,f=$h,p=Uh,m=e0;return R(),N(Be,null,[k("div",yk,[a.value?(R(),ae(c,{key:0,active:I(e).leftSidebar.isOpen,class:"menu-btn sidebar-toggle leading-4 size-12 fixed","inline-flex":"",cursor:"pointer",hover:"bg-white/80 dark:bg-black/80",onClick:u[0]||(u[0]=g=>I(e).leftSidebar.toggle())},null,8,["active"])):(R(),ae(d,{key:1,icon:"i-ri-home-4-line",to:"/"}))]),X(Hi,{"enter-active-class":"animate-fade-in"},{default:_e(()=>[i.value?(R(),N("div",{key:0,class:we(["yun-nav-menu z-$yun-z-nav-menu fixed w-full flex justify-between items-center top-0",{play:n.value}])},[J("  "),u[1]||(u[1]=k("div",{class:"inline-flex justify-start items-center flex-1"},null,-1)),k("div",vk,[X(h)]),k("div",_k,[I(e).size.isSm&&I(o).showToggleLocale?(R(),ae(f,{key:0,class:"rounded-none!"})):J("v-if",!0),X(p,{class:"rounded-none!",transition:""}),I(t).search.enable?(R(),ae(m,{key:1})):J("v-if",!0)])],2)):J("v-if",!0)]),_:1})],64)}}}),xk=ee({__name:"YunNavMenu",setup(r){const e=_t();return(t,i)=>{const s=bk,n=gk;return I(e).isStrato?(R(),ae(s,{key:0})):I(e).isNimbo?(R(),ae(n,{key:1})):J("v-if",!0)}}}),wk=ee({__name:"YunPageHeaderGradient",setup(r){const{isDark:e}=uh(),t=U(()=>e.value?{"--gradient-from":"0 0 0","--gradient-to":"0 0 0"}:{"--gradient-from":"161 196 253","--gradient-to":"194 233 251"});return(i,s)=>(R(),N("div",{class:"yun-page-header-gradient",style:Zr(t.value)},null,4))}}),Tk={class:"w-6",font:"bold"},Ak=ee({__name:"YunDebug",setup(r){const e=_t(),t=U(()=>[{label:"xs",value:e.size.isXs},{label:"sm",value:e.size.isSm},{label:"md",value:e.size.isMd},{label:"lg",value:e.size.isLg},{label:"xl",value:e.size.isXl},{label:"2xl",value:e.size.is2xl}]),i=V(!0);return(s,n)=>i.value?(R(),N("div",{key:0,class:"bg-black/50 fixed bottom-20 left-2 p-2 gap-1 rounded z-9999",text:"xs white",flex:"~ col",onClick:n[0]||(n[0]=o=>i.value=!1)},[(R(!0),N(Be,null,Ui(t.value,o=>(R(),N("div",{key:o.label,class:"gap-2 inline-flex"},[k("span",Tk,de(o.label)+": ",1),k("span",null,de(o.value?"✅":"❌"),1)]))),128))])):J("v-if",!0)}}),Sk=ee({__name:"YunStratoApp",setup(r){const e=xu("--yun-margin-top");return e.value="48px",(t,i)=>(R(),N("div"))}}),Ek=ee({__name:"App",setup(r){const e=Or();nh({link:[{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&display=swap"}],meta:[{name:"theme-color",content:e.themeColor},{name:"msapplication-TileColor",content:e.themeColor}]});const t=ci(),i=Or(),s=_t(),n=Nr();xe(()=>n.meta.layout,()=>{n.meta.layout==="home"||i.isMobile,s.leftSidebar.isOpen=!1},{immediate:!0}),Yt(()=>{document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`),i.showLoading=!1});const o=!1;return(a,l)=>{const u=Sk,c=Ak,d=wk,h=xk,f=jM,p=GM,m=IM,g=JI,v=KI,_=WI;return R(),N(Be,null,[I(s).isStrato?(R(),ae(u,{key:0})):J("v-if",!0),I(o)?(R(),ae(c,{key:1})):J("v-if",!0),X(d),X(h),I(s).isNimbo&&!I(s).size.isLg?(R(),ae(f,{key:2})):J("v-if",!0),I(s).isStrato?(R(),ae(p,{key:3})):J("v-if",!0),I(t).fireworks.enable?(R(),ae(m,{key:4})):J("v-if",!0),rt(a.$slots,"bg",{},()=>[I(t).bg_image.enable?(R(),ae(g,{key:0})):J("v-if",!0)]),X(Hi,{name:"fade"},{default:_e(()=>[I(i).showLoading?(R(),ae(v,{key:0})):J("v-if",!0)]),_:1}),X(_),J(" TODO "),J(" <YunDock /> ")],64)}}}),Ck=ee({render:()=>null}),Pk=ee({__name:"ValaxyApp",setup(r){const e=bg();return e.value!=="empty"&&ux(),(t,i)=>{const s=it("router-view");return R(),N(Be,null,[I(e)!=="empty"?(R(),N(Be,{key:0},[X(I(Ek)),X(zI),X(I(Ck))],64)):J("v-if",!0),X(s)],64)}}}),Rk=ee({__name:"App",setup(r){return(e,t)=>{const i=Pk;return R(),ae(i)}}});function Ik(r){return{page:U(()=>r.currentRoute.value.data)}}var Mk=Object.defineProperty,vp=Object.getOwnPropertySymbols,kk=Object.prototype.hasOwnProperty,Dk=Object.prototype.propertyIsEnumerable,_p=(r,e,t)=>e in r?Mk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ok=(r,e)=>{for(var t in e||(e={}))kk.call(e,t)&&_p(r,t,e[t]);if(vp)for(var t of vp(e))Dk.call(e,t)&&_p(r,t,e[t]);return r};function Hh(r){return r==null||r===""||Array.isArray(r)&&r.length===0||!(r instanceof Date)&&typeof r=="object"&&Object.keys(r).length===0}function Lk(r){return typeof r=="function"&&"call"in r&&"apply"in r}function De(r){return!Hh(r)}function Ni(r,e=!0){return r instanceof Object&&r.constructor===Object&&(e||Object.keys(r).length!==0)}function s0(r={},e={}){const t=Ok({},r);return Object.keys(e).forEach(i=>{const s=i;Ni(e[s])&&s in r&&Ni(r[s])?t[s]=s0(r[s],e[s]):t[s]=e[s]}),t}function Bk(...r){return r.reduce((e,t,i)=>i===0?t:s0(e,t),{})}function Ii(r,...e){return Lk(r)?r(...e):r}function Es(r,e=!0){return typeof r=="string"&&(e||r!=="")}function n0(r,e=!0){return Array.isArray(r)&&(e||r.length!==0)}function Fk(r){return De(r)&&!isNaN(r)}function Rr(r,e){if(e){const t=e.test(r);return e.lastIndex=0,t}return!1}function Nk(...r){return Bk(...r)}function on(r){return r&&r.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function o0(r){return Es(r)?r.replace(/(_)/g,"-").replace(/[A-Z]/g,(e,t)=>t===0?e:"-"+e.toLowerCase()).toLowerCase():r}function bp(r){return Es(r)?r.replace(/[A-Z]/g,(e,t)=>t===0?e:"."+e.toLowerCase()).toLowerCase():r}function Gh(){const r=new Map;return{on(e,t){let i=r.get(e);return i?i.push(t):i=[t],r.set(e,i),this},off(e,t){const i=r.get(e);return i&&i.splice(i.indexOf(t)>>>0,1),this},emit(e,t){const i=r.get(e);i&&i.forEach(s=>{s(t)})},clear(){r.clear()}}}function $k(r){if(r){let e=r.parentNode;return e&&e instanceof ShadowRoot&&e.host&&(e=e.host),e}return null}function Uk(r){return!!(r!==null&&typeof r<"u"&&r.nodeName&&$k(r))}function a0(r){return typeof Element<"u"?r instanceof Element:r!==null&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}function Cc(r,e={}){if(a0(r)){const t=(i,s)=>{var n,o;const a=(n=r==null?void 0:r.$attrs)!=null&&n[i]?[(o=r==null?void 0:r.$attrs)==null?void 0:o[i]]:[];return[s].flat().reduce((l,u)=>{if(u!=null){const c=typeof u;if(c==="string"||c==="number")l.push(u);else if(c==="object"){const d=Array.isArray(u)?t(i,u):Object.entries(u).map(([h,f])=>i==="style"&&(f||f===0)?`${h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${f}`:f?h:void 0);l=d.length?l.concat(d.filter(h=>!!h)):l}}return l},a)};Object.entries(e).forEach(([i,s])=>{if(s!=null){const n=i.match(/^on(.+)/);n?r.addEventListener(n[1].toLowerCase(),s):i==="p-bind"||i==="pBind"?Cc(r,s):(s=i==="class"?[...new Set(t("class",s))].join(" ").trim():i==="style"?t("style",s).join(";").trim():s,(r.$attrs=r.$attrs||{})&&(r.$attrs[i]=s),r.setAttribute(i,s))}})}}function Hk(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Gk(r,e="",t){a0(r)&&t!==null&&t!==void 0&&r.setAttribute(e,t)}var zk=Object.defineProperty,jk=Object.defineProperties,Vk=Object.getOwnPropertyDescriptors,ya=Object.getOwnPropertySymbols,l0=Object.prototype.hasOwnProperty,u0=Object.prototype.propertyIsEnumerable,xp=(r,e,t)=>e in r?zk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bt=(r,e)=>{for(var t in e||(e={}))l0.call(e,t)&&xp(r,t,e[t]);if(ya)for(var t of ya(e))u0.call(e,t)&&xp(r,t,e[t]);return r},au=(r,e)=>jk(r,Vk(e)),xr=(r,e)=>{var t={};for(var i in r)l0.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&ya)for(var i of ya(r))e.indexOf(i)<0&&u0.call(r,i)&&(t[i]=r[i]);return t},Wk=Gh(),Tr=Wk;function wp(r,e){n0(r)?r.push(...e||[]):Ni(r)&&Object.assign(r,e)}function Xk(r){return Ni(r)&&r.hasOwnProperty("$value")&&r.hasOwnProperty("$type")?r.$value:r}function Yk(r){return r.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function Pc(r="",e=""){return Yk(`${Es(r,!1)&&Es(e,!1)?`${r}-`:r}${e}`)}function c0(r="",e=""){return`--${Pc(r,e)}`}function qk(r=""){const e=(r.match(/{/g)||[]).length,t=(r.match(/}/g)||[]).length;return(e+t)%2!==0}function h0(r,e="",t="",i=[],s){if(Es(r)){const n=/{([^}]*)}/g,o=r.trim();if(qk(o))return;if(Rr(o,n)){const a=o.replaceAll(n,c=>{const h=c.replace(/{|}/g,"").split(".").filter(f=>!i.some(p=>Rr(f,p)));return`var(${c0(t,o0(h.join("-")))}${De(s)?`, ${s}`:""})`}),l=/(\d+\s+[\+\-\*\/]\s+\d+)/g,u=/var\([^)]+\)/g;return Rr(a.replace(u,"0"),l)?`calc(${a})`:a}return o}else if(Fk(r))return r}function Kk(r,e,t){Es(e,!1)&&r.push(`${e}:${t};`)}function ls(r,e){return r?`${r}{${e}}`:""}var an=(...r)=>Zk(et.getTheme(),...r),Zk=(r={},e,t,i)=>{if(e){const{variable:s,options:n}=et.defaults||{},{prefix:o,transform:a}=(r==null?void 0:r.options)||n||{},u=Rr(e,/{([^}]*)}/g)?e:`{${e}}`;return i==="value"||Hh(i)&&a==="strict"?et.getTokenValue(e):h0(u,void 0,o,[s.excludedKeyRegex],t)}return""};function Jk(r,e={}){const t=et.defaults.variable,{prefix:i=t.prefix,selector:s=t.selector,excludedKeyRegex:n=t.excludedKeyRegex}=e,o=(u,c="")=>Object.entries(u).reduce((d,[h,f])=>{const p=Rr(h,n)?Pc(c):Pc(c,o0(h)),m=Xk(f);if(Ni(m)){const{variables:g,tokens:v}=o(m,p);wp(d.tokens,v),wp(d.variables,g)}else d.tokens.push((i?p.replace(`${i}-`,""):p).replaceAll("-",".")),Kk(d.variables,c0(p),h0(m,p,i,[n]));return d},{variables:[],tokens:[]}),{variables:a,tokens:l}=o(r,i);return{value:a,tokens:l,declarations:a.join(""),css:ls(s,a.join(""))}}var kt={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(r){return{type:"class",selector:r,matched:this.pattern.test(r.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(r){return{type:"attr",selector:`:root${r}`,matched:this.pattern.test(r.trim())}}},media:{pattern:/^@media (.*)$/,resolve(r){return{type:"media",selector:`${r}{:root{[CSS]}}`,matched:this.pattern.test(r.trim())}}},system:{pattern:/^system$/,resolve(r){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(r.trim())}}},custom:{resolve(r){return{type:"custom",selector:r,matched:!0}}}},resolve(r){const e=Object.keys(this.rules).filter(t=>t!=="custom").map(t=>this.rules[t]);return[r].flat().map(t=>{var i;return(i=e.map(s=>s.resolve(t)).find(s=>s.matched))!=null?i:this.rules.custom.resolve(t)})}},_toVariables(r,e){return Jk(r,{prefix:e==null?void 0:e.prefix})},getCommon({name:r="",theme:e={},params:t,set:i,defaults:s}){var n,o,a,l,u,c,d;const{preset:h,options:f}=e;let p,m,g,v,_,y,b;if(De(h)&&f.transform!=="strict"){const{primitive:w,semantic:S,extend:x}=h,A=S||{},{colorScheme:C}=A,E=xr(A,["colorScheme"]),D=x||{},{colorScheme:M}=D,T=xr(D,["colorScheme"]),P=C||{},{dark:L}=P,j=xr(P,["dark"]),$=M||{},{dark:W}=$,ne=xr($,["dark"]),O=De(w)?this._toVariables({primitive:w},f):{},B=De(E)?this._toVariables({semantic:E},f):{},oe=De(j)?this._toVariables({light:j},f):{},ce=De(L)?this._toVariables({dark:L},f):{},fe=De(T)?this._toVariables({semantic:T},f):{},Ae=De(ne)?this._toVariables({light:ne},f):{},Se=De(W)?this._toVariables({dark:W},f):{},[Fe,je]=[(n=O.declarations)!=null?n:"",O.tokens],[ot,Ue]=[(o=B.declarations)!=null?o:"",B.tokens||[]],[Te,Me]=[(a=oe.declarations)!=null?a:"",oe.tokens||[]],[Oe,bt]=[(l=ce.declarations)!=null?l:"",ce.tokens||[]],[xt,pi]=[(u=fe.declarations)!=null?u:"",fe.tokens||[]],[il,Yi]=[(c=Ae.declarations)!=null?c:"",Ae.tokens||[]],[W0,X0]=[(d=Se.declarations)!=null?d:"",Se.tokens||[]];p=this.transformCSS(r,Fe,"light","variable",f,i,s),m=je;const Y0=this.transformCSS(r,`${ot}${Te}`,"light","variable",f,i,s),q0=this.transformCSS(r,`${Oe}`,"dark","variable",f,i,s);g=`${Y0}${q0}`,v=[...new Set([...Ue,...Me,...bt])];const K0=this.transformCSS(r,`${xt}${il}color-scheme:light`,"light","variable",f,i,s),Z0=this.transformCSS(r,`${W0}color-scheme:dark`,"dark","variable",f,i,s);_=`${K0}${Z0}`,y=[...new Set([...pi,...Yi,...X0])],b=Ii(h.css,{dt:an})}return{primitive:{css:p,tokens:m},semantic:{css:g,tokens:v},global:{css:_,tokens:y},style:b}},getPreset({name:r="",preset:e={},options:t,params:i,set:s,defaults:n,selector:o}){var a,l,u;let c,d,h;if(De(e)&&t.transform!=="strict"){const f=r.replace("-directive",""),p=e,{colorScheme:m,extend:g,css:v}=p,_=xr(p,["colorScheme","extend","css"]),y=g||{},{colorScheme:b}=y,w=xr(y,["colorScheme"]),S=m||{},{dark:x}=S,A=xr(S,["dark"]),C=b||{},{dark:E}=C,D=xr(C,["dark"]),M=De(_)?this._toVariables({[f]:Bt(Bt({},_),w)},t):{},T=De(A)?this._toVariables({[f]:Bt(Bt({},A),D)},t):{},P=De(x)?this._toVariables({[f]:Bt(Bt({},x),E)},t):{},[L,j]=[(a=M.declarations)!=null?a:"",M.tokens||[]],[$,W]=[(l=T.declarations)!=null?l:"",T.tokens||[]],[ne,O]=[(u=P.declarations)!=null?u:"",P.tokens||[]],B=this.transformCSS(f,`${L}${$}`,"light","variable",t,s,n,o),oe=this.transformCSS(f,ne,"dark","variable",t,s,n,o);c=`${B}${oe}`,d=[...new Set([...j,...W,...O])],h=Ii(v,{dt:an})}return{css:c,tokens:d,style:h}},getPresetC({name:r="",theme:e={},params:t,set:i,defaults:s}){var n;const{preset:o,options:a}=e,l=(n=o==null?void 0:o.components)==null?void 0:n[r];return this.getPreset({name:r,preset:l,options:a,params:t,set:i,defaults:s})},getPresetD({name:r="",theme:e={},params:t,set:i,defaults:s}){var n,o;const a=r.replace("-directive",""),{preset:l,options:u}=e,c=((n=l==null?void 0:l.components)==null?void 0:n[a])||((o=l==null?void 0:l.directives)==null?void 0:o[a]);return this.getPreset({name:a,preset:c,options:u,params:t,set:i,defaults:s})},applyDarkColorScheme(r){return!(r.darkModeSelector==="none"||r.darkModeSelector===!1)},getColorSchemeOption(r,e){var t;return this.applyDarkColorScheme(r)?this.regex.resolve(r.darkModeSelector===!0?e.options.darkModeSelector:(t=r.darkModeSelector)!=null?t:e.options.darkModeSelector):[]},getLayerOrder(r,e={},t,i){const{cssLayer:s}=e;return s?`@layer ${Ii(s.order||"primeui",t)}`:""},getCommonStyleSheet({name:r="",theme:e={},params:t,props:i={},set:s,defaults:n}){const o=this.getCommon({name:r,theme:e,params:t,set:s,defaults:n}),a=Object.entries(i).reduce((l,[u,c])=>l.push(`${u}="${c}"`)&&l,[]).join(" ");return Object.entries(o||{}).reduce((l,[u,c])=>{if(c!=null&&c.css){const d=on(c==null?void 0:c.css),h=`${u}-variables`;l.push(`<style type="text/css" data-primevue-style-id="${h}" ${a}>${d}</style>`)}return l},[]).join("")},getStyleSheet({name:r="",theme:e={},params:t,props:i={},set:s,defaults:n}){var o;const a={name:r,theme:e,params:t,set:s,defaults:n},l=(o=r.includes("-directive")?this.getPresetD(a):this.getPresetC(a))==null?void 0:o.css,u=Object.entries(i).reduce((c,[d,h])=>c.push(`${d}="${h}"`)&&c,[]).join(" ");return l?`<style type="text/css" data-primevue-style-id="${r}-variables" ${u}>${on(l)}</style>`:""},createTokens(r={},e,t="",i="",s={}){return Object.entries(r).forEach(([n,o])=>{const a=Rr(n,e.variable.excludedKeyRegex)?t:t?`${t}.${bp(n)}`:bp(n),l=i?`${i}.${n}`:n;Ni(o)?this.createTokens(o,e,a,l,s):(s[a]||(s[a]={paths:[],computed(u,c={}){var d,h;return this.paths.length===1?(d=this.paths[0])==null?void 0:d.computed(this.paths[0].scheme,c.binding):u&&u!=="none"?(h=this.paths.find(f=>f.scheme===u))==null?void 0:h.computed(u,c.binding):this.paths.map(f=>f.computed(f.scheme,c[f.scheme]))}}),s[a].paths.push({path:l,value:o,scheme:l.includes("colorScheme.light")?"light":l.includes("colorScheme.dark")?"dark":"none",computed(u,c={}){const d=/{([^}]*)}/g;let h=o;if(c.name=this.path,c.binding||(c.binding={}),Rr(o,d)){const p=o.trim().replaceAll(d,v=>{var _;const y=v.replace(/{|}/g,""),b=(_=s[y])==null?void 0:_.computed(u,c);return n0(b)&&b.length===2?`light-dark(${b[0].value},${b[1].value})`:b==null?void 0:b.value}),m=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,g=/var\([^)]+\)/g;h=Rr(p.replace(g,"0"),m)?`calc(${p})`:p}return Hh(c.binding)&&delete c.binding,{colorScheme:u,path:this.path,paths:c,value:h.includes("undefined")?void 0:h}}}))}),s},getTokenValue(r,e,t){var i;const n=(l=>l.split(".").filter(c=>!Rr(c.toLowerCase(),t.variable.excludedKeyRegex)).join("."))(e),o=e.includes("colorScheme.light")?"light":e.includes("colorScheme.dark")?"dark":void 0,a=[(i=r[n])==null?void 0:i.computed(o)].flat().filter(l=>l);return a.length===1?a[0].value:a.reduce((l={},u)=>{const c=u,{colorScheme:d}=c,h=xr(c,["colorScheme"]);return l[d]=h,l},void 0)},getSelectorRule(r,e,t,i){return t==="class"||t==="attr"?ls(De(e)?`${r}${e},${r} ${e}`:r,i):ls(r,De(e)?ls(e,i):i)},transformCSS(r,e,t,i,s={},n,o,a){if(De(e)){const{cssLayer:l}=s;if(i!=="style"){const u=this.getColorSchemeOption(s,o);e=t==="dark"?u.reduce((c,{type:d,selector:h})=>(De(h)&&(c+=h.includes("[CSS]")?h.replace("[CSS]",e):this.getSelectorRule(h,a,d,e)),c),""):ls(a??":root",e)}if(l){const u={name:"primeui"};Ni(l)&&(u.name=Ii(l.name,{name:r,type:i})),De(u.name)&&(e=ls(`@layer ${u.name}`,e),n==null||n.layerNames(u.name))}return e}return""}},et={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(r={}){const{theme:e}=r;e&&(this._theme=au(Bt({},e),{options:Bt(Bt({},this.defaults.options),e.options)}),this._tokens=kt.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var r;return((r=this.theme)==null?void 0:r.preset)||{}},get options(){var r;return((r=this.theme)==null?void 0:r.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(r){this.update({theme:r}),Tr.emit("theme:change",r)},getPreset(){return this.preset},setPreset(r){this._theme=au(Bt({},this.theme),{preset:r}),this._tokens=kt.createTokens(r,this.defaults),this.clearLoadedStyleNames(),Tr.emit("preset:change",r),Tr.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(r){this._theme=au(Bt({},this.theme),{options:r}),this.clearLoadedStyleNames(),Tr.emit("options:change",r),Tr.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(r){this._layerNames.add(r)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(r){return this._loadedStyleNames.has(r)},setLoadedStyleName(r){this._loadedStyleNames.add(r)},deleteLoadedStyleName(r){this._loadedStyleNames.delete(r)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(r){return kt.getTokenValue(this.tokens,r,this.defaults)},getCommon(r="",e){return kt.getCommon({name:r,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(r="",e){const t={name:r,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return kt.getPresetC(t)},getDirective(r="",e){const t={name:r,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return kt.getPresetD(t)},getCustomPreset(r="",e,t,i){const s={name:r,preset:e,options:this.options,selector:t,params:i,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return kt.getPreset(s)},getLayerOrderCSS(r=""){return kt.getLayerOrder(r,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(r="",e,t="style",i){return kt.transformCSS(r,e,i,t,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(r="",e,t={}){return kt.getCommonStyleSheet({name:r,theme:this.theme,params:e,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(r,e,t={}){return kt.getStyleSheet({name:r,theme:this.theme,params:e,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(r){this._loadingStyles.add(r)},onStyleUpdated(r){this._loadingStyles.add(r)},onStyleLoaded(r,{name:e}){this._loadingStyles.size&&(this._loadingStyles.delete(e),Tr.emit(`theme:${e}:load`,r),!this._loadingStyles.size&&Tr.emit("theme:load"))}},Qe={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},Qk=({dt:r})=>`
*,
::before,
::after {
    box-sizing: border-box;
}

/* Non vue overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* Vue based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: ${r("disabled.opacity")};
}

.pi {
    font-size: ${r("icon.size")};
}

.p-icon {
    width: ${r("icon.size")};
    height: ${r("icon.size")};
}

.p-overlay-mask {
    background: ${r("mask.background")};
    color: ${r("mask.color")};
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation ${r("mask.transition.duration")} forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation ${r("mask.transition.duration")} forwards;
}

@keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: ${r("mask.background")};
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: ${r("mask.background")};
    }
    to {
        background: transparent;
    }
}
`;function xn(r){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(r)}function Tp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,i)}return t}function Ap(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tp(Object(t),!0).forEach(function(i){eD(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tp(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function eD(r,e,t){return(e=tD(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tD(r){var e=rD(r,"string");return xn(e)=="symbol"?e:e+""}function rD(r,e){if(xn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(xn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iD(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;dn()&&dn().components?Yt(r):e?r():ri(r)}var sD=0;function nD(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=V(!1),i=V(r),s=V(null),n=Hk()?window.document:void 0,o=e.document,a=o===void 0?n:o,l=e.immediate,u=l===void 0?!0:l,c=e.manual,d=c===void 0?!1:c,h=e.name,f=h===void 0?"style_".concat(++sD):h,p=e.id,m=p===void 0?void 0:p,g=e.media,v=g===void 0?void 0:g,_=e.nonce,y=_===void 0?void 0:_,b=e.first,w=b===void 0?!1:b,S=e.onMounted,x=S===void 0?void 0:S,A=e.onUpdated,C=A===void 0?void 0:A,E=e.onLoad,D=E===void 0?void 0:E,M=e.props,T=M===void 0?{}:M,P=function(){},L=function(W){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a){var O=Ap(Ap({},T),ne),B=O.name||f,oe=O.id||m,ce=O.nonce||y;s.value=a.querySelector('style[data-primevue-style-id="'.concat(B,'"]'))||a.getElementById(oe)||a.createElement("style"),s.value.isConnected||(i.value=W||r,Cc(s.value,{type:"text/css",id:oe,media:v,nonce:ce}),w?a.head.prepend(s.value):a.head.appendChild(s.value),Gk(s.value,"data-primevue-style-id",B),Cc(s.value,O),s.value.onload=function(fe){return D==null?void 0:D(fe,{name:B})},x==null||x(B)),!t.value&&(P=xe(i,function(fe){s.value.textContent=fe,C==null||C(B)},{immediate:!0}),t.value=!0)}},j=function(){!a||!t.value||(P(),Uk(s.value)&&a.head.removeChild(s.value),t.value=!1,s.value=null)};return u&&!d&&iD(L),{id:m,name:f,el:s,css:i,unload:j,load:L,isLoaded:Bc(t)}}function wn(r){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(r)}function Sp(r,e){return uD(r)||lD(r,e)||aD(r,e)||oD()}function oD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aD(r,e){if(r){if(typeof r=="string")return Ep(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ep(r,e):void 0}}function Ep(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=Array(e);t<e;t++)i[t]=r[t];return i}function lD(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i,s,n,o,a=[],l=!0,u=!1;try{if(n=(t=t.call(r)).next,e!==0)for(;!(l=(i=n.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function uD(r){if(Array.isArray(r))return r}function Cp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,i)}return t}function lu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cp(Object(t),!0).forEach(function(i){cD(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Cp(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function cD(r,e,t){return(e=hD(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hD(r){var e=dD(r,"string");return wn(e)=="symbol"?e:e+""}function dD(r,e){if(wn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(wn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var fD=function(e){var t=e.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    opacity: 0;
    overflow: hidden;
    padding: 0;
    pointer-events: none;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(t("scrollbar.width"),`;
}
`)},pD={},mD={},es={name:"base",css:fD,style:Qk,classes:pD,inlineStyles:mD,load:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(n){return n},s=i(Ii(e,{dt:an}));return De(s)?nD(on(s),lu({name:this.name},t)):{}},loadCSS:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,e)},loadStyle:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.style,t,function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return et.transformCSS(t.name||e.name,"".concat(s).concat(i))})},getCommonTheme:function(e){return et.getCommon(this.name,e)},getComponentTheme:function(e){return et.getComponent(this.name,e)},getDirectiveTheme:function(e){return et.getDirective(this.name,e)},getPresetTheme:function(e,t,i){return et.getCustomPreset(this.name,e,t,i)},getLayerOrderThemeCSS:function(){return et.getLayerOrderCSS(this.name)},getStyleSheet:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var i=Ii(this.css,{dt:an})||"",s=on("".concat(i).concat(e)),n=Object.entries(t).reduce(function(o,a){var l=Sp(a,2),u=l[0],c=l[1];return o.push("".concat(u,'="').concat(c,'"'))&&o},[]).join(" ");return De(s)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(n,">").concat(s,"</style>"):""}return""},getCommonThemeStyleSheet:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return et.getCommonStyleSheet(this.name,e,t)},getThemeStyleSheet:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[et.getStyleSheet(this.name,e,t)];if(this.style){var s=this.name==="base"?"global-style":"".concat(this.name,"-style"),n=Ii(this.style,{dt:an}),o=on(et.transformCSS(s,n)),a=Object.entries(t).reduce(function(l,u){var c=Sp(u,2),d=c[0],h=c[1];return l.push("".concat(d,'="').concat(h,'"'))&&l},[]).join(" ");De(o)&&i.push('<style type="text/css" data-primevue-style-id="'.concat(s,'" ').concat(a,">").concat(o,"</style>"))}return i.join("")},extend:function(e){return lu(lu({},this),{},{css:void 0,style:void 0},e)}},Ao=Gh();function Tn(r){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(r)}function Pp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,i)}return t}function So(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pp(Object(t),!0).forEach(function(i){gD(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pp(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function gD(r,e,t){return(e=yD(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yD(r){var e=vD(r,"string");return Tn(e)=="symbol"?e:e+""}function vD(r,e){if(Tn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Tn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var _D={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[Qe.STARTS_WITH,Qe.CONTAINS,Qe.NOT_CONTAINS,Qe.ENDS_WITH,Qe.EQUALS,Qe.NOT_EQUALS],numeric:[Qe.EQUALS,Qe.NOT_EQUALS,Qe.LESS_THAN,Qe.LESS_THAN_OR_EQUAL_TO,Qe.GREATER_THAN,Qe.GREATER_THAN_OR_EQUAL_TO],date:[Qe.DATE_IS,Qe.DATE_IS_NOT,Qe.DATE_BEFORE,Qe.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},bD=Symbol();function xD(r,e){var t={config:fn(e)};return r.config.globalProperties.$primevue=t,r.provide(bD,t),wD(),TD(r,t),t}var ds=[];function wD(){Tr.clear(),ds.forEach(function(r){return r==null?void 0:r()}),ds=[]}function TD(r,e){var t=V(!1),i=function(){var u;if(((u=e.config)===null||u===void 0?void 0:u.theme)!=="none"&&!et.isStyleNameLoaded("common")){var c,d,h=((c=es.getCommonTheme)===null||c===void 0?void 0:c.call(es))||{},f=h.primitive,p=h.semantic,m=h.global,g=h.style,v={nonce:(d=e.config)===null||d===void 0||(d=d.csp)===null||d===void 0?void 0:d.nonce};es.load(f==null?void 0:f.css,So({name:"primitive-variables"},v)),es.load(p==null?void 0:p.css,So({name:"semantic-variables"},v)),es.load(m==null?void 0:m.css,So({name:"global-variables"},v)),es.loadStyle(So({name:"global-style"},v),g),et.setLoadedStyleName("common")}};Tr.on("theme:change",function(l){t.value||(r.config.globalProperties.$primevue.config.theme=l,t.value=!0)});var s=xe(e.config,function(l,u){Ao.emit("config:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),n=xe(function(){return e.config.ripple},function(l,u){Ao.emit("config:ripple:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),o=xe(function(){return e.config.theme},function(l,u){t.value||et.setTheme(l),e.config.unstyled||i(),t.value=!1,Ao.emit("config:theme:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!1}),a=xe(function(){return e.config.unstyled},function(l,u){!l&&e.config.theme&&i(),Ao.emit("config:unstyled:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0});ds.push(s),ds.push(n),ds.push(o),ds.push(a)}var AD={install:function(e,t){var i=Nk(_D,t);xD(e,i)}},Eo=Gh(),SD=Symbol(),ED={install:function(e){var t={add:function(s){Eo.emit("add",s)},remove:function(s){Eo.emit("remove",s)},removeGroup:function(s){Eo.emit("remove-group",s)},removeAllGroups:function(){Eo.emit("remove-all-groups")}};e.config.globalProperties.$toast=t,e.provide(SD,t)}};const CD={root:{class:["yun-tooltip","yun-tooltip-top"]},arrow:{class:"yun-tooltip-arrow"},text:{class:"yun-tooltip-text"}},PD={directives:{tooltip:CD}},RD=r=>{const{router:e,app:t}=r;t.use(I_),t.use(AD,{unstyled:!0,pt:{...PD,dock:{root:"yun-dock",list:"yun-dock-list",listContainer:"yun-dock-list-container",item:"yun-dock-item",itemLink:"yun-dock-item-link"}}}),t.use(ED),e.afterEach(()=>{const i=_t();i.fullscreenMenu.isOpen&&i.fullscreenMenu.toggle()})};var Za=function(){return typeof document<"u"&&typeof window<"u"},ID=function(e,t){return new Promise(function(i,s){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");if(o.async=!0,o.src=e,o.charset="utf-8",t){var a=document.createElement("link");a.href=t,a.rel="preconnect",n.appendChild(a)}n.appendChild(o),o.onload=i,o.onerror=s})},d0=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.keys(t).forEach(function(i){e[i]=t[i]})},f0=fn({property:null,isEnabled:!0,disableScriptLoader:!1,useDebugger:!1,globalObjectName:"gtag",dataLayerName:"dataLayer",resourceURL:"https://www.googletagmanager.com/gtag/js",preconnectOrigin:"https://www.googletagmanager.com",customResource:null,appName:null,appId:null,appVersion:null}),fi=function(){return om(f0)},p0=U(function(){var r=fi(),e=r.property;if(e.value)return Array.isArray(e.value)?e.value.find(function(t){return t.default===!0})||e.value[0]:e.value}),MD=U(function(){var r=fi(),e=r.property;return!!(e.value&&e.value.id!==null)}),An=U(function(){var r=fi(),e=r.property;return Array.isArray(e.value)?e.value:[e.value]}),m0=U(function(){var r=fi(),e=r.isEnabled,t=p0.value;return!!(t&&t.id&&e.value)}),Vn=function(){var r;if(Za()){for(var e=fi(),t=e.globalObjectName,i=e.useDebugger,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];i.value&&console.warn("[vue-gtag] Debugger:",n),(r=window)[t.value].apply(r,n)}},zh=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];An.value.forEach(function(i){Vn.apply(void 0,["config",i.id].concat(e))})},kD=function(r){zh({custom_map:r})},DD=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Za()&&An.value.forEach(function(e){window["ga-disable-".concat(e.id)]=r})},Wi=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign({},e);!t.send_to&&An.value.length>1&&(t.send_to=An.value.map(function(i){return i.id})),Vn("event",r,t)},OD=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Wi.apply(void 0,["exception"].concat(e))},LD=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];zh.apply(void 0,["linker"].concat(e))},g0=function(r){var e={};typeof r=="string"?e={page_path:r,page_location:window.location.href}:e=r,typeof e.send_page_view>"u"&&(e.send_page_view=!0),Wi("page_view",e)},BD=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Wi.apply(void 0,["purchase"].concat(e))},FD=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Wi.apply(void 0,["refund"].concat(e))},y0=function(){for(var r=fi(),e=r.appName,t=r.appId,i=r.appVersion,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];var a=n[0],l={};typeof a=="string"?l={screen_name:a}:l=a,l.app_name==null&&e.value!=null&&(l.app_name=e.value),l.app_id==null&&t.value!=null&&(l.app_id=t.value),l.app_version==null&&i.value!=null&&(l.app_version=i.value),Wi("screen_view",l)},ND=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Vn.apply(void 0,["set"].concat(e))},$D=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Wi.apply(void 0,["timing_complete"].concat(e))},UD=Object.freeze({__proto__:null,config:zh,customMap:kD,disable:DD,event:Wi,exception:OD,linker:LD,pageview:g0,purchase:BD,query:Vn,refund:FD,screenview:y0,set:ND,time:$D}),Rp=V(!1),Ip=V(!1),HD=function(){var e=fi(),t=e.disableScriptLoader,i=e.preconnectOrigin,s=e.resourceURL,n=e.dataLayerName;if(!(!Za()||!MD.value||Ip.value)){if(Ip.value=!0,An.value.forEach(function(a){var l=Object.assign({send_page_view:!1},a.params);Vn("config",a.id,l)}),t.value){Rp.value=!0;return}var o="".concat(s.value,"?id=").concat(p0.value.id,"&l=").concat(n.value);ID(o,i.value).then(function(){Rp.value=!0})}},GD=function(){xe(function(){return m0.value},function(e){return e&&HD()},{immediate:!0})},zD=function(){if(Za()){var r=fi(),e=r.globalObjectName,t=r.dataLayerName;window[e.value]==null&&(window[t.value]=window[t.value]||[],window[e.value]=function(){window[t.value].push(arguments)}),window[e.value]("js",new Date)}},v0=fn({template:null,useScreenview:!1,skipSamePath:!0}),_0=function(){return om(v0)},jD=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=_0(),s=i.template,n=i.useScreenview,o=s.value?s.value(e,t):null;return o||(n.value?{screen_name:e.name}:{page_title:e.name,page_path:e.path,page_location:window.location.href})},Mp=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=_0(),s=i.useScreenview,n=i.skipSamePath;if(!(n.value&&e.path===t.path)){var o=jD(e,t);s.value?y0(o):g0(o)}},VD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d0(v0,t),xe(function(){return m0.value},function(i){i&&e.isReady().then(function(){ri(function(){Mp(e.currentRoute.value)}),e.afterEach(function(s,n){ri(function(){Mp(s,n)})})})},{immediate:!0})},WD={install:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d0(f0,t),zD(),GD(),e.config.globalProperties.$gtag=UD}};const XD=({isClient:r,app:e,router:t})=>{r&&(e.use(WD,{property:{id:"G-1LL0D86CY9"}}),VD(t))},YD=r=>{XD(r)},ft={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},kp={silent:{level:-1},fatal:{level:ft.fatal},error:{level:ft.error},warn:{level:ft.warn},log:{level:ft.log},info:{level:ft.info},success:{level:ft.success},fail:{level:ft.fail},ready:{level:ft.info},start:{level:ft.info},box:{level:ft.info},debug:{level:ft.debug},trace:{level:ft.trace},verbose:{level:ft.verbose}};function uu(r){if(r===null||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Rc(r,e,t=".",i){if(!uu(e))return Rc(r,{},t);const s=Object.assign({},e);for(const n in r){if(n==="__proto__"||n==="constructor")continue;const o=r[n];o!=null&&(Array.isArray(o)&&Array.isArray(s[n])?s[n]=[...o,...s[n]]:uu(o)&&uu(s[n])?s[n]=Rc(o,s[n],(t?`${t}.`:"")+n.toString()):s[n]=o)}return s}function qD(r){return(...e)=>e.reduce((t,i)=>Rc(t,i,""),{})}const KD=qD();function ZD(r){return Object.prototype.toString.call(r)==="[object Object]"}function JD(r){return!(!ZD(r)||!r.message&&!r.args||r.stack)}let cu=!1;const Dp=[];class Je{constructor(e={}){Ve(this,"options");Ve(this,"_lastLog");Ve(this,"_mockFn");const t=e.types||kp;this.options=KD({...e,defaults:{...e.defaults},level:hu(e.level,t),reporters:[...e.reporters||[]]},{types:kp,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const i in t){const s={type:i,...this.options.defaults,...t[i]};this[i]=this._wrapLogFn(s),this[i].raw=this._wrapLogFn(s,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=hu(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new Je({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(t!==-1)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=i=>{this[t].raw(String(i).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){cu=!0}resumeLogs(){cu=!1;const e=Dp.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,typeof t=="function")for(const i in this.options.types)this[i]=t(i,this.options.types[i])||this[i],this[i].raw=this[i]}_wrapLogFn(e,t){return(...i)=>{if(cu){Dp.push([this,e,i,t]);return}return this._logFn(e,i,t)}}_logFn(e,t,i){if((e.level||0)>this.level)return!1;const s={date:new Date,args:[],...e,level:hu(e.level,this.options.types)};!i&&t.length===1&&JD(t[0])?Object.assign(s,t[0]):s.args=[...t],s.message&&(s.args.unshift(s.message),delete s.message),s.additional&&(Array.isArray(s.additional)||(s.additional=s.additional.split(`
`)),s.args.push(`
`+s.additional.join(`
`)),delete s.additional),s.type=typeof s.type=="string"?s.type.toLowerCase():"log",s.tag=typeof s.tag=="string"?s.tag:"";const n=(a=!1)=>{const l=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&l>0){const u=[...this._lastLog.object.args];l>1&&u.push(`(repeated ${l} times)`),this._log({...this._lastLog.object,args:u}),this._lastLog.count=1}a&&(this._lastLog.object=s,this._log(s))};clearTimeout(this._lastLog.timeout);const o=this._lastLog.time&&s.date?s.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=s.date,o<this.options.throttle)try{const a=JSON.stringify([s.type,s.tag,s.args]),l=this._lastLog.serialized===a;if(this._lastLog.serialized=a,l&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(n,this.options.throttle);return}}catch{}n(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function hu(r,e={},t=3){return r===void 0?t:typeof r=="number"?r:e[r]&&e[r].level!==void 0?e[r].level:t}Je.prototype.add=Je.prototype.addReporter;Je.prototype.remove=Je.prototype.removeReporter;Je.prototype.clear=Je.prototype.removeReporter;Je.prototype.withScope=Je.prototype.withTag;Je.prototype.mock=Je.prototype.mockTypes;Je.prototype.pause=Je.prototype.pauseLogs;Je.prototype.resume=Je.prototype.resumeLogs;function QD(r={}){return new Je(r)}class eO{constructor(e){Ve(this,"options");Ve(this,"defaultColor");Ve(this,"levelColorMap");Ve(this,"typeColorMap");this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:e===1?console.__warn||console.warn:console.__log||console.log}log(e){const t=this._getLogFn(e.level),i=e.type==="log"?"":e.type,s=e.tag||"",o=`
      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[s,i].filter(Boolean).join(":")}`;typeof e.args[0]=="string"?t(`${a}%c ${e.args[0]}`,o,"",...e.args.slice(1)):t(a,o,...e.args)}}function tO(r={}){return QD({reporters:r.reporters||[new eO({})],prompt(t,i={}){return i.type==="confirm"?Promise.resolve(confirm(t)):Promise.resolve(prompt(t))},...r})}tO();const rO=["top","right","bottom","left"],Op=["start","end"],Lp=rO.reduce((r,e)=>r.concat(e,e+"-"+Op[0],e+"-"+Op[1]),[]),Sn=Math.min,Si=Math.max,iO={left:"right",right:"left",bottom:"top",top:"bottom"},sO={start:"end",end:"start"};function Ic(r,e,t){return Si(r,Sn(e,t))}function Xi(r,e){return typeof r=="function"?r(e):r}function gr(r){return r.split("-")[0]}function jt(r){return r.split("-")[1]}function b0(r){return r==="x"?"y":"x"}function jh(r){return r==="y"?"height":"width"}function $i(r){return["top","bottom"].includes(gr(r))?"y":"x"}function Vh(r){return b0($i(r))}function x0(r,e,t){t===void 0&&(t=!1);const i=jt(r),s=Vh(r),n=jh(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(o=_a(o)),[o,_a(o)]}function nO(r){const e=_a(r);return[va(r),e,va(e)]}function va(r){return r.replace(/start|end/g,e=>sO[e])}function oO(r,e,t){const i=["left","right"],s=["right","left"],n=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?n:o;default:return[]}}function aO(r,e,t,i){const s=jt(r);let n=oO(gr(r),t==="start",i);return s&&(n=n.map(o=>o+"-"+s),e&&(n=n.concat(n.map(va)))),n}function _a(r){return r.replace(/left|right|bottom|top/g,e=>iO[e])}function lO(r){return{top:0,right:0,bottom:0,left:0,...r}}function w0(r){return typeof r!="number"?lO(r):{top:r,right:r,bottom:r,left:r}}function ln(r){const{x:e,y:t,width:i,height:s}=r;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function Bp(r,e,t){let{reference:i,floating:s}=r;const n=$i(e),o=Vh(e),a=jh(o),l=gr(e),u=n==="y",c=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let f;switch(l){case"top":f={x:c,y:i.y-s.height};break;case"bottom":f={x:c,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-s.width,y:d};break;default:f={x:i.x,y:i.y}}switch(jt(e)){case"start":f[o]-=h*(t&&u?-1:1);break;case"end":f[o]+=h*(t&&u?-1:1);break}return f}const uO=async(r,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:n=[],platform:o}=t,a=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:r,floating:e,strategy:s}),{x:c,y:d}=Bp(u,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:_,y,data:b,reset:w}=await v({x:c,y:d,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:u,platform:o,elements:{reference:r,floating:e}});c=_??c,d=y??d,f={...f,[g]:{...f[g],...b}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:s}):w.rects),{x:c,y:d}=Bp(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:s,middlewareData:f}};async function Ja(r,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:n,rects:o,elements:a,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Xi(e,r),p=w0(f),g=a[h?d==="floating"?"reference":"floating":d],v=ln(await n.getClippingRect({element:(t=await(n.isElement==null?void 0:n.isElement(g)))==null||t?g:g.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),_=d==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(n.getOffsetParent==null?void 0:n.getOffsetParent(a.floating)),b=await(n.isElement==null?void 0:n.isElement(y))?await(n.getScale==null?void 0:n.getScale(y))||{x:1,y:1}:{x:1,y:1},w=ln(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:y,strategy:l}):_);return{top:(v.top-w.top+p.top)/b.y,bottom:(w.bottom-v.bottom+p.bottom)/b.y,left:(v.left-w.left+p.left)/b.x,right:(w.right-v.right+p.right)/b.x}}const cO=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:i,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Xi(r,e)||{};if(u==null)return{};const d=w0(c),h={x:t,y:i},f=Vh(s),p=jh(f),m=await o.getDimensions(u),g=f==="y",v=g?"top":"left",_=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=n.reference[p]+n.reference[f]-h[f]-n.floating[p],w=h[f]-n.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let x=S?S[y]:0;(!x||!await(o.isElement==null?void 0:o.isElement(S)))&&(x=a.floating[y]||n.floating[p]);const A=b/2-w/2,C=x/2-m[p]/2-1,E=Sn(d[v],C),D=Sn(d[_],C),M=E,T=x-m[p]-D,P=x/2-m[p]/2+A,L=Ic(M,P,T),j=!l.arrow&&jt(s)!=null&&P!==L&&n.reference[p]/2-(P<M?E:D)-m[p]/2<0,$=j?P<M?P-M:P-T:0;return{[f]:h[f]+$,data:{[f]:L,centerOffset:P-L-$,...j&&{alignmentOffset:$}},reset:j}}});function hO(r,e,t){return(r?[...t.filter(s=>jt(s)===r),...t.filter(s=>jt(s)!==r)]:t.filter(s=>gr(s)===s)).filter(s=>r?jt(s)===r||(e?va(s)!==s:!1):!0)}const dO=function(r){return r===void 0&&(r={}),{name:"autoPlacement",options:r,async fn(e){var t,i,s;const{rects:n,middlewareData:o,placement:a,platform:l,elements:u}=e,{crossAxis:c=!1,alignment:d,allowedPlacements:h=Lp,autoAlignment:f=!0,...p}=Xi(r,e),m=d!==void 0||h===Lp?hO(d||null,f,h):h,g=await Ja(e,p),v=((t=o.autoPlacement)==null?void 0:t.index)||0,_=m[v];if(_==null)return{};const y=x0(_,n,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==_)return{reset:{placement:m[0]}};const b=[g[gr(_)],g[y[0]],g[y[1]]],w=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:_,overflows:b}],S=m[v+1];if(S)return{data:{index:v+1,overflows:w},reset:{placement:S}};const x=w.map(E=>{const D=jt(E.placement);return[E.placement,D&&c?E.overflows.slice(0,2).reduce((M,T)=>M+T,0):E.overflows[0],E.overflows]}).sort((E,D)=>E[1]-D[1]),C=((s=x.filter(E=>E[2].slice(0,jt(E[0])?2:3).every(D=>D<=0))[0])==null?void 0:s[0])||x[0][0];return C!==a?{data:{index:v+1,overflows:w},reset:{placement:C}}:{}}}},fO=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,i;const{placement:s,middlewareData:n,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Xi(r,e);if((t=n.arrow)!=null&&t.alignmentOffset)return{};const v=gr(s),_=$i(a),y=gr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=h||(y||!m?[_a(a)]:nO(a)),S=p!=="none";!h&&S&&w.push(...aO(a,m,p,b));const x=[a,...w],A=await Ja(e,g),C=[];let E=((i=n.flip)==null?void 0:i.overflows)||[];if(c&&C.push(A[v]),d){const P=x0(s,o,b);C.push(A[P[0]],A[P[1]])}if(E=[...E,{placement:s,overflows:C}],!C.every(P=>P<=0)){var D,M;const P=(((D=n.flip)==null?void 0:D.index)||0)+1,L=x[P];if(L)return{data:{index:P,overflows:E},reset:{placement:L}};let j=(M=E.filter($=>$.overflows[0]<=0).sort(($,W)=>$.overflows[1]-W.overflows[1])[0])==null?void 0:M.placement;if(!j)switch(f){case"bestFit":{var T;const $=(T=E.filter(W=>{if(S){const ne=$i(W.placement);return ne===_||ne==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ne=>ne>0).reduce((ne,O)=>ne+O,0)]).sort((W,ne)=>W[1]-ne[1])[0])==null?void 0:T[0];$&&(j=$);break}case"initialPlacement":j=a;break}if(s!==j)return{reset:{placement:j}}}return{}}}};async function pO(r,e){const{placement:t,platform:i,elements:s}=r,n=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=gr(t),a=jt(t),l=$i(t)==="y",u=["left","top"].includes(o)?-1:1,c=n&&l?-1:1,d=Xi(e,r);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const mO=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,i;const{x:s,y:n,placement:o,middlewareData:a}=e,l=await pO(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},gO=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:n=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y:_}=g;return{x:v,y:_}}},...l}=Xi(r,e),u={x:t,y:i},c=await Ja(e,l),d=$i(gr(s)),h=b0(d);let f=u[h],p=u[d];if(n){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",_=f+c[g],y=f-c[v];f=Ic(_,f,y)}if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=p+c[g],y=p-c[v];p=Ic(_,p,y)}const m=a.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-t,y:m.y-i,enabled:{[h]:n,[d]:o}}}}}},yO=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,i;const{placement:s,rects:n,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Xi(r,e),c=await Ja(e,u),d=gr(s),h=jt(s),f=$i(s)==="y",{width:p,height:m}=n.floating;let g,v;d==="top"||d==="bottom"?(g=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,g=h==="end"?"top":"bottom");const _=m-c.top-c.bottom,y=p-c.left-c.right,b=Sn(m-c[g],_),w=Sn(p-c[v],y),S=!e.middlewareData.shift;let x=b,A=w;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=y),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(x=_),S&&!h){const E=Si(c.left,0),D=Si(c.right,0),M=Si(c.top,0),T=Si(c.bottom,0);f?A=p-2*(E!==0||D!==0?E+D:Si(c.left,c.right)):x=m-2*(M!==0||T!==0?M+T:Si(c.top,c.bottom))}await l({...e,availableWidth:A,availableHeight:x});const C=await o.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Et(r){var e;return((e=r.ownerDocument)==null?void 0:e.defaultView)||window}function dr(r){return Et(r).getComputedStyle(r)}const Fp=Math.min,un=Math.max,ba=Math.round;function T0(r){const e=dr(r);let t=parseFloat(e.width),i=parseFloat(e.height);const s=r.offsetWidth,n=r.offsetHeight,o=ba(t)!==s||ba(i)!==n;return o&&(t=s,i=n),{width:t,height:i,fallback:o}}function ai(r){return S0(r)?(r.nodeName||"").toLowerCase():""}let Co;function A0(){if(Co)return Co;const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?(Co=r.brands.map(e=>e.brand+"/"+e.version).join(" "),Co):navigator.userAgent}function fr(r){return r instanceof Et(r).HTMLElement}function ei(r){return r instanceof Et(r).Element}function S0(r){return r instanceof Et(r).Node}function Np(r){return typeof ShadowRoot>"u"?!1:r instanceof Et(r).ShadowRoot||r instanceof ShadowRoot}function Qa(r){const{overflow:e,overflowX:t,overflowY:i,display:s}=dr(r);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function vO(r){return["table","td","th"].includes(ai(r))}function Mc(r){const e=/firefox/i.test(A0()),t=dr(r),i=t.backdropFilter||t.WebkitBackdropFilter;return t.transform!=="none"||t.perspective!=="none"||!!i&&i!=="none"||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"||["transform","perspective"].some(s=>t.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const n=t.contain;return n!=null&&n.includes(s)})}function E0(){return!/^((?!chrome|android).)*safari/i.test(A0())}function Wh(r){return["html","body","#document"].includes(ai(r))}function C0(r){return ei(r)?r:r.contextElement}const P0={x:1,y:1};function xs(r){const e=C0(r);if(!fr(e))return P0;const t=e.getBoundingClientRect(),{width:i,height:s,fallback:n}=T0(e);let o=(n?ba(t.width):t.width)/i,a=(n?ba(t.height):t.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function En(r,e,t,i){var s,n;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=r.getBoundingClientRect(),a=C0(r);let l=P0;e&&(i?ei(i)&&(l=xs(i)):l=xs(r));const u=a?Et(a):window,c=!E0()&&t;let d=(o.left+(c&&((s=u.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,h=(o.top+(c&&((n=u.visualViewport)==null?void 0:n.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){const m=Et(a),g=i&&ei(i)?Et(i):i;let v=m.frameElement;for(;v&&i&&g!==m;){const _=xs(v),y=v.getBoundingClientRect(),b=getComputedStyle(v);y.x+=(v.clientLeft+parseFloat(b.paddingLeft))*_.x,y.y+=(v.clientTop+parseFloat(b.paddingTop))*_.y,d*=_.x,h*=_.y,f*=_.x,p*=_.y,d+=y.x,h+=y.y,v=Et(v).frameElement}}return{width:f,height:p,top:h,right:d+f,bottom:h+p,left:d,x:d,y:h}}function ti(r){return((S0(r)?r.ownerDocument:r.document)||window.document).documentElement}function el(r){return ei(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function R0(r){return En(ti(r)).left+el(r).scrollLeft}function Cn(r){if(ai(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Np(r)&&r.host||ti(r);return Np(e)?e.host:e}function I0(r){const e=Cn(r);return Wh(e)?e.ownerDocument.body:fr(e)&&Qa(e)?e:I0(e)}function xa(r,e){var t;e===void 0&&(e=[]);const i=I0(r),s=i===((t=r.ownerDocument)==null?void 0:t.body),n=Et(i);return s?e.concat(n,n.visualViewport||[],Qa(i)?i:[]):e.concat(i,xa(i))}function $p(r,e,t){return e==="viewport"?ln(function(i,s){const n=Et(i),o=ti(i),a=n.visualViewport;let l=o.clientWidth,u=o.clientHeight,c=0,d=0;if(a){l=a.width,u=a.height;const h=E0();(h||!h&&s==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:l,height:u,x:c,y:d}}(r,t)):ei(e)?ln(function(i,s){const n=En(i,!0,s==="fixed"),o=n.top+i.clientTop,a=n.left+i.clientLeft,l=fr(i)?xs(i):{x:1,y:1};return{width:i.clientWidth*l.x,height:i.clientHeight*l.y,x:a*l.x,y:o*l.y}}(e,t)):ln(function(i){const s=ti(i),n=el(i),o=i.ownerDocument.body,a=un(s.scrollWidth,s.clientWidth,o.scrollWidth,o.clientWidth),l=un(s.scrollHeight,s.clientHeight,o.scrollHeight,o.clientHeight);let u=-n.scrollLeft+R0(i);const c=-n.scrollTop;return dr(o).direction==="rtl"&&(u+=un(s.clientWidth,o.clientWidth)-a),{width:a,height:l,x:u,y:c}}(ti(r)))}function Up(r){return fr(r)&&dr(r).position!=="fixed"?r.offsetParent:null}function Hp(r){const e=Et(r);let t=Up(r);for(;t&&vO(t)&&dr(t).position==="static";)t=Up(t);return t&&(ai(t)==="html"||ai(t)==="body"&&dr(t).position==="static"&&!Mc(t))?e:t||function(i){let s=Cn(i);for(;fr(s)&&!Wh(s);){if(Mc(s))return s;s=Cn(s)}return null}(r)||e}function _O(r,e,t){const i=fr(e),s=ti(e),n=En(r,!0,t==="fixed",e);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&t!=="fixed")if((ai(e)!=="body"||Qa(s))&&(o=el(e)),fr(e)){const l=En(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else s&&(a.x=R0(s));return{x:n.left+o.scrollLeft-a.x,y:n.top+o.scrollTop-a.y,width:n.width,height:n.height}}const bO={getClippingRect:function(r){let{element:e,boundary:t,rootBoundary:i,strategy:s}=r;const n=t==="clippingAncestors"?function(u,c){const d=c.get(u);if(d)return d;let h=xa(u).filter(g=>ei(g)&&ai(g)!=="body"),f=null;const p=dr(u).position==="fixed";let m=p?Cn(u):u;for(;ei(m)&&!Wh(m);){const g=dr(m),v=Mc(m);(p?v||f:v||g.position!=="static"||!f||!["absolute","fixed"].includes(f.position))?f=g:h=h.filter(_=>_!==m),m=Cn(m)}return c.set(u,h),h}(e,this._c):[].concat(t),o=[...n,i],a=o[0],l=o.reduce((u,c)=>{const d=$p(e,c,s);return u.top=un(d.top,u.top),u.right=Fp(d.right,u.right),u.bottom=Fp(d.bottom,u.bottom),u.left=un(d.left,u.left),u},$p(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(r){let{rect:e,offsetParent:t,strategy:i}=r;const s=fr(t),n=ti(t);if(t===n)return e;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((s||!s&&i!=="fixed")&&((ai(t)!=="body"||Qa(n))&&(o=el(t)),fr(t))){const u=En(t);a=xs(t),l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},isElement:ei,getDimensions:function(r){return fr(r)?T0(r):r.getBoundingClientRect()},getOffsetParent:Hp,getDocumentElement:ti,getScale:xs,async getElementRects(r){let{reference:e,floating:t,strategy:i}=r;const s=this.getOffsetParent||Hp,n=this.getDimensions;return{reference:_O(e,await s(t),i),floating:{x:0,y:0,...await n(t)}}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>dr(r).direction==="rtl"},xO=(r,e,t)=>{const i=new Map,s={platform:bO,...t},n={...s.platform,_c:i};return uO(r,e,{...s,platform:n})};function M0(r,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(typeof e[t]=="object"&&r[t]?M0(r[t],e[t]):r[t]=e[t])}const Vt={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:r=>[...r,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Pn(r,e){let t=Vt.themes[r]||{},i;do i=t[e],typeof i>"u"?t.$extend?t=Vt.themes[t.$extend]||{}:(t=null,i=Vt[e]):t=null;while(t);return i}function wO(r){const e=[r];let t=Vt.themes[r]||{};do t.$extend&&!t.$resetCss?(e.push(t.$extend),t=Vt.themes[t.$extend]||{}):t=null;while(t);return e.map(i=>`v-popper--theme-${i}`)}function Gp(r){const e=[r];let t=Vt.themes[r]||{};do t.$extend?(e.push(t.$extend),t=Vt.themes[t.$extend]||{}):t=null;while(t);return e}let Cs=!1;if(typeof window<"u"){Cs=!1;try{const r=Object.defineProperty({},"passive",{get(){Cs=!0}});window.addEventListener("test",null,r)}catch{}}let k0=!1;typeof window<"u"&&typeof navigator<"u"&&(k0=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const D0=["auto","top","bottom","left","right"].reduce((r,e)=>r.concat([e,`${e}-start`,`${e}-end`]),[]),zp={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},jp={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function Vp(r,e){const t=r.indexOf(e);t!==-1&&r.splice(t,1)}function du(){return new Promise(r=>requestAnimationFrame(()=>{requestAnimationFrame(r)}))}const $t=[];let vi=null;const Wp={};function Xp(r){let e=Wp[r];return e||(e=Wp[r]=[]),e}let kc=function(){};typeof window<"u"&&(kc=window.Element);function ge(r){return function(e){return Pn(e.theme,r)}}const fu="__floating-vue__popper",O0=()=>ee({name:"VPopper",provide(){return{[fu]:{parentPopper:this}}},inject:{[fu]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:ge("disabled")},positioningDisabled:{type:Boolean,default:ge("positioningDisabled")},placement:{type:String,default:ge("placement"),validator:r=>D0.includes(r)},delay:{type:[String,Number,Object],default:ge("delay")},distance:{type:[Number,String],default:ge("distance")},skidding:{type:[Number,String],default:ge("skidding")},triggers:{type:Array,default:ge("triggers")},showTriggers:{type:[Array,Function],default:ge("showTriggers")},hideTriggers:{type:[Array,Function],default:ge("hideTriggers")},popperTriggers:{type:Array,default:ge("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:ge("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:ge("popperHideTriggers")},container:{type:[String,Object,kc,Boolean],default:ge("container")},boundary:{type:[String,kc],default:ge("boundary")},strategy:{type:String,validator:r=>["absolute","fixed"].includes(r),default:ge("strategy")},autoHide:{type:[Boolean,Function],default:ge("autoHide")},handleResize:{type:Boolean,default:ge("handleResize")},instantMove:{type:Boolean,default:ge("instantMove")},eagerMount:{type:Boolean,default:ge("eagerMount")},popperClass:{type:[String,Array,Object],default:ge("popperClass")},computeTransformOrigin:{type:Boolean,default:ge("computeTransformOrigin")},autoMinSize:{type:Boolean,default:ge("autoMinSize")},autoSize:{type:[Boolean,String],default:ge("autoSize")},autoMaxSize:{type:Boolean,default:ge("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:ge("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:ge("preventOverflow")},overflowPadding:{type:[Number,String],default:ge("overflowPadding")},arrowPadding:{type:[Number,String],default:ge("arrowPadding")},arrowOverflow:{type:Boolean,default:ge("arrowOverflow")},flip:{type:Boolean,default:ge("flip")},shift:{type:Boolean,default:ge("shift")},shiftCrossAxis:{type:Boolean,default:ge("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:ge("noAutoFocus")},disposeTimeout:{type:Number,default:ge("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(r=>r.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var r;return(r=this[fu])==null?void 0:r.parentPopper},hasPopperShowTriggerHover(){var r,e;return((r=this.popperTriggers)==null?void 0:r.includes("hover"))||((e=this.popperShowTriggers)==null?void 0:e.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(r){r?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((r,e)=>(r[e]="$_computePosition",r),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:r=null,skipDelay:e=!1,force:t=!1}={}){var i,s;(i=this.parentPopper)!=null&&i.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(t||!this.disabled)&&(((s=this.parentPopper)==null?void 0:s.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(r,e),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:r=null,skipDelay:e=!1}={}){var t;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:e}),this.parentPopper.lockedChild=null)},1e3));return}((t=this.parentPopper)==null?void 0:t.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(r,e),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var r;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((r=this.referenceNode)==null?void 0:r.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(e=>e.nodeType===e.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const r={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&r.middleware.push(mO({mainAxis:this.distance,crossAxis:this.skidding}));const e=this.placement.startsWith("auto");if(e?r.middleware.push(dO({alignment:this.placement.split("-")[1]??""})):r.placement=this.placement,this.preventOverflow&&(this.shift&&r.middleware.push(gO({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!e&&this.flip&&r.middleware.push(fO({padding:this.overflowPadding,boundary:this.boundary}))),r.middleware.push(cO({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&r.middleware.push({name:"arrowOverflow",fn:({placement:i,rects:s,middlewareData:n})=>{let o;const{centerOffset:a}=n.arrow;return i.startsWith("top")||i.startsWith("bottom")?o=Math.abs(a)>s.reference.width/2:o=Math.abs(a)>s.reference.height/2,{data:{overflow:o}}}}),this.autoMinSize||this.autoSize){const i=this.autoSize?this.autoSize:this.autoMinSize?"min":null;r.middleware.push({name:"autoSize",fn:({rects:s,placement:n,middlewareData:o})=>{var a;if((a=o.autoSize)!=null&&a.skip)return{};let l,u;return n.startsWith("top")||n.startsWith("bottom")?l=s.reference.width:u=s.reference.height,this.$_innerNode.style[i==="min"?"minWidth":i==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[i==="min"?"minHeight":i==="max"?"maxHeight":"height"]=u!=null?`${u}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,r.middleware.push(yO({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:i,availableHeight:s})=>{this.$_innerNode.style.maxWidth=i!=null?`${i}px`:null,this.$_innerNode.style.maxHeight=s!=null?`${s}px`:null}})));const t=await xO(this.$_referenceNode,this.$_popperNode,r);Object.assign(this.result,{x:t.x,y:t.y,placement:t.placement,strategy:t.strategy,arrow:{...t.middlewareData.arrow,...t.middlewareData.arrowOverflow}})},$_scheduleShow(r,e=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),vi&&this.instantMove&&vi.instantMove&&vi!==this.parentPopper){vi.$_applyHide(!0),this.$_applyShow(!0);return}e?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(r,e=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(vi=this),e?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(r){const e=this.delay;return parseInt(e&&e[r]||e||0)},async $_applyShow(r=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=r,!this.isShown&&(this.$_ensureTeleport(),await du(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...xa(this.$_referenceNode),...xa(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const e=this.$_referenceNode.getBoundingClientRect(),t=this.$_popperNode.querySelector(".v-popper__wrapper"),i=t.parentNode.getBoundingClientRect(),s=e.x+e.width/2-(i.left+t.offsetLeft),n=e.y+e.height/2-(i.top+t.offsetTop);this.result.transformOrigin=`${s}px ${n}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const r=this.showGroup;if(r){let e;for(let t=0;t<$t.length;t++)e=$t[t],e.showGroup!==r&&(e.hide(),e.$emit("close-group"))}$t.push(this),document.body.classList.add("v-popper--some-open");for(const e of Gp(this.theme))Xp(e).push(this),document.body.classList.add(`v-popper--some-open--${e}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await du(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(r=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=r,Vp($t,this),$t.length===0&&document.body.classList.remove("v-popper--some-open");for(const t of Gp(this.theme)){const i=Xp(t);Vp(i,this),i.length===0&&document.body.classList.remove(`v-popper--some-open--${t}`)}vi===this&&(vi=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const e=this.disposeTimeout;e!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},e)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await du(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let r=this.container;if(typeof r=="string"?r=window.document.querySelector(r):r===!1&&(r=this.$_targetNodes[0].parentNode),!r)throw new Error("No container for popover: "+this.container);r.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const r=t=>{this.isShown&&!this.$_hideInProgress||(t.usedByTooltip=!0,!this.$_preventShow&&this.show({event:t}))};this.$_registerTriggerListeners(this.$_targetNodes,zp,this.triggers,this.showTriggers,r),this.$_registerTriggerListeners([this.$_popperNode],zp,this.popperTriggers,this.popperShowTriggers,r);const e=t=>{t.usedByTooltip||this.hide({event:t})};this.$_registerTriggerListeners(this.$_targetNodes,jp,this.triggers,this.hideTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],jp,this.popperTriggers,this.popperHideTriggers,e)},$_registerEventListeners(r,e,t){this.$_events.push({targetNodes:r,eventType:e,handler:t}),r.forEach(i=>i.addEventListener(e,t,Cs?{passive:!0}:void 0))},$_registerTriggerListeners(r,e,t,i,s){let n=t;i!=null&&(n=typeof i=="function"?i(n):i),n.forEach(o=>{const a=e[o];a&&this.$_registerEventListeners(r,a,s)})},$_removeEventListeners(r){const e=[];this.$_events.forEach(t=>{const{targetNodes:i,eventType:s,handler:n}=t;!r||r===s?i.forEach(o=>o.removeEventListener(s,n)):e.push(t)}),this.$_events=e},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(r,e=!1){this.$_showFrameLocked||(this.hide({event:r}),r.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),e&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(r,e){for(const t of this.$_targetNodes){const i=t.getAttribute(r);i&&(t.removeAttribute(r),t.setAttribute(e,i))}},$_applyAttrsToTarget(r){for(const e of this.$_targetNodes)for(const t in r){const i=r[t];i==null?e.removeAttribute(t):e.setAttribute(t,i)}},$_updateParentShownChildren(r){let e=this.parentPopper;for(;e;)r?e.shownChildren.add(this.randomId):(e.shownChildren.delete(this.randomId),e.pendingHide&&e.hide()),e=e.parentPopper},$_isAimingPopper(){const r=this.$_referenceNode.getBoundingClientRect();if(cn>=r.left&&cn<=r.right&&hn>=r.top&&hn<=r.bottom){const e=this.$_popperNode.getBoundingClientRect(),t=cn-Gr,i=hn-zr,s=e.left+e.width/2-Gr+(e.top+e.height/2)-zr+e.width+e.height,n=Gr+t*s,o=zr+i*s;return Po(Gr,zr,n,o,e.left,e.top,e.left,e.bottom)||Po(Gr,zr,n,o,e.left,e.top,e.right,e.top)||Po(Gr,zr,n,o,e.right,e.top,e.right,e.bottom)||Po(Gr,zr,n,o,e.left,e.bottom,e.right,e.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(k0){const r=Cs?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",e=>Yp(e,!0),r),document.addEventListener("touchend",e=>qp(e,!0),r)}else window.addEventListener("mousedown",r=>Yp(r,!1),!0),window.addEventListener("click",r=>qp(r,!1),!0);window.addEventListener("resize",AO)}function Yp(r,e){if(Vt.autoHideOnMousedown)L0(r,e);else for(let t=0;t<$t.length;t++){const i=$t[t];try{i.mouseDownContains=i.popperNode().contains(r.target)}catch{}}}function qp(r,e){Vt.autoHideOnMousedown||L0(r,e)}function L0(r,e){const t={};for(let i=$t.length-1;i>=0;i--){const s=$t[i];try{const n=s.containsGlobalTarget=s.mouseDownContains||s.popperNode().contains(r.target);s.pendingHide=!1,requestAnimationFrame(()=>{if(s.pendingHide=!1,!t[s.randomId]&&Kp(s,n,r)){if(s.$_handleGlobalClose(r,e),!r.closeAllPopover&&r.closePopover&&n){let a=s.parentPopper;for(;a;)t[a.randomId]=!0,a=a.parentPopper;return}let o=s.parentPopper;for(;o&&Kp(o,o.containsGlobalTarget,r);)o.$_handleGlobalClose(r,e),o=o.parentPopper}})}catch{}}}function Kp(r,e,t){return t.closeAllPopover||t.closePopover&&e||TO(r,t)&&!e}function TO(r,e){if(typeof r.autoHide=="function"){const t=r.autoHide(e);return r.lastAutoHide=t,t}return r.autoHide}function AO(){for(let r=0;r<$t.length;r++)$t[r].$_computePosition()}let Gr=0,zr=0,cn=0,hn=0;typeof window<"u"&&window.addEventListener("mousemove",r=>{Gr=cn,zr=hn,cn=r.clientX,hn=r.clientY},Cs?{passive:!0}:void 0);function Po(r,e,t,i,s,n,o,a){const l=((o-s)*(e-n)-(a-n)*(r-s))/((a-n)*(t-r)-(o-s)*(i-e)),u=((t-r)*(e-n)-(i-e)*(r-s))/((a-n)*(t-r)-(o-s)*(i-e));return l>=0&&l<=1&&u>=0&&u<=1}const SO={extends:O0()},tl=(r,e)=>{const t=r.__vccOpts||r;for(const[i,s]of e)t[i]=s;return t};function EO(r,e,t,i,s,n){return R(),N("div",{ref:"reference",class:we(["v-popper",{"v-popper--shown":r.slotData.isShown}])},[rt(r.$slots,"default",w_(T_(r.slotData)))],2)}const CO=tl(SO,[["render",EO]]);function PO(){var r=window.navigator.userAgent,e=r.indexOf("MSIE ");if(e>0)return parseInt(r.substring(e+5,r.indexOf(".",e)),10);var t=r.indexOf("Trident/");if(t>0){var i=r.indexOf("rv:");return parseInt(r.substring(i+3,r.indexOf(".",i)),10)}var s=r.indexOf("Edge/");return s>0?parseInt(r.substring(s+5,r.indexOf(".",s)),10):-1}let jo;function Dc(){Dc.init||(Dc.init=!0,jo=PO()!==-1)}var rl={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Dc(),ri(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const r=document.createElement("object");this._resizeObject=r,r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex",-1),r.onload=this.addResizeHandlers,r.type="text/html",jo&&this.$el.appendChild(r),r.data="about:blank",jo||this.$el.appendChild(r)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!jo&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const RO=b_();v_("data-v-b329ee4c");const IO={class:"resize-observer",tabindex:"-1"};__();const MO=RO((r,e,t,i,s,n)=>(R(),ae("div",IO)));rl.render=MO;rl.__scopeId="data-v-b329ee4c";rl.__file="src/components/ResizeObserver.vue";const B0=(r="theme")=>({computed:{themeClass(){return wO(this[r])}}}),kO=ee({name:"VPopperContent",components:{ResizeObserver:rl},mixins:[B0()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(r){return r!=null&&!isNaN(r)?`${r}px`:null}}}),DO=["id","aria-hidden","tabindex","data-popper-placement"],OO={ref:"inner",class:"v-popper__inner"},LO=k("div",{class:"v-popper__arrow-outer"},null,-1),BO=k("div",{class:"v-popper__arrow-inner"},null,-1),FO=[LO,BO];function NO(r,e,t,i,s,n){const o=it("ResizeObserver");return R(),N("div",{id:r.popperId,ref:"popover",class:we(["v-popper__popper",[r.themeClass,r.classes.popperClass,{"v-popper__popper--shown":r.shown,"v-popper__popper--hidden":!r.shown,"v-popper__popper--show-from":r.classes.showFrom,"v-popper__popper--show-to":r.classes.showTo,"v-popper__popper--hide-from":r.classes.hideFrom,"v-popper__popper--hide-to":r.classes.hideTo,"v-popper__popper--skip-transition":r.skipTransition,"v-popper__popper--arrow-overflow":r.result&&r.result.arrow.overflow,"v-popper__popper--no-positioning":!r.result}]]),style:Zr(r.result?{position:r.result.strategy,transform:`translate3d(${Math.round(r.result.x)}px,${Math.round(r.result.y)}px,0)`}:void 0),"aria-hidden":r.shown?"false":"true",tabindex:r.autoHide?0:void 0,"data-popper-placement":r.result?r.result.placement:void 0,onKeyup:e[2]||(e[2]=x_(a=>r.autoHide&&r.$emit("hide"),["esc"]))},[k("div",{class:"v-popper__backdrop",onClick:e[0]||(e[0]=a=>r.autoHide&&r.$emit("hide"))}),k("div",{class:"v-popper__wrapper",style:Zr(r.result?{transformOrigin:r.result.transformOrigin}:void 0)},[k("div",OO,[r.mounted?(R(),N(Be,{key:0},[k("div",null,[rt(r.$slots,"default")]),r.handleResize?(R(),ae(o,{key:0,onNotify:e[1]||(e[1]=a=>r.$emit("resize",a))})):J("",!0)],64)):J("",!0)],512),k("div",{ref:"arrow",class:"v-popper__arrow-container",style:Zr(r.result?{left:r.toPx(r.result.arrow.x),top:r.toPx(r.result.arrow.y)}:void 0)},FO,4)],4)],46,DO)}const F0=tl(kO,[["render",NO]]),N0={methods:{show(...r){return this.$refs.popper.show(...r)},hide(...r){return this.$refs.popper.hide(...r)},dispose(...r){return this.$refs.popper.dispose(...r)},onResize(...r){return this.$refs.popper.onResize(...r)}}};let Oc=function(){};typeof window<"u"&&(Oc=window.Element);const $O=ee({name:"VPopperWrapper",components:{Popper:CO,PopperContent:F0},mixins:[N0,B0("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Oc,Boolean],default:void 0},boundary:{type:[String,Oc],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(r=>r!==this.$refs.popperContent.$el)}}});function UO(r,e,t,i,s,n){const o=it("PopperContent"),a=it("Popper");return R(),ae(a,pn({ref:"popper"},r.$props,{theme:r.finalTheme,"target-nodes":r.getTargetNodes,"popper-node":()=>r.$refs.popperContent.$el,class:[r.themeClass],onShow:e[0]||(e[0]=()=>r.$emit("show")),onHide:e[1]||(e[1]=()=>r.$emit("hide")),"onUpdate:shown":e[2]||(e[2]=l=>r.$emit("update:shown",l)),onApplyShow:e[3]||(e[3]=()=>r.$emit("apply-show")),onApplyHide:e[4]||(e[4]=()=>r.$emit("apply-hide")),onCloseGroup:e[5]||(e[5]=()=>r.$emit("close-group")),onCloseDirective:e[6]||(e[6]=()=>r.$emit("close-directive")),onAutoHide:e[7]||(e[7]=()=>r.$emit("auto-hide")),onResize:e[8]||(e[8]=()=>r.$emit("resize"))}),{default:_e(({popperId:l,isShown:u,shouldMountContent:c,skipTransition:d,autoHide:h,show:f,hide:p,handleResize:m,onResize:g,classes:v,result:_})=>[rt(r.$slots,"default",{shown:u,show:f,hide:p}),X(o,{ref:"popperContent","popper-id":l,theme:r.finalTheme,shown:u,mounted:c,"skip-transition":d,"auto-hide":h,"handle-resize":m,classes:v,result:_,onHide:p,onResize:g},{default:_e(()=>[rt(r.$slots,"popper",{shown:u,hide:p})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Xh=tl($O,[["render",UO]]),HO={...Xh,name:"VDropdown",vPopperTheme:"dropdown"},GO={...Xh,name:"VMenu",vPopperTheme:"menu"},zO={...Xh,name:"VTooltip",vPopperTheme:"tooltip"},jO=ee({name:"VTooltipDirective",components:{Popper:O0(),PopperContent:F0},mixins:[N0],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:r=>Pn(r.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:r=>Pn(r.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(r){if(typeof this.content=="function"&&this.$_isShown&&(r||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const e=++this.$_fetchId,t=this.content(this);t.then?t.then(i=>this.onResult(e,i)):this.onResult(e,t)}},onResult(r,e){r===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=e)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),VO=["innerHTML"],WO=["textContent"];function XO(r,e,t,i,s,n){const o=it("PopperContent"),a=it("Popper");return R(),ae(a,pn({ref:"popper"},r.$attrs,{theme:r.theme,"target-nodes":r.targetNodes,"popper-node":()=>r.$refs.popperContent.$el,onApplyShow:r.onShow,onApplyHide:r.onHide}),{default:_e(({popperId:l,isShown:u,shouldMountContent:c,skipTransition:d,autoHide:h,hide:f,handleResize:p,onResize:m,classes:g,result:v})=>[X(o,{ref:"popperContent",class:we({"v-popper--tooltip-loading":r.loading}),"popper-id":l,theme:r.theme,shown:u,mounted:c,"skip-transition":d,"auto-hide":h,"handle-resize":p,classes:g,result:v,onHide:f,onResize:m},{default:_e(()=>[r.html?(R(),N("div",{key:0,innerHTML:r.finalContent},null,8,VO)):(R(),N("div",{key:1,textContent:de(r.finalContent)},null,8,WO))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const YO=tl(jO,[["render",XO]]),$0="v-popper--has-tooltip";function qO(r,e){let t=r.placement;if(!t&&e)for(const i of D0)e[i]&&(t=i);return t||(t=Pn(r.theme||"tooltip","placement")),t}function U0(r,e,t){let i;const s=typeof e;return s==="string"?i={content:e}:e&&s==="object"?i=e:i={content:!1},i.placement=qO(i,t),i.targetNodes=()=>[r],i.referenceNode=()=>r,i}let pu,Rn,KO=0;function ZO(){if(pu)return;Rn=V([]),pu=nm({name:"VTooltipDirectiveApp",setup(){return{directives:Rn}},render(){return this.directives.map(e=>A_(YO,{...e.options,shown:e.shown||e.options.shown,key:e.id}))},devtools:{hide:!0}});const r=document.createElement("div");document.body.appendChild(r),pu.mount(r)}function JO(r,e,t){ZO();const i=V(U0(r,e,t)),s=V(!1),n={id:KO++,options:i,shown:s};return Rn.value.push(n),r.classList&&r.classList.add($0),r.$_popper={options:i,item:n,show(){s.value=!0},hide(){s.value=!1}}}function H0(r){if(r.$_popper){const e=Rn.value.indexOf(r.$_popper.item);e!==-1&&Rn.value.splice(e,1),delete r.$_popper,delete r.$_popperOldShown,delete r.$_popperMountTarget}r.classList&&r.classList.remove($0)}function Zp(r,{value:e,modifiers:t}){const i=U0(r,e,t);if(!i.content||Pn(i.theme||"tooltip","disabled"))H0(r);else{let s;r.$_popper?(s=r.$_popper,s.options.value=i):s=JO(r,e,t),typeof e.shown<"u"&&e.shown!==r.$_popperOldShown&&(r.$_popperOldShown=e.shown,e.shown?s.show():s.hide())}}const QO={beforeMount:Zp,updated:Zp,beforeUnmount(r){H0(r)}};function Jp(r){r.addEventListener("mousedown",wa),r.addEventListener("click",wa),r.addEventListener("touchstart",G0,Cs?{passive:!0}:!1)}function Qp(r){r.removeEventListener("mousedown",wa),r.removeEventListener("click",wa),r.removeEventListener("touchstart",G0),r.removeEventListener("touchend",z0),r.removeEventListener("touchcancel",j0)}function wa(r){const e=r.currentTarget;r.closePopover=!e.$_vclosepopover_touch,r.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}function G0(r){if(r.changedTouches.length===1){const e=r.currentTarget;e.$_vclosepopover_touch=!0;const t=r.changedTouches[0];e.$_vclosepopover_touchPoint=t,e.addEventListener("touchend",z0),e.addEventListener("touchcancel",j0)}}function z0(r){const e=r.currentTarget;if(e.$_vclosepopover_touch=!1,r.changedTouches.length===1){const t=r.changedTouches[0],i=e.$_vclosepopover_touchPoint;r.closePopover=Math.abs(t.screenY-i.screenY)<20&&Math.abs(t.screenX-i.screenX)<20,r.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}}function j0(r){const e=r.currentTarget;e.$_vclosepopover_touch=!1}const eL={beforeMount(r,{value:e,modifiers:t}){r.$_closePopoverModifiers=t,(typeof e>"u"||e)&&Jp(r)},updated(r,{value:e,oldValue:t,modifiers:i}){r.$_closePopoverModifiers=i,e!==t&&(typeof e>"u"||e?Jp(r):Qp(r))},beforeUnmount(r){Qp(r)}};function tL(r,e={}){r.$_vTooltipInstalled||(r.$_vTooltipInstalled=!0,M0(Vt,e),r.directive("tooltip",QO),r.directive("close-popper",eL),r.component("VTooltip",zO),r.component("VDropdown",HO),r.component("VMenu",GO))}const rL={version:"5.2.2",install:tL,options:Vt};async function iL({app:r},e){const t={};r.use(rL,Object.assign(t,e.value.siteConfig.floatingVue||{}))}const sL=async({head:r,isClient:e,router:t})=>{if(e)return;const i=cg(),{SchemaOrgUnheadPlugin:s}=await Ne(async()=>{const{SchemaOrgUnheadPlugin:n}=await Promise.resolve().then(()=>Kb);return{SchemaOrgUnheadPlugin:n}},void 0);r==null||r.use(s({host:i.value.siteConfig.url||"https://valaxy.site",inLanguage:i.value.siteConfig.lang||"en"},()=>({path:t.currentRoute.value.path,...t.currentRoute.value.meta})))},nL={post:{meta:{text:{t:0,b:{t:2,i:[{t:3}],s:"Total views of this post"}},ci:{t:0,b:{t:2,i:[{t:3}],s:"times"}}}},about:{adb:{t:0,b:{t:2,i:[{t:3}],s:"Advertisement section"}}}},oL={post:{meta:{text:{t:0,b:{t:2,i:[{t:3}],s:"本文总阅读量"}},ci:{t:0,b:{t:2,i:[{t:3}],s:"次"}}}},about:{adb:{t:0,b:{t:2,i:[{t:3}],s:"广告板块"}}}},aL={valaxy_theme_yun:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Theme Yun"}},theme:{outlineTitle:{t:0,b:{t:2,i:[{t:3}],s:"On this page"}}}},lL={valaxy_theme_yun:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy 主题 云"}},theme:{outlineTitle:{t:0,b:{t:2,i:[{t:3}],s:"本页"}}}},uL={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}},go:{t:0,b:{t:2,i:[{t:3}],s:"GO"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"Switch to light mode"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"Switch to dark mode"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"Change languages"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"Appearance"}}},intro:{desc:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Theme Yun"},{t:2,i:[{t:3}],s:"Valaxy"}]}},hi:{t:0,b:{t:2,i:[{t:3,v:"Hi, "},{t:4,k:"name"},{t:3,v:"!"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"Oops! Space collapsed!"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"Archive"}},category:{t:0,b:{t:2,i:[{t:3}],s:"Category"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"Tag"}},album:{t:0,b:{t:2,i:[{t:3}],s:"Album"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"Gallery"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"Menu"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"Archives"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"Categories"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"Tags"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"Overview"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"Table of Contents"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"Return to top"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"DECRYPT"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"Posted on "}},edited:{t:0,b:{t:2,i:[{t:3}],s:"Edited on "}},created:{t:0,b:{t:2,i:[{t:3}],s:"Created"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"Modified"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit this post"}},more:{t:0,b:{t:2,i:[{t:3}],s:"more"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"Untitled"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"This post does not have a Table of Contents"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"Views"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"Related posts"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"View link"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"READ MORE"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"Cover"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"This article was last updated "},{t:4,k:"ago"},{t:3,v:". The information described in this article may have changed."}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"Post author"}},link:{t:0,b:{t:2,i:[{t:3}],s:"Post link"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"Copyright Notice"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"All articles in this blog are licensed under "},{t:5,i:0},{t:3,v:" unless otherwise stated."}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"Powered by "},{t:5,i:0}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"Theme"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"Total Views"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"Total Visitors"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No posts"},{t:2,i:[{t:3}],s:"1 post"},{t:2,i:[{t:4,k:"count"},{t:3,v:" posts"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No categories"},{t:2,i:[{t:3}],s:"1 category"},{t:2,i:[{t:4,k:"count"},{t:3,v:" categories"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No tags"},{t:2,i:[{t:3}],s:"1 tag"},{t:2,i:[{t:4,k:"count"},{t:3,v:" tags"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No album"},{t:2,i:[{t:3}],s:"1 album"},{t:2,i:[{t:4,k:"count"},{t:3,v:" albums"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No photo"},{t:2,i:[{t:3}],s:"1 photo"},{t:2,i:[{t:4,k:"count"},{t:3,v:" photos"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"Uncategorized"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Searching..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"We could not find any results for the search: "},{t:4,k:"query"},{t:3,v:"."}]}},hits_time:{t:0,b:{t:2,i:[{t:4,k:"hits"},{t:3,v:" results found in "},{t:4,k:"time"},{t:3,v:" ms"}]}},hits:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" results found"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:", "}},period:{t:0,b:{t:2,i:[{t:3}],s:". "}},colon:{t:0,b:{t:2,i:[{t:3}],s:": "}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"Donate"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"Word count in article"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"Total words"}},time:{t:0,b:{t:2,i:[{t:3}],s:"Reading time"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"Total reading time"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Day"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Days"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Hour"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Hours"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Minute"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Minutes"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Second"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Seconds"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"Last updated"}}}},cL={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}},go:{t:0,b:{t:2,i:[{t:3}],s:"确定"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"切换亮色模式"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"切换深色模式"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"切换语言"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"外观"}}},intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"主题 Yun"}},hi:{t:0,b:{t:2,i:[{t:3,v:"你好，"},{t:4,k:"name"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"未找到页面"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},category:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},album:{t:0,b:{t:2,i:[{t:3}],s:"相册"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"图片库"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"菜单"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜索"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"站点概览"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"文章目录"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"返回顶部"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"解密"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"发表于"}},edited:{t:0,b:{t:2,i:[{t:3}],s:"更新于"}},created:{t:0,b:{t:2,i:[{t:3}],s:"创建时间"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"修改时间"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"编辑"}},more:{t:0,b:{t:2,i:[{t:3}],s:"更多"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"未命名"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"此文章未包含目录"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"阅读次数"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"评论数"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"相关文章"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"查看链接"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"阅读更多"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"封面"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"本文最后更新于 "},{t:4,k:"ago"},{t:3,v:"，文中所描述的信息可能已发生改变。"}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"本文作者"}},link:{t:0,b:{t:2,i:[{t:3}],s:"本文链接"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"版权声明"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"本博客所有文章除特别声明外，均默认采用 "},{t:5,i:0},{t:3,v:" 许可协议。"}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"由 "},{t:5,i:0},{t:3,v:" 驱动"}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"主题"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"总访问量"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"总访客量"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无文章"},{t:2,i:[{t:3}],s:"共计 1 篇文章"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 篇文章"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无分类"},{t:2,i:[{t:3}],s:"共计 1 个分类"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个分类"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无标签"},{t:2,i:[{t:3}],s:"共计 1 个标签"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个标签"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无相册"},{t:2,i:[{t:3}],s:"共计 1 个相册"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个相册"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无照片"},{t:2,i:[{t:3}],s:"共计 1 张照片"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 张照片"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"未分类"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"找不到您查询的内容: "},{t:4,k:"query"}]}},hits_time:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"hits"},{t:3,v:" 条结果（用时 "},{t:4,k:"time"},{t:3,v:" 毫秒）"}]}},hits:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"count"},{t:3,v:" 条结果"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:"，"}},period:{t:0,b:{t:2,i:[{t:3}],s:"。"}},colon:{t:0,b:{t:2,i:[{t:3}],s:"："}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"打赏"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"本文字数"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总字数"}},time:{t:0,b:{t:2,i:[{t:3}],s:"阅读时长"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总阅读时长"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 天"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 天"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 小时"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 小时"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 分"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 分"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 秒"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 秒"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"最后更新于"}}}},vt={"zh-CN":{},en:{}},Bs=am((r,e,t)=>{if(e&&r[e]&&Array.isArray(r[e])&&Array.isArray(t))return r[e]=t,!0});vt["zh-CN"]=Bs(cL,vt["zh-CN"]);vt.en=Bs(uL,vt.en);vt["zh-CN"]=Bs(lL,vt["zh-CN"]);vt.en=Bs(aL,vt.en);vt["zh-CN"]=Bs(oL,vt["zh-CN"]);vt.en=Bs(nL,vt.en);const em=L_({locale:"",messages:vt});async function hL({app:r,router:e},t){const i=lh("valaxy-locale",(t==null?void 0:t.value.siteConfig.lang)||"en");em.global.locale.value=i.value,r.use(em),e.isReady().then(()=>{})}function dL(r,e){const t=r;hL(r,e),sL(r),F_(r),N_(r),iL(r,e),RD(t),YD(t)}const Lc=cg();function fL(r){r.app.component("AppLink",Nn)}const{redirectRoutes:pL,useVueRouter:mL}=Lc.value.runtimeConfig.redirects;mL&&$c.push(...pL);$c.forEach(r=>{var e;(e=r==null?void 0:r.children)==null||e.forEach(t=>{t.path=encodeURI(t.path)})});function V0(r){return r.filter(e=>{var t,i;return e.children&&(e.children=V0(e.children)),!((i=(t=e.meta)==null?void 0:t.frontmatter)!=null&&i.draft)})}const gL=ET(V0($c));IT(Rk,{routes:gL,base:"/",scrollBehavior(r,e){if(r.path!==e.path)return{top:0}}},r=>{const{app:e,router:t}=r,i=Ik(t);e.provide(ox,i),e.use(P_,{router:t}),e.provide(lg,Lc),fL(r),dL(r,Lc)});export{q as $,CL as A,PL as B,SL as C,nd as D,LL as E,Or as F,bg as G,Nx as H,Ct as I,yr as J,nh as K,qx as L,ML as M,J1 as N,hA as O,FL as P,pe as Q,NL as R,BL as S,Le as T,Xt as U,Cr as V,ye as W,Ce as X,$n as Y,wh as Z,Nn as _,OL as a,bv as a0,yt as a1,OR as a2,K as a3,Qy as a4,Q2 as a5,Ti as a6,z as a7,sg as b,AT as c,rg as d,k1 as e,M1 as f,Ma as g,X1 as h,EL as i,dg as j,Dg as k,nt as l,lx as m,RL as n,ci as o,_t as p,vT as q,pT as r,DL as s,fT as t,Gi as u,dh as v,kL as w,IL as x,qb as y,Ig as z};
